"use strict";(self.webpackChunkappsmith=self.webpackChunkappsmith||[]).push([[7786],{9378:function(e,t,r){r.d(t,{uB:function(){return p},wu:function(){return m},zJ:function(){return l}});var i="Start",n="End",a="unloadEvent",o="redirect",s="domainLookup",u="onnect",d="request",c="response",f="loadEvent",v="domContentLoadedEvent",l=[];function m(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(t)return r.of=e,h(r.of,r,"n",!0),h(t[a+i],r,"u",l),h(t[o+i],r,"r",l),h(t[a+n],r,"ue",l),h(t[o+n],r,"re",l),h(t["fetch"+i],r,"f",l),h(t[s+i],r,"dn",l),h(t[s+n],r,"dne",l),h(t["c"+u+i],r,"c",l),h(t["secureC"+u+"ion"+i],r,"s",l),h(t["c"+u+n],r,"ce",l),h(t[d+i],r,"rq",l),h(t[c+i],r,"rp",l),h(t[c+n],r,"rpe",l),h(t.domLoading,r,"dl",l),h(t.domInteractive,r,"di",l),h(t[v+i],r,"ds",l),h(t[v+n],r,"de",l),h(t.domComplete,r,"dc",l),h(t[f+i],r,"l",l),h(t[f+n],r,"le",l),r}function p(e,t){var r;return h("number"===typeof(r=e.type)?r:{navigate:void 0,reload:1,back_forward:2,prerender:3}[r],t,"ty"),h(e.redirectCount,t,"rc"),t}function h(e,t,r,i){if("number"===typeof e&&e>0){if(i){var n=(null===t||void 0===t?void 0:t.of)>0?t.of:0;e=Math.max(e-n,0)}e=Math.round(e),t[r]=e,l.push(e)}else l.push(void 0)}},6291:function(e,t,r){r.d(t,{P:function(){return s}});var i=r(63711),n=r(33559),a=r(2052),o=r(99038),s=new a.U(n.S.TIME_TO_FIRST_BYTE);if(i.il&&"undefined"!==typeof PerformanceNavigationTiming&&!i.Tt)(0,o.mr)((function(e){var t=e.value,r=e.attribution;s.isValid||s.update({value:t,attrs:{navigationEntry:r.navigationEntry}})}));else if(!s.isValid){var u={};for(var d in(null===i._A||void 0===i._A||null===(c=i._A.performance)||void 0===c?void 0:c.timing)||{}){var c,f;u[d]=Math.max((null===i._A||void 0===i._A||null===(f=i._A.performance)||void 0===f?void 0:f.timing[d])-i.cv,0)}s.update({value:u.responseStart,attrs:{navigationEntry:u}})}},89579:function(e,t,r){r.r(t),r.d(t,{Aggregate:function(){return W}});var i=r(45987),n=r(29439),a=r(1413),o=r(15671),s=r(43144),u=r(82963),d=r(78814),c=r(61120),f=r(60136),v=r(4942),l=r(63711),m=r(9378),p=r(17610),h=r(19435),g=r(19198),y=r(11344),T=r(30733),b=r(90489);function w(e){var t=[],r=(0,b.fP)();try{Object.keys(r.initializedAgents[e].features).forEach((function(e){switch(e){case T.D.ajax:t.push("xhr");break;case T.D.jserrors:t.push("err");break;case T.D.pageAction:t.push("ins");break;case T.D.sessionTrace:t.push("stn");break;case T.D.softNav:case T.D.spa:t.push("spa")}}))}catch(i){}return t}var Z=r(31285),A=r(31390),k=r(14415),E=r(89596),B=r(69480),M=r(6291),_=r(21782),D=r(38450),R=r(12088),C=r(51185),x=r(72346),N=r(86033),j=r(13092),P=new WeakMap,F=new WeakMap,L=new WeakMap,q=new WeakMap,I=function(){function e(){(0,o.Z)(this,e),(0,x.Z)(this,P,{writable:!0,value:void 0}),(0,x.Z)(this,F,{writable:!0,value:void 0}),(0,x.Z)(this,L,{writable:!0,value:void 0}),(0,x.Z)(this,q,{writable:!0,value:!1}),(0,j.Z)(this,P,l._A.performance.timeOrigin||l._A.performance.timing.navigationStart)}return(0,s.Z)(e,[{key:"ready",get:function(){return(0,N.Z)(this,q)}},{key:"originTime",get:function(){return(0,N.Z)(this,P)}},{key:"correctedOriginTime",get:function(){return(0,N.Z)(this,F)}},{key:"processRumRequest",value:function(e,t,r){var i=e.getResponseHeader("Date");if(!i)throw new Error("Missing date header on rum response.");var n=(r-t)/2,a=Math.floor(t+n);if((0,j.Z)(this,F,Math.floor(Date.parse(i)-a)),(0,j.Z)(this,L,(0,N.Z)(this,P)-(0,N.Z)(this,F)),Number.isNaN((0,N.Z)(this,F)))throw new Error("Date header invalid format.");(0,j.Z)(this,q,!0)}},{key:"convertRelativeTimestamp",value:function(e){return(0,N.Z)(this,F)+e}},{key:"correctAbsoluteTimestamp",value:function(e){return Math.floor(e-(0,N.Z)(this,L))}}]),e}(),O=["app"];var W=function(e){function t(e,r){var i,n,a,s;return(0,o.Z)(this,t),n=this,a=t,s=[e,r,y.t],a=(0,c.Z)(a),(i=(0,u.Z)(n,(0,d.Z)()?Reflect.construct(a,s||[],(0,c.Z)(n).constructor):a.apply(n,s))).timeToFirstByte=0,i.firstByteToWindowLoad=0,i.firstByteToDomContent=0,l.il?M.P.subscribe((function(e){var t=e.value,r=e.attrs.navigationEntry;i.timeToFirstByte=Math.max(t,i.timeToFirstByte),i.firstByteToWindowLoad=Math.max(Math.round(r.loadEventEnd-i.timeToFirstByte),i.firstByteToWindowLoad),i.firstByteToDomContent=Math.max(Math.round(r.domContentLoadedEventEnd-i.timeToFirstByte),i.firstByteToDomContent),i.sendRum()})):i.sendRum(),i}return(0,f.Z)(t,e),(0,s.Z)(t,[{key:"sendRum",value:function(){var e=this,t=(0,h.C5)(this.agentIdentifier),r=(0,h.OP)(this.agentIdentifier),o=new g.M(this);if(t.beacon){t.queueTime&&this.aggregator.store("measures","qt",{value:t.queueTime}),t.applicationTime&&this.aggregator.store("measures","ap",{value:t.applicationTime}),this.aggregator.store("measures","be",{value:this.timeToFirstByte}),this.aggregator.store("measures","fe",{value:this.firstByteToWindowLoad}),this.aggregator.store("measures","dc",{value:this.firstByteToDomContent});var s,u=(0,a.Z)((0,a.Z)({tt:t.ttGuid,us:t.user,ac:t.account,pr:t.product,af:w(this.agentIdentifier).join(",")},Object.entries(this.aggregator.get("measures")||{}).reduce((function(e,t){var r,i=(0,n.Z)(t,2),a=i[0],o=i[1];return e[a]=null===(r=o.params)||void 0===r?void 0:r.value,e}),{})),{},{xx:t.extra,ua:t.userAttributes,at:t.atts});if(r.session&&(u.fsh=Number(r.session.isNew)),"object"===typeof t.jsAttributes&&Object.keys(t.jsAttributes).length>0&&(s={ja:t.jsAttributes}),l._A.performance)if("undefined"!==typeof PerformanceNavigationTiming){var d,c=null===l._A||void 0===l._A||null===(d=l._A.performance)||void 0===d||null===(d=d.getEntriesByType("navigation"))||void 0===d?void 0:d[0],f={timing:(0,m.wu)(r.offset,c,{}),navigation:(0,m.uB)(c,{})};u.perf=(0,p.P)(f)}else if("undefined"!==typeof PerformanceTiming){var v={timing:(0,m.wu)(r.offset,l._A.performance.timing,{},!0),navigation:(0,m.uB)(l._A.performance.navigation,{})};u.perf=(0,p.P)(v)}u.fp=B.U.current.value,u.fcp=E.y.current.value;var y=(0,C.z)();o.send({endpoint:"rum",payload:{qs:u,body:s},opts:{needResponse:!0,sendEmptyBody:!0},cbFinished:function(t){var n=t.status,a=t.responseText,o=t.xhr,s=(0,C.z)();if(n>=400||0===n)e.ee.abort();else{try{var u=new I;if(u.processRumRequest(o,y,s),!u.ready)throw new Error("TimeKeeper not ready");r.timeKeeper=u}catch(v){return(0,D.p)(R.xS,["PVE/NRTime/Calculation/Failed"],void 0,T.D.metrics,e.ee),(0,_.LP)(e.agentIdentifier,T.D.metrics,!0),e.ee.abort(),void(0,A.Z)("Could not calculate New Relic server time. Agent shutting down.")}try{var d=JSON.parse(a),c=d.app,f=(0,i.Z)(d,O);r.appMetadata=c,(0,Z.N)(f,e.agentIdentifier),e.drain()}catch(l){e.ee.abort(),(0,A.Z)("RUM call failed. Agent shutting down.",l)}}}})}}}]),t}(k.m);(0,v.Z)(W,"featureName",y.t)}}]);
//# sourceMappingURL=page_view_event-aggregate.390e2873.chunk.js.map