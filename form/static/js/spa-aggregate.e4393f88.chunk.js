"use strict";(self.webpackChunkappsmith=self.webpackChunkappsmith||[]).push([[4873],{65441:function(t,e,n){n.d(e,{R:function(){return o},z:function(){return a}});var i=n(29439),r=[];function a(t){if(0===r.length)return!0;if(void 0===t.hostname)return!1;for(var e=0;e<r.length;e++){var n=r[e];if("*"===n.hostname)return!1;if(s(n.hostname,t.hostname)&&u(n.pathname,t.pathname))return!1}return!0}function o(t){if(r=[],t&&t.length)for(var e=0;e<t.length;e++){var n=t[e];if(n){0===n.indexOf("http://")?n=n.substring(7):0===n.indexOf("https://")&&(n=n.substring(8));var a=n.indexOf("/"),o=void 0,s=void 0;a>0?(o=n.substring(0,a),s=n.substring(a)):(o=n,s="");var u=o.split(":"),c=(0,i.Z)(u,1)[0];r.push({hostname:c,pathname:s})}}}function s(t,e){return!(t.length>e.length)&&e.indexOf(t)===e.length-t.length}function u(t,e){return 0===t.indexOf("/")&&(t=t.substring(1)),0===e.indexOf("/")&&(e=e.substring(1)),""===t||t===e}},56777:function(t,e,n){n.d(e,{o:function(){return p}});var i=n(93433),r=n(15671),a=n(43144),o=n(82963),s=n(78814),u=n(61120),c=n(97326),d=n(60136),h=n(75284),l=n(9831),f=n(19198),v=n(99712),m=n(73198);var p=function(t){function e(t,n,i){var a,d,h,l,p;return(0,r.Z)(this,e),h=this,l=e,p=[i],l=(0,u.Z)(l),(d=(0,o.Z)(h,(0,s.Z)()?Reflect.construct(l,p||[],(0,u.Z)(h).constructor):l.apply(h,p))).endpoint=t,d.opts=n||{},d.started=!1,d.timeoutHandle=null,d.aborted=!1,d.harvest=new f.M(d.sharedContext),(0,v.L)(d.unload.bind((0,c.Z)(d))),null===(a=d.sharedContext)||void 0===a||a.ee.on(m.wO.RESET,(function(){return d.runHarvest({forceNoRetry:!0})})),d}return(0,d.Z)(e,t),(0,a.Z)(e,[{key:"unload",value:function(){this.aborted||(this.opts.onUnload&&this.opts.onUnload(),this.runHarvest({unload:!0}))}},{key:"startTimer",value:function(t,e){this.interval=t,this.started=!0,this.scheduleHarvest(null!=e?e:this.interval)}},{key:"stopTimer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.aborted=t,this.started=!1,this.timeoutHandle&&clearTimeout(this.timeoutHandle)}},{key:"scheduleHarvest",value:function(t,e){var n=this;this.timeoutHandle||(null==t&&(t=this.interval),this.timeoutHandle=setTimeout((function(){n.timeoutHandle=null,n.runHarvest(e)}),1e3*t))}},{key:"runHarvest",value:function(t){var e=this;if(!this.aborted){var n,r,a=function(n){null!==t&&void 0!==t&&t.forceNoRetry&&(n.retry=!1),e.onHarvestFinished(t,n)},o=[];if(this.opts.getPayload){if(!(n=h.qD({isFinalHarvest:null===t||void 0===t?void 0:t.unload})))return!1;var s=!(null!==t&&void 0!==t&&t.unload)&&n===h.Be;if(!(r=this.opts.getPayload({retry:s,opts:t})))return void(this.started&&this.scheduleHarvest());r="[object Array]"===Object.prototype.toString.call(r)?r:[r],o.push.apply(o,(0,i.Z)(r))}var u=function(t){return e.harvest.sendX(t)};o.length?u=this.opts.raw?function(t){return e.harvest._send(t)}:function(t){return e.harvest.send(t)}:o.push(void 0),o.forEach((function(i){u({endpoint:e.endpoint,payload:i,opts:t,submitMethod:n,cbFinished:a,customUrl:e.opts.customUrl,raw:e.opts.raw})})),this.started&&this.scheduleHarvest()}}},{key:"onHarvestFinished",value:function(t,e){if(this.opts.onFinished&&this.opts.onFinished(e),e.sent&&e.retry){var n=e.delay||this.opts.retryDelay;this.started&&n?(clearTimeout(this.timeoutHandle),this.timeoutHandle=null,this.scheduleHarvest(n,t)):!this.started&&n&&this.scheduleHarvest(n,t)}}}]),e}(l.w)},84320:function(t,e,n){n.d(e,{AG:function(){return u},FX:function(){return d},n1:function(){return h},uR:function(){return c}});var i=n(44567),r=n(17610),a=n(34370),o=Object.prototype.hasOwnProperty,s=64;function u(t,e,n){return t||0===t||""===t?e(t)+(n?",":""):"!"}function c(t,e){return e?Math.floor(t).toString(36):void 0===t||0===t?"":Math.floor(t).toString(36)}function d(t){var e=Object.hasOwnProperty("create")?Object.create(null):{},n=0;return function(i){if("undefined"===typeof i||""===i)return"";var r=new a.RR({agentIdentifier:t});i=String(i),r.shouldObfuscate()&&(i=r.obfuscateString(i));return o.call(e,i)?c(e[i],!0):(e[i]=n++,function(t){return"'"+t.replace(l,"\\$1")}(i))}}function h(t,e){var n=[];return(0,i.D)(t,(function(t,i){if(!(n.length>=s)){var a,o=5;switch(t=e(t),typeof i){case"object":i?a=e((0,r.P)(i)):o=9;break;case"number":o=6,a=i%1?i:i+".";break;case"boolean":o=i?7:8;break;case"undefined":o=9;break;default:a=e(i)}n.push([o,t+(a?","+a:"")])}})),n}var l=/([,\\;])/g},9378:function(t,e,n){n.d(e,{uB:function(){return m},wu:function(){return v},zJ:function(){return f}});var i="Start",r="End",a="unloadEvent",o="redirect",s="domainLookup",u="onnect",c="request",d="response",h="loadEvent",l="domContentLoadedEvent",f=[];function v(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},f=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e)return n.of=t,p(n.of,n,"n",!0),p(e[a+i],n,"u",f),p(e[o+i],n,"r",f),p(e[a+r],n,"ue",f),p(e[o+r],n,"re",f),p(e["fetch"+i],n,"f",f),p(e[s+i],n,"dn",f),p(e[s+r],n,"dne",f),p(e["c"+u+i],n,"c",f),p(e["secureC"+u+"ion"+i],n,"s",f),p(e["c"+u+r],n,"ce",f),p(e[c+i],n,"rq",f),p(e[d+i],n,"rp",f),p(e[d+r],n,"rpe",f),p(e.domLoading,n,"dl",f),p(e.domInteractive,n,"di",f),p(e[l+i],n,"ds",f),p(e[l+r],n,"de",f),p(e.domComplete,n,"dc",f),p(e[h+i],n,"l",f),p(e[h+r],n,"le",f),n}function m(t,e){var n;return p("number"===typeof(n=t.type)?n:{navigate:void 0,reload:1,back_forward:2,prerender:3}[n],e,"ty"),p(t.redirectCount,e,"rc"),e}function p(t,e,n,i){if("number"===typeof t&&t>0){if(i){var r=(null===e||void 0===e?void 0:e.of)>0?e.of:0;t=Math.max(t-r,0)}t=Math.round(t),e[n]=t,f.push(t)}else f.push(void 0)}},99712:function(t,e,n){n.d(e,{L:function(){return u}});var i=n(37762),r=n(98841),a=n(63711),o=n(73087);if(a.v6){a._A.cleanupTasks=[];var s=a._A.close;a._A.close=function(){var t,e=(0,i.Z)(a._A.cleanupTasks);try{for(e.s();!(t=e.n()).done;){(0,t.value)()}}catch(n){e.e(n)}finally{e.f()}s()}}function u(t){a.il?((0,o.N)(t,!0),(0,r.bP)("pagehide",t)):a.v6&&a._A.cleanupTasks.push(t)}},36742:function(t,e,n){n.r(e),n.d(e,{Aggregate:function(){return ot}});var i=n(29439),r=n(43144),a=n(15671),o=n(82963),s=n(78814),u=n(61120),c=n(97326),d=n(60136),h=n(4942),l=n(68295),f=n(90957),v=n(65441),m=n(44567),p=n(9378),g=n(42437),N=n(19435),T=n(38894),b=0;function x(t,e,n,i){Object.defineProperty(this,"interaction",{value:t,writable:!0}),this.parent=e,this.id=++b,this.type=n,this.children=[],this.end=null,this.jsEnd=this.start=i,this.jsTime=0,this.attrs={},this.cancelled=!1}var y=x.prototype;y.child=function(t,e,n,i){var r=this.interaction;if(r.end||r.nodes>=128)return null;r.onNodeAdded(this);var a=new x(r,this,t,e);return a.attrs.name=n,r.nodes++,i||r.remaining++,a},y.callback=function(t,e){var n=this;n.jsTime+=t,e>n.jsEnd&&(n.jsEnd=e,n.interaction.lastCb=e)},y.cancel=function(){this.cancelled=!0,this.interaction.remaining--},y.finish=function(t){var e=this;if(!e.end){e.end=t;for(var n=e.parent;null!==(i=n)&&void 0!==i&&i.cancelled;){var i;n=n.parent}n&&n.children.push(e),e.parent=null;var r=this.interaction;r.remaining--,r.lastFinish=t,r.checkFinish()}};var R=N.Yu.ST,L=N.Yu.CT,k={};function S(t,e,n,i,r,a){this.agentIdentifier=a,this.ee=T.ee.get(a),k[a]=0,this.id=++k[a],this.eventName=t,this.nodes=0,this.remaining=0,this.finishTimer=null,this.checkingFinish=!1,this.lastCb=this.lastFinish=e,this.handlers=[],this.onFinished=r,this.done=!1;var o=(this.root=new x(this,null,"interaction",e)).attrs;o.trigger=t,o.initialPageURL=(0,N.OP)(a).origin,o.oldRoute=i,o.newURL=o.oldURL=n,o.custom={},o.store={}}var X=S.prototype;X.checkFinish=function(){var t=this;t.remaining>0?t._resetFinishCheck():t.checkingFinish||null===t.root.end&&(t._resetFinishCheck(),t.checkingFinish=!0,t.finishTimer=R((function(){t.checkingFinish=!1,t.finishTimer=R((function(){t.finishTimer=null,t.remaining<=0&&t.finish()}),1)}),0))},X.setNewURL=function(t){this.root.attrs.newURL=t},X.setNewRoute=function(t){this.root.attrs.newRoute=t},X.onNodeAdded=function(){this._resetFinishCheck()},X._resetFinishCheck=function(){this.finishTimer&&(L(this.finishTimer),this.finishTimer=null,this.checkingFinish=!1)},X.finish=function(){var t=this,e=t.root;if(null===e.end){var n=Math.max(t.lastCb,t.lastFinish),i=e.attrs.custom;this.onFinished&&this.onFinished(this),(0,m.D)((0,N.C5)(t.agentIdentifier).jsAttributes,(function(t,e){t in i||(i[t]=e)})),e.end=n,t.ee.emit("interaction",[this])}};var w=n(98841),F=n(56777),P=n(69292),C=n(84320);var I=function(t){function e(t){var n,i,r,c;return(0,a.Z)(this,e),i=this,r=e,c=[t],r=(0,u.Z)(r),(n=(0,o.Z)(i,(0,s.Z)()?Reflect.construct(r,c||[],(0,u.Z)(i).constructor):r.apply(i,c))).firstTimestamp=void 0,n}return(0,d.Z)(e,t),(0,r.Z)(e,[{key:"serializeMultiple",value:function(t,e,n){var i=this,r=(0,N.C5)(this.sharedContext.agentIdentifier),a=(0,C.FX)(this.sharedContext.agentIdentifier),o="bel.7";return t.forEach((function(t){o+=";"+i.serializeInteraction(t.root,e,n,t.routeChange,a,r)})),this.firstTimestamp=void 0,o}},{key:"serializeSingle",value:function(t,e,n,i){var r=(0,N.C5)(this.sharedContext.agentIdentifier),a=(0,C.FX)(this.sharedContext.agentIdentifier),o="bel.7;"+this.serializeInteraction(t,e,n,i,a,r);return this.firstTimestamp=void 0,o}},{key:"serializeInteraction",value:function(t,e,n,i,r,a){var o=this;e=e||0;var s="initialPageLoad"===t.attrs.trigger,u={interaction:1,ajax:2,customTracer:4},c=!0;return function t(d,h){if("customEnd"===d.type)return h.push([3,(0,C.uR)(d.end-o.firstTimestamp)]);var l=d.type,f=u[l],v=d.start,p=d.children.length,g=0,N=a.atts,T=s&&n.length&&1===f,b=[],x=d.attrs,y=x.metrics,R=x.params,L=a.queueTime,k=a.applicationTime;"undefined"===typeof o.firstTimestamp?(v+=e,o.firstTimestamp=v):v-=o.firstTimestamp;var S=[(0,C.uR)(v),(0,C.uR)(d.end-d.start),(0,C.uR)(d.jsEnd-d.end),(0,C.uR)(d.jsTime)];switch(f){case 1:S[2]=(0,C.uR)(d.jsEnd-o.firstTimestamp),S.push(r(x.trigger),r((0,P.f)(x.initialPageURL,c)),r((0,P.f)(x.oldURL,c)),r((0,P.f)(x.newURL,c)),r(x.customName),s?"":i?1:2,(0,C.AG)(s&&L,C.uR,!0)+(0,C.AG)(s&&k,C.uR,!0)+(0,C.AG)(x.oldRoute,r,!0)+(0,C.AG)(x.newRoute,r,!0)+r(x.id),r(d.id),(0,C.AG)(x.firstPaint,C.uR,!0)+(0,C.AG)(x.firstContentfulPaint,C.uR,!1));var X=(0,C.n1)(x.custom,r);b=b.concat(X),g=X.length,N&&(p++,b.push("a,"+r(N)));break;case 2:if(S.push(r(R.method),(0,C.uR)(R.status),r(R.host),r(R.pathname),(0,C.uR)(y.txSize),(0,C.uR)(y.rxSize),x.isFetch?1:x.isJSONP?2:"",r(d.id),(0,C.AG)(d.dt&&d.dt.spanId,r,!0)+(0,C.AG)(d.dt&&d.dt.traceId,r,!0)+(0,C.AG)(d.dt&&d.dt.timestamp,C.uR,!1)),Object.keys((null===R||void 0===R?void 0:R.gql)||{}).length){var w=(0,C.n1)(R.gql,r);b=b.concat(w),g=w.length}break;case 4:var F=x.tracedTime;S.push(r(x.name),(0,C.AG)(F,C.uR,!0)+r(d.id))}for(var I=0;I<d.children.length;I++)t(d.children[I],b);if(S.unshift((0,C.uR)(f),(0,C.uR)(p+=g)),h.push(S),p&&h.push(b.join(";")),T){var H=",",j="b",Z=0;(0,m.D)(n.slice(1,21),(function(t,e){void 0!==e?(j+=H+(0,C.uR)(e-Z),H=",",Z=e):(j+=H+"!",H="")})),h.push(j)}else 1===f&&h.push("");return h}(t,[]).join(";")}}]),e}(n(9831).w),H=n(96787),j=n(30733),Z=n(14415),O=n(89596),A=n(69480),U=n(1436),E=n(63711),z=n(38450),M=n(12088),_=n(21782),D=n(31390);var G=H.t9,B=H.wu,q=H.ZE,J=H.vl,Y=H.o7,$=H.P,K=H.ak,W=H.Yg,Q=H.b1,V=H.Lu,tt=H.Tv,et=H.OP,nt=H.PF,it=H.$Y,rt=H.zS,at=H.Aw,ot=function(t){function e(t,n){var r,d,h,b;(0,a.Z)(this,e),d=this,h=e,b=[t,n,G],h=(0,u.Z)(h),r=(0,o.Z)(d,(0,s.Z)()?Reflect.construct(h,b||[],(0,u.Z)(d).constructor):h.apply(d,b));var x,y=(0,N.OP)(t);r.state={initialPageURL:y.origin,lastSeenUrl:y.origin,lastSeenRouteName:null,timerMap:{},timerBudget:q,currentNode:null,prevNode:null,nodeOnLastHashUpdate:null,initialPageLoad:null,pageLoaded:!1,childTime:0,depth:0,harvestTimeSeconds:(0,N.Mt)(t,"spa.harvestTimeSeconds")||10,interactionsToHarvest:[],interactionsSent:[],disableSpaFix:((0,N.Mt)(t,"feature_flags")||[]).indexOf("disable-spa-fix")>-1},r.serializer=new I((0,c.Z)(r));var R=(0,c.Z)(r),L=R.state,k=R.serializer,X=T.ee.get(t),P=X.get("mutation"),C=X.get("promise"),H=X.get("history"),Z=X.get("events"),ot=X.get("timer"),st=X.get("fetch"),ut=X.get("jsonp"),ct=X.get("xhr"),dt=X.get("tracer");if(r.waitForFlags(["spa"]).then((function(e){(0,i.Z)(e,1)[0]?((x=new F.o("events",{onFinished:xt,retryDelay:L.harvestTimeSeconds},{agentIdentifier:t,ee:X})).harvest.on("events",bt),r.drain()):(r.blocked=!0,(0,_.o5)(r.agentIdentifier,r.featureName))})),!1===(0,N.Mt)(t,"spa.enabled"))return(0,o.Z)(r);L.initialPageLoad=new S("initialPageLoad",0,L.lastSeenUrl,L.lastSeenRouteName,Nt,t),L.initialPageLoad.save=!0,L.prevInteraction=L.initialPageLoad,L.currentNode=L.initialPageLoad.root,L.initialPageLoad[W]++,(0,l.X)(J,lt,r.featureName,X),(0,l.X)($,lt,r.featureName,C);var ht={getCurrentNode:function(){return L.currentNode},setCurrentNode:gt};function lt(){L.depth++,this.prevNode=L.currentNode,this.ct=L.childTime,L.childTime=0,L.timerBudget=q}function ft(){L.depth--;var t=this.jsTime||0,e=t-L.childTime;L.childTime=this.ct+t,L.currentNode&&(L.currentNode.callback(e,this[Y]),this.isTraced&&(L.currentNode.attrs.tracedTime=e)),this.jsTime=L.currentNode?0:e,gt(this.prevNode),this.prevNode=null,L.timerBudget=q}function vt(t,e,n){var i=this[V];if(i){var r=i[Q],a=this.inc;this.isTraced=!0,a?r[W]--:i&&i.finish(t),n?gt(i):r.checkFinish()}}function mt(t){return L.currentNode&&L.currentNode[Q]===t?L.currentNode:t.root}function pt(){this.resolved||(this.resolved=!0,this[V]=L.currentNode)}function gt(t){L.pageLoaded||t||!L.initialPageLoad||(t=L.initialPageLoad.root),L.currentNode&&L.currentNode[Q].checkFinish(),L.prevNode=L.currentNode,L.currentNode=t&&!t[Q].root.end?t:null}function Nt(t){t===L.initialPageLoad&&(L.initialPageLoad=null);var e=t.root,n=e.attrs;L.currentNode=e,(0,m.D)(t.handlers,(function(t,e){e(n.store)})),gt(null)}(0,l.X)("spa-register",(function(t){"function"===typeof t&&t(ht)}),j.D.spa,X),(0,l.X)(Y,ft,r.featureName,X),(0,l.X)("cb-end",ft,r.featureName,C),(0,l.X)(J,(function(e,n){var i=e[0],r=i.type,a=i["__nrNode:".concat(U.a)];if(!L.pageLoaded&&("load"===r&&n===window||E.LW)&&(L.pageLoaded=!0,this.prevNode=L.currentNode=null,L.initialPageLoad&&(a=L.initialPageLoad.root,L.initialPageLoad[W]=0,at((function(){B.push("popstate")})))),a)gt(a);else if("hashchange"===r)gt(L.nodeOnLastHashUpdate),L.nodeOnLastHashUpdate=null;else if(n instanceof XMLHttpRequest)gt(X.context(n).spaNode);else if(!L.currentNode&&-1!==B.indexOf(r)){var o=new S(r,this[J],L.lastSeenUrl,L.lastSeenRouteName,Nt,t);if(L.prevInteraction=o,gt(o.root),"click"===r){var s=function(t){var e=t.tagName.toLowerCase();if(-1!==["a","button","input"].indexOf(e))return t.title||t.value||t.innerText}(i.target);s&&(L.currentNode.attrs.custom.actionText=s)}}i["__nrNode:".concat(U.a)]=L.currentNode}),r.featureName,Z),(0,l.X)("setTimeout-end",(function(t,e,n){!L.currentNode||L.timerBudget-this.timerDuration<0||(!t||t[0]instanceof Function)&&(L.currentNode[Q][W]++,this.timerId=n,L.timerMap[n]=L.currentNode,this.timerBudget=L.timerBudget-50)}),r.featureName,ot),(0,l.X)("clearTimeout-start",(function(t){var e=t[0],n=L.timerMap[e];if(n){var i=n[Q];i[W]--,i.checkFinish(),delete L.timerMap[e]}}),r.featureName,ot),(0,l.X)(J,(function(){L.timerBudget=this.timerBudget||q;var t=this.timerId,e=L.timerMap[t];gt(e),delete L.timerMap[t],e&&e[Q][W]--}),r.featureName,ot),(0,l.X)(J,(function(){gt(this[V])}),r.featureName,ct),(0,l.X)("new-xhr",(function(){if(!L.disableSpaFix&&!L.currentNode&&L.prevInteraction&&!L.prevInteraction.ignored){var t=L.prevInteraction;L.currentNode=t.root,t.root.end=null}L.currentNode&&(this[V]=L.currentNode.child("ajax",null,null,!0))}),r.featureName,ct),(0,l.X)("send-xhr-start",(function(){var t,e=this[V];e&&!this.sent&&(this.sent=!0,e.dt=this.dt,null!==(t=e.dt)&&void 0!==t&&t.timestamp&&(e.dt.timestamp=y.timeKeeper.correctAbsoluteTimestamp(e.dt.timestamp)),e.jsEnd=e.start=this.startTime,e[Q][W]++)}),r.featureName,ct),(0,l.X)("xhr-resolved",(function(){var t=this[V];if(t){if(!(0,v.z)(this.params))return void t.cancel();var e=t.attrs;e.params=this.params,e.metrics=this.metrics,t.finish(this.endTime),this.currentNode&&this.currentNode.interaction&&this.currentNode.interaction.checkFinish()}}),r.featureName,X),(0,l.X)("new-jsonp",(function(t){L.currentNode&&((this[tt]=L.currentNode.child("ajax",this[et])).start=this["new-jsonp"],this.url=t,this.status=null)}),r.featureName,ut),(0,l.X)("cb-start",(function(t){var e=this[tt];e&&(gt(e),this.status=200)}),r.featureName,ut),(0,l.X)("jsonp-error",(function(){var t=this[tt];t&&(gt(t),this.status=0)}),r.featureName,ut),(0,l.X)(rt,(function(){var t=this[tt];if(t){if(null===this.status)return void t.cancel();var e=t.attrs,n=e.params={},i=(0,f.e)(this.url);n.method="GET",n.pathname=i.pathname,n.host=i.hostname+":"+i.port,n.status=this.status,e.metrics={txSize:0,rxSize:0},e.isJSONP=!0,t.jsEnd=this[rt],t.jsTime=this[$]?this[rt]-this[$]:0,t.finish(t.jsEnd)}}),r.featureName,ut),(0,l.X)(et,(function(t,e){if(t){if(!L.disableSpaFix&&!L.currentNode&&L.prevInteraction&&!L.prevInteraction.ignored){var n=L.prevInteraction;L.currentNode=n.root,n.root.end=null}var i;if(L.currentNode)if(this[V]=L.currentNode.child("ajax",this[et]),e&&this[V])this[V].dt=e,null!==(i=this[V].dt)&&void 0!==i&&i.timestamp&&(this[V].dt.timestamp=y.timeKeeper.correctAbsoluteTimestamp(this[V].dt.timestamp))}}),r.featureName,st),(0,l.X)(it+"start",(function(t){L.currentNode&&(this[V]=L.currentNode,L.currentNode[Q][W]++)}),r.featureName,st),(0,l.X)(it+"end",(function(t,e,n){var i=this[V];i&&i[Q][W]--}),r.featureName,st),(0,l.X)(nt,(function(t,e){var n=this[V];if(n){if(t||!(0,v.z)(this.params))return void n.cancel();var i=n.attrs;i.params=this.params,i.metrics={txSize:this.txSize,rxSize:this.rxSize},i.isFetch=!0,n.finish(this[nt])}}),r.featureName,st),(0,l.X)("newURL",(function(t,e){if(L.currentNode)L.currentNode[Q].setNewURL(t);else if(L.prevInteraction&&!L.prevInteraction.ignored){var n=L.prevInteraction;n.setNewURL(t),n.root.end=null,gt(n.root)}L.currentNode&&(L.lastSeenUrl!==t&&(L.currentNode[Q].routeChange=!0),e&&(L.nodeOnLastHashUpdate=L.currentNode)),L.lastSeenUrl=t}),r.featureName,H),ut.on("dom-start",(function(t){if(L.currentNode){var e=t[0],n=e&&"SCRIPT"===e.nodeName&&""!==e.src,i=L.currentNode.interaction;n&&(i[W]++,e.addEventListener("load",(function(){i[W]--,i.checkFinish()}),(0,w.m$)(!1)),e.addEventListener("error",(function(){i[W]--,i.checkFinish()}),(0,w.m$)(!1)))}})),(0,l.X)(J,(function(){gt(L.prevNode)}),r.featureName,P),(0,l.X)("resolve-start",pt,r.featureName,C),(0,l.X)("executor-err",pt,r.featureName,C),(0,l.X)("propagate",(function(t,e){!e&&this[V]||(this[V]=L.currentNode)}),r.featureName,C),(0,l.X)($,(function(){gt((this.getCtx?this.getCtx():this)[V])}),r.featureName,C),(0,l.X)(K+"get",(function(e){var n,i,r,a;a=null!==L&&void 0!==L&&null!==(n=L.currentNode)&&void 0!==n&&n[Q]?this.ixn=L.currentNode[Q]:null===(null===L||void 0===L||null===(i=L.prevNode)||void 0===i?void 0:i.end)&&"initialPageLoad"!==(null===L||void 0===L||null===(r=L.prevNode)||void 0===r||null===(r=r[Q])||void 0===r||null===(r=r.root)||void 0===r||null===(r=r[Q])||void 0===r?void 0:r.eventName)?this.ixn=L.prevNode[Q]:this.ixn=new S("api",e,L.lastSeenUrl,L.lastSeenRouteName,Nt,t),L.currentNode||(a.checkFinish(),L.depth&&gt(a.root))}),r.featureName,X),(0,l.X)(K+"actionText",(function(t,e){var n=this.ixn.root.attrs.custom;e&&(n.actionText=e)}),r.featureName,X),(0,l.X)(K+"setName",(function(t,e,n){var i=this.ixn.root.attrs;e&&(i.customName=e),n&&(i.trigger=n)}),r.featureName,X),(0,l.X)(K+"setAttribute",(function(t,e,n){this.ixn.root.attrs.custom[e]=n}),r.featureName,X),(0,l.X)(K+"end",(function(t){var e=this.ixn,n=mt(e);gt(null),n.child("customEnd",t).finish(t),e.finish()}),r.featureName,X),(0,l.X)(K+"ignore",(function(t){this.ixn.ignored=!0}),r.featureName,X),(0,l.X)(K+"save",(function(t){this.ixn.save=!0}),r.featureName,X),(0,l.X)(K+"tracer",(function(t,e,n){var i=this.ixn,r=mt(i),a=X.context(n);if(!e)return a.inc=++i[W],a[V]=r;a[V]=r.child("customTracer",t,e)}),r.featureName,X),(0,l.X)(J,vt,r.featureName,dt),(0,l.X)("no-"+J,vt,r.featureName,dt),(0,l.X)(K+"getContext",(function(t,e){var n=this.ixn.root.attrs.store;setTimeout((function(){e(n)}),0)}),r.featureName,X),(0,l.X)(K+"onEnd",(function(t,e){this.ixn.handlers.push(e)}),r.featureName,X),(0,l.X)("api-routeName",(function(t,e){L.lastSeenRouteName=e,L.currentNode&&L.currentNode[Q].setNewRoute(e)}),r.featureName,X);var Tt=(0,c.Z)(r);function bt(t){if(0===L.interactionsToHarvest.length||Tt.blocked)return{};var e=k.serializeMultiple(L.interactionsToHarvest,0,p.zJ);return t.retry&&L.interactionsToHarvest.forEach((function(t){L.interactionsSent.push(t)})),L.interactionsToHarvest=[],{body:{e:e}}}function xt(t){t.sent&&t.retry&&L.interactionsSent.length>0&&(L.interactionsSent.forEach((function(t){L.interactionsToHarvest.unshift(t)})),L.interactionsSent=[])}return X.on("errorAgg",(function(t,e,n,i){L.currentNode&&(n._interactionId=L.currentNode.interaction.id,L.currentNode.type&&"interaction"!==L.currentNode.type&&(n._interactionNodeId=L.currentNode.id))})),X.on("interaction",(function(t){var e,n,i,r,a;if(t.ignored||!t.save&&!t.routeChange)return void X.emit("interactionDone",[t,!1]);L.prevInteraction===t&&(L.prevInteraction=null);t.root.attrs.id=(0,g.Rl)(),"initialPageLoad"===t.root.attrs.trigger&&(t.root.attrs.firstPaint=A.U.current.value,t.root.attrs.firstContentfulPaint=O.y.current.value);X.emit("interactionDone",[t,!0]),L.interactionsToHarvest.push(t),a="initialPageLoad"===(null===(e=t.root)||void 0===e||null===(e=e.attrs)||void 0===e?void 0:e.trigger)?"InitialPageLoad":t.routeChange?"RouteChange":"Custom";(0,z.p)(M.xS,["Spa/Interaction/".concat(a,"/Duration/Ms"),Math.max(((null===(n=t.root)||void 0===n?void 0:n.end)||0)-((null===(i=t.root)||void 0===i?void 0:i.start)||0),0)],void 0,j.D.metrics,X),null===(r=x)||void 0===r||r.scheduleHarvest(0),x||(0,D.Z)("SPA scheduler is not initialized. Saved interaction is not sent!")})),r}return(0,d.Z)(e,t),(0,r.Z)(e)}(Z.m);(0,h.Z)(ot,"featureName",G)}}]);
//# sourceMappingURL=spa-aggregate.e4393f88.chunk.js.map