"use strict";(self.webpackChunkappsmith=self.webpackChunkappsmith||[]).push([[7568],{24264:function(e,n,t){t.d(n,{GH:function(){return i},hx:function(){return r}});var i=function(e){return{type:"",payload:{currentEditingId:e}}},r=function(e){var n=e.editorId,t=e.fetchDatasourceMeta,i=void 0!==t&&t;return{type:"",payload:{workspaceId:e.workspaceId,editorId:n,fetchDatasourceMeta:i}}}},11858:function(e,n,t){t.d(n,{Y:function(){return g}});var i,r=t(1413),o=t(30168),a=t(59195),s=t.n(a),l=(t(50390),t(62608)),d=t(55194),c=t.n(d),u=t(64250),p=t(22719),h=t(88189),v=t(62559),f=function(e,n,t,i){return t===h.lm.PRIMARY?i||e.colors.button[(n||h.Y9.PRIMARY).toLowerCase()].primary.bgColor:"none"},m=(0,l.ZP)((function(e){return(0,v.jsx)(u.zx,(0,r.Z)({},s()(e,["prevButtonStyle","borderRadius","boxShadow","boxShadowColor","buttonColor","buttonStyle","buttonVariant"])))}))(i||(i=(0,o.Z)(["\n  height: 100%;\n  background-image: none !important;\n  font-weight: ",";\n  outline: none;\n  padding: 0px 10px;\n\n  ","\n\n  border-radius: ",";\n\n  box-shadow: "," !important;\n"])),(function(e){return e.theme.fontWeights[2]}),(function(e){var n=e.buttonColor,t=e.buttonStyle,i=e.buttonVariant,r=e.prevButtonStyle,o=e.theme;return"\n    &:enabled {\n      background: ".concat(t===h.Y9.WARNING?i===h.lm.PRIMARY?o.colors.button.warning.primary.bgColor:"none":t===h.Y9.DANGER?i===h.lm.PRIMARY?o.colors.button.danger.primary.bgColor:"none":t===h.Y9.INFO?i===h.lm.PRIMARY?o.colors.button.info.primary.bgColor:"none":t===h.Y9.SECONDARY?i===h.lm.PRIMARY?o.colors.button.secondary.primary.bgColor:"none":t===h.Y9.CUSTOM?f(o,r,i,n):i===h.lm.PRIMARY?o.colors.button.primary.primary.bgColor:"none"," !important;\n    }\n\n    &:hover:enabled, &:active:enabled. &:focus:enabled {\n      background: ").concat(t===h.Y9.WARNING?i===h.lm.SECONDARY?o.colors.button.warning.secondary.hoverColor:i===h.lm.TERTIARY?o.colors.button.warning.tertiary.hoverColor:o.colors.button.warning.primary.hoverColor:t===h.Y9.DANGER?i===h.lm.PRIMARY?o.colors.button.danger.primary.hoverColor:o.colors.button.danger.secondary.hoverColor:t===h.Y9.INFO?i===h.lm.PRIMARY?o.colors.button.info.primary.hoverColor:o.colors.button.info.secondary.hoverColor:t===h.Y9.SECONDARY?i===h.lm.SECONDARY?o.colors.button.secondary.secondary.hoverColor:i===h.lm.TERTIARY?o.colors.button.secondary.tertiary.hoverColor:o.colors.button.secondary.primary.hoverColor:t===h.Y9.CUSTOM?function(e,n,t,i){if(!i)return e.colors.button[(n||h.Y9.PRIMARY).toLowerCase()][(t||h.lm.PRIMARY).toLowerCase()].hoverColor;switch(t){case h.lm.SECONDARY:return i?c()(i).lighten(40).toString():e.colors.button.primary.secondary.hoverColor;case h.lm.TERTIARY:return i?c()(i).lighten(40).toString():e.colors.button.primary.tertiary.hoverColor;default:return i?c()(i).darken(10).toString():e.colors.button.primary.primary.hoverColor}}(o,r,i,n):i===h.lm.SECONDARY?o.colors.button.primary.secondary.hoverColor:i===h.lm.TERTIARY?o.colors.button.primary.tertiary.hoverColor:o.colors.button.primary.primary.hoverColor," !important;\n      border-color: var(--appsmith-input-focus-border-color) !important;\n    }\n\n    &:disabled {\n      background-color: ").concat(o.colors.button.disabled.bgColor," !important;\n      color: ").concat(o.colors.button.disabled.textColor," !important;\n    }\n\n    border: ").concat(i===h.lm.SECONDARY?t===h.Y9.WARNING?"1px solid ".concat(o.colors.button.warning.secondary.borderColor):t===h.Y9.DANGER?"1px solid ".concat(o.colors.button.danger.secondary.borderColor):t===h.Y9.INFO?"1px solid ".concat(o.colors.button.info.secondary.borderColor):t===h.Y9.SECONDARY?"1px solid ".concat(o.colors.button.secondary.secondary.borderColor):t===h.Y9.CUSTOM?"1px solid ".concat(function(e,n,t,i){return t===h.lm.SECONDARY?i||e.colors.button[(n||h.Y9.PRIMARY).toLowerCase()].secondary.borderColor:"none"}(o,r,i,n)):"1px solid ".concat(o.colors.button.primary.secondary.borderColor):"none"," !important;\n\n    & > span {\n      max-height: 100%;\n      max-width: 99%;\n      text-overflow: ellipsis;\n      overflow: hidden;\n      display: -webkit-box;\n      -webkit-line-clamp: 1;\n      -webkit-box-orient: vertical;\n\n      color: ").concat(i===h.lm.PRIMARY?t===h.Y9.CUSTOM?function(e,n,t){return n?c()(n).isDark()?e.colors.button.custom.solid.light.textColor:e.colors.button.custom.solid.dark.textColor:e.colors.button[(t||h.Y9.PRIMARY).toLowerCase()].solid.textColor}(o,n,r):"".concat(o.colors.button.primary.primary.textColor):t===h.Y9.WARNING?"".concat(o.colors.button.warning.secondary.textColor):t===h.Y9.DANGER?"".concat(o.colors.button.danger.secondary.textColor):t===h.Y9.INFO?"".concat(o.colors.button.info.secondary.textColor):t===h.Y9.SECONDARY?"".concat(o.colors.button.secondary.secondary.textColor):t===h.Y9.CUSTOM?f(o,r,h.lm.PRIMARY,n):"".concat(o.colors.button.primary.secondary.textColor)," !important;\n    }\n  ")}),(function(e){return e.borderRadius===h.ay.ROUNDED?"5px":0}),(function(e){var n=e.boxShadow,t=e.boxShadowColor,i=e.theme;return n===h.Mj.VARIANT1?"0px 0px 4px 3px ".concat(t||i.colors.button.boxShadow.default.variant1):n===h.Mj.VARIANT2?"3px 3px 4px ".concat(t||i.colors.button.boxShadow.default.variant2):n===h.Mj.VARIANT3?"0px 1px 3px ".concat(t||i.colors.button.boxShadow.default.variant3):n===h.Mj.VARIANT4?"2px 2px 0px ".concat(t||i.colors.button.boxShadow.default.variant4):n===h.Mj.VARIANT5?"-2px -2px 0px ".concat(t||i.colors.button.boxShadow.default.variant5):"none"}));function g(e){var n=e.borderRadius,t=e.boxShadow,i=e.buttonColor,r=e.buttonStyle,o=e.buttonVariant,a=e.className,s=e.disabled,l=e.icon,d=e.iconAlign,c=e.iconName,u=e.loading,h=e.onClick,f=e.prevButtonStyle,g=e.rightIcon,x=e.text;return d===p.v.RIGHT?(0,v.jsx)(m,{alignText:c?p.v.LEFT:p.v.CENTER,borderRadius:n,boxShadow:t,buttonColor:i,buttonStyle:r,buttonVariant:o,className:a,disabled:s,fill:!0,icon:l,loading:u,onClick:h,prevButtonStyle:f,rightIcon:c||g,text:x}):(0,v.jsx)(m,{alignText:c?p.v.RIGHT:p.v.CENTER,borderRadius:n,boxShadow:t,buttonColor:i,buttonStyle:r,buttonVariant:o,className:a,disabled:s,fill:!0,icon:c||l,loading:u,onClick:h,prevButtonStyle:f,rightIcon:g,text:x})}g.defaultProps={buttonStyle:"SECONDARY",buttonVariant:h.lm.PRIMARY,disabled:!1,text:"Button Text",minimal:!0}},46377:function(e,n,t){t.d(n,{ZP:function(){return k}});var i,r,o,a,s=t(29439),l=t(30168),d=t(50390),c=t(62608),u=t(31205),p=t(59551),h=t(56617),v=t(42957),f=t(26844),m=t(4482),g=t(81165),x=t(63634),b=t(95765),y=t(47110),I=t(56055),C=t(62559),S=c.ZP.div(i||(i=(0,l.Z)(["\n  display: flex;\n  flex-direction: column;\n  border-right: 1px solid var(--ads-v2-color-border);\n  width: 160px;\n  height: 100%;\n"]))),P=c.ZP.div(r||(r=(0,l.Z)(["\n  display: flex;\n  flex-direction: row;\n  padding: 12px 8px;\n  align-items: center;\n  justify-content: flex-start;\n  border-radius: var(--ads-v2-border-radius);\n  width: 159px;\n\n  ","\n\n  ","\n"])),(function(e){return e.isSelected&&"background: var(--ads-color-background-secondary);"}),(function(e){return e.disabled?" cursor: not-allowed;":"cursor: pointer;"})),T=(0,c.ZP)(u.x)(o||(o=(0,l.Z)(["\n  opacity: ",";\n  text-overflow: ellipsis;\n  overflow: hidden;\n"])),(function(e){return e.disabled?.6:1}));(0,c.ZP)(p.r)(a||(a=(0,l.Z)(["\n  display: inline;\n"])));var k=function(e){var n=e.isInsideReconnectModal,t=e.viewMode,i=(0,d.useState)(!1),r=(0,s.Z)(i,2),o=r[0],a=r[1],l=(0,g.j)(x.$t.MULTIPLE_ENV,!0),c=(0,b.v9)(l),u=(0,g.d)({section:x.f4.DSEditor,feature:x.F4.MultipleEnv}),p=(0,b.v9)(u);if((0,d.useEffect)((function(){var e=y.E.length>0&&c&&!t&&!n;o!==e&&a(e),y.E.length}),[y.E.length,t,n]),!o)return null;var k=function(e,n){var t=n;return(0,C.jsxs)(P,{disabled:t,isSelected:e.selected,children:[(0,C.jsx)(T,{"aria-disabled":t,"aria-selected":e.selected,"data-testid":"t--ds-data-filter-".concat(e.name),disabled:t,kind:"body-m",children:(0,m.fm)(e.name)},e.id),n&&(0,C.jsx)(h.V,{isClosable:!1,size:"md",style:{marginLeft:"auto"},children:(0,f.tnH)(f.YFv)})]},"".concat(e.id,"-parent"))};return(0,C.jsx)(S,{children:y.E.map((function(e){var n=!e.selected;return n?(0,C.jsx)(v.u,{content:(0,I.WK)(p),placement:"right",children:k(e,n)}):k(e,n)}))})}},56055:function(e,n,t){t.d(n,{WK:function(){return Z},ZP:function(){return D}});var i,r,o,a,s=t(29439),l=t(36459),d=t(30168),c=t(50390),u=t(95765),p=t(62608),h=t(31205),v=t(54138),f=t(59551),m=t(22994),g=t(42957),x=t(4482),b=t(26844),y=t(81165),I=t(48713),C=t(76104),S=t(63634),P=t(47110),T=t(62559),k=p.ZP.div(i||(i=(0,d.Z)(["\n  display: flex;\n  border-right: 1px solid var(--ads-v2-color-border);\n  padding: 0px 16px;\n\n  .rc-select-selector {\n    min-width: 160px;\n    width: 160px;\n    border: none;\n  }\n"]))),E=(0,p.ZP)(h.x)(r||(r=(0,d.Z)(["\n  color: var(--ads-v2-color-fg-emphasis);\n  opacity: ",";\n  display: flex;\n  flex-direction: row;\n"])),(function(e){return e.disabled?.6:1})),j=(0,p.ZP)(v.J)(o||(o=(0,d.Z)(["\n  margin-right: 8px;\n"]))),w=(0,p.ZP)(f.r)(a||(a=(0,d.Z)(["\n  display: inline;\n"]))),Z=function(e){return(0,T.jsxs)(h.x,{color:"var(--ads-v2-color-white)","data-testid":"t--switch-env-tooltip",kind:"action-m",children:[(0,b.tnH)(b.K7X),(0,T.jsx)(w,{kind:"primary",target:"_blank",to:e,children:(0,b.tnH)(b.jRY)})]})};var D=function(e){(0,l.Z)(e);var n=(0,c.useState)(!1),t=(0,s.Z)(n,2),i=t[0],r=t[1],o=(0,y.j)(S.$t.MULTIPLE_ENV,!0),a=(0,u.v9)(o),d=(0,y.d)({section:S.f4.BottomBarEnvSwitcher,feature:S.F4.MultipleEnv}),p=(0,u.v9)(d);(0,c.useEffect)((function(){r(!!(0,C.id)(window.location.pathname)||!!(0,C.mq)(window.location.pathname))}),[window.location.pathname]);var h=(0,u.v9)(I.dZ);if(!a)return null;var v=function(e){return(0,T.jsx)("div",{className:"flex w-100",children:(0,T.jsxs)(E,{disabled:!e.selected,children:[!e.selected&&(0,T.jsx)(j,{name:"lock-2-line"}),(0,x.fm)(e.name)]})})};return(0,T.jsx)(k,{"aria-disabled":i&&!h,"data-testid":"t--switch-env",children:(0,T.jsx)(m.P,{className:"select_environemnt",dropdownClassName:"select_environemnt_dropdown",getPopupContainer:function(e){return e.parentNode.parentNode},isDisabled:i&&!h||1===P.E.length,listHeight:400,size:"md",value:(0,x.fm)(P.E[0].name),children:P.E.map((function(e,n){return(0,T.jsx)(m.W,{"aria-checked":e.selected,"data-testid":"t--switch-env-dropdown-option-".concat(e.name),disabled:!e.selected,label:e.name,selected:e.selected,value:e,children:e.selected?(0,T.jsx)("div",{className:"flex flex-col gap-1",children:v(e)}):(0,T.jsx)(g.u,{content:Z(p),placement:"right",children:v(e)})},"".concat(e.id,"-").concat(n))}))})})}},97138:function(e,n,t){t.d(n,{q:function(){return Z},c:function(){return D}});var i=t(50390),r=t(95765),o=t(93433),a=t(29439),s=t(30942),l=t(18581),d=t(83011),c=t(56626),u=t(31205),p=t(56617),h=t(26844),v=t(77855),f=t(81591),m=t(56553),g=t(11989),x=t(62559);var b=function(e){var n=e.datasource,t=e.disabled,b=e.isLoading,y=e.isNewQuerySecondaryButton,I=e.pluginType,C=(0,i.useState)(!1),S=(0,a.Z)(C,2),P=S[0],T=S[1],k=(0,i.useState)(!1),E=(0,a.Z)(k,2),j=E[0],w=E[1],Z=(0,r.I0)(),D=(0,r.v9)(f.zj),A=(0,r.v9)(f.RB),N=(0,r.v9)(m.Ym),F=[A.find((function(e){return e.pageId===D}))].concat((0,o.Z)(A.filter((function(e){return e.pageId!==D})))),R=(0,r.v9)(g.xS),O=(0,i.useCallback)((function(t){!function(e,n,t){var i,r;return n===s.zV.API&&(!t||!(null!==t&&void 0!==t&&null!==(i=t.datasourceStorages[e])&&void 0!==i&&null!==(r=i.datasourceConfiguration)&&void 0!==r&&r.url))}(N,I,n)?D&&(T(!0),n&&Z((0,v.xL)(t,e.eventFrom,null===n||void 0===n?void 0:n.id,R))):l.A.show((0,h.G$W)(),{kind:"error"})}),[Z,D,n,I,R]),_=(0,i.useCallback)((function(e){t||b||(e?1!==A.length?w(!0):O(D):w(!1))}),[A,O,t,b]);return(0,x.jsxs)(d.v2,{onOpenChange:_,open:j,children:[(0,x.jsx)(d.bF,{disabled:t,children:(0,x.jsx)(c.z,{className:"t--create-query",id:"create-query",isDisabled:!!t,isLoading:P||b,kind:y?"secondary":"primary",onClick:function(){return _(!0)},size:"md",startIcon:"plus",children:function(){switch(I){case s.zV.DB:case s.zV.SAAS:return(0,h.tnH)(h.JsN);case s.zV.AI:return(0,h.tnH)(h.Lvb);default:return(0,h.tnH)(h.ne_)}}()})}),(0,x.jsxs)(d.Dv,{align:"end","data-testId":"t--page-selection",height:A.length<=4?"fit-content":"186px",side:"bottom",children:[(0,x.jsx)(u.x,{className:"pl-2",kind:"heading-xs",children:"Create ".concat(I===s.zV.DB||I===s.zV.SAAS?"query":"API"," in")}),F.map((function(e,n){return e?[(0,x.jsx)(d.sN,{onSelect:function(){return O(e.pageId)},startIcon:e.isDefault?"home-3-line":"page-line",title:e.pageName,children:(0,x.jsxs)("div",{className:"flex justify-between gap-2 flex-1",children:[(0,x.jsx)(u.x,{className:"text-ellipsis whitespace-nowrap overflow-hidden",kind:"action-m",children:e.pageName}),0===n?(0,x.jsx)(p.V,{isClosable:!1,children:"Current"}):null]})},e.pageId),0===n?(0,x.jsx)(d.Cl,{}):null]:null}))]})]})},y=t(94506),I=t(77271),C=t(53454),S=t(26444),P=t(56870),T=t(81179),k=t(83979),E=t(86335),j=t(13298),w=t(35045),Z=function(e,n){var t=n.datasource,i=n.isPluginAuthorized,o=n.pluginType,a=n.showReconnectButton,s=void 0!==a&&a,l=(0,r.v9)(f.zj),d=(0,E.y)(k.Yx.license_gac_enabled),u=(0,r.v9)((function(e){var n,t;return null!==(n=null===(t=(0,f.kc)(e))||void 0===t?void 0:t.userPermissions)&&void 0!==n?n:[]})),p=(0,r.v9)((function(e){return(0,f.SE)(e)})),v=(0,P.J)(t),m=(0,r.v9)((function(e){return(0,g.s3)(e,(null===t||void 0===t?void 0:t.pluginId)||"")})),j=!!m&&(0,w.Id)(t,m);if(e===y.sg.APPLICATION){var Z,D=(0,T.b7)({isEnabled:d,dsPermissions:null!==(Z=null===t||void 0===t?void 0:t.userPermissions)&&void 0!==Z?Z:[],pagePermissions:p}),A=(0,T.K2)(d,u),N=D&&A;return{newActionButton:(0,x.jsx)(b,{datasource:t,disabled:!D||!i,eventFrom:"datasource-pane",isNewQuerySecondaryButton:!!j,pluginType:o}),generatePageButton:v&&!s?(0,x.jsx)(c.z,{className:"t--generate-template",isDisabled:!N,kind:"secondary",onClick:function(e){e.stopPropagation(),e.preventDefault(),v&&(I.ZP.logEvent("DATASOURCE_CARD_GEN_CRUD_PAGE_ACTION"),C.C.push((0,S.Id)({pageId:l,params:{datasourceId:t.id,new_page:!0}})))},size:"md",children:(0,h.tnH)(h.oQz)}):null}}return{}},D=function(e){return{editorId:(0,r.v9)(f.aS)||"",parentEntityId:(0,r.v9)(f.zj)||"",parentEntityType:j.mW.PAGE}}},23459:function(e,n,t){var i,r,o=t(30168),a=(t(50390),t(62608)),s=t(54138),l=t(62559),d=a.ZP.div(i||(i=(0,o.Z)(["\n  font-weight: 500;\n  font-size: 16px;\n  line-height: 24px;\n  letter-spacing: -0.17px;\n  color: var(--ads-v2-color-fg);\n  display: flex;\n  .cs-icon {\n    margin-left: ","px;\n  }\n"])),(function(e){return e.theme.spaces[2]})),c=a.ZP.div(r||(r=(0,o.Z)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n  width: 270px;\n  cursor: pointer;\n  margin-bottom: 5px;\n  margin-top: 24px;\n"])));n.Z=function(e){var n=e.children,t=e.headerIcon,i=e.showSectionHeader,r=void 0===i||i,o=e.title;return(0,l.jsxs)("section",{"data-location-id":"section-".concat(o),"data-testid":"section-".concat(o),children:[r&&(0,l.jsx)(c,{className:"t--collapse-section-container",children:(0,l.jsxs)(d,{children:[o,t&&(0,l.jsx)(s.J,{name:t.name,size:"md"})]})}),n]})}},53537:function(e,n,t){t.d(n,{l:function(){return Z}});var i,r=t(15671),o=t(43144),a=t(82963),s=t(78814),l=t(61120),d=t(60136),c=t(30168),u=t(2251),p=t.n(u),h=t(85686),v=t.n(h),f=(t(50390),t(95765)),m=t(62608),g=t(65570),x=t(13102),b=t(43744),y=t(93782),I=t(4482),C=t(30942),S=t(69523),P=t(9137),T=t(46262),k=t(8597),E=t(45906),j=t(62559);var w=(0,y.x)().cloudHosting,Z=m.ZP.form(i||(i=(0,c.Z)(["\n  display: flex;\n  flex-direction: column;\n  ","\n  padding-bottom: var(--ads-v2-spaces-6);\n  overflow-y: auto;\n  margin-left: ",";\n"])),(function(e){return!e.viewMode&&"height: 100%"}),(function(e){return e.viewMode?"0px":"24px"})),D=function(e){function n(){var e,t,i,o;(0,r.Z)(this,n);for(var d=arguments.length,c=new Array(d),u=0;u<d;u++)c[u]=arguments[u];return t=this,i=n,o=[].concat(c),i=(0,l.Z)(i),(e=(0,a.Z)(t,(0,s.Z)()?Reflect.construct(i,o||[],(0,l.Z)(t).constructor):i.apply(t,o))).openDocumentation=function(){var n=E.ZP.getState().entities.plugins.list.find((function(n){var t;return n.id===(null===(t=e.props.datasource)||void 0===t?void 0:t.pluginId)}));n?(0,T.f)(T.c.WHITELIST_IP,null===n||void 0===n?void 0:n.documentationLink,null===n||void 0===n?void 0:n.name):(0,T.f)(T.c.WHITELIST_IP)},e.renderDataSourceConfigForm=function(n){var t=e.props,i=t.datasourceId,r=t.hiddenHeader,o=t.messages,a=t.pluginType,s=t.viewMode;return(0,j.jsxs)(Z,{onSubmit:function(e){e.preventDefault()},viewMode:s,children:[o&&o.map((function(e,n){return(0,j.jsx)(k.U,{className:"mt-4",kind:"warning",children:e},n)})),!r&&w&&a===C.zV.DB&&!s&&(0,j.jsx)(k.U,{className:"mt-4 select-text",kind:"info",links:[{children:"Learn more",onClick:e.openDocumentation,endIcon:"share-box-line",to:"about:blank"}],children:"Whitelist the IP ".concat((0,I.zO)(b.Sh),"  on your database instance to connect to it. ")}),(!s||i===P.m7)&&(0,j.jsxs)(j.Fragment,{children:[v()(n)?void 0:p()(n,e.renderMainSection),""]})]})},e}return(0,d.Z)(n,e),(0,o.Z)(n,[{key:"render",value:function(){var e=this.props,n=e.formConfig,t=e.initialized,i=e.viewMode;return t||i?this.renderDataSourceConfigForm(n):null}}]),n}(S.nm);n.Z=(0,f.$j)((function(e,n){var t,i=e.entities.datasources.list.find((function(e){return e.id===n.datasourceId}));return{messages:i&&i.messages,datasource:i,datasourceName:null!==(t=null===i||void 0===i?void 0:i.name)&&void 0!==t?t:""}}))((0,x.Z)({destroyOnUnmount:!1,form:g._8,enableReinitialize:!0})(D))},2171:function(e,n,t){t.d(n,{X2:function(){return V},cm:function(){return U}});var i,r=t(29439),o=t(1413),a=t(30168),s=t(3143),l=t.n(s),d=t(50390),c=t(62608),u=t(98479),p=t(11989),h=t(95765),v=t(4482),f=t(18448),m=t(9137),g=t(62559),x=c.ZP.div(i||(i=(0,a.Z)(["\n  /* margin-left: 5px; */\n  font-size: 18px;\n  font-weight: 500;\n  line-height: 24px;\n  display: flex;\n"])));var b,y,I,C,S,P,T=function(e){var n=(0,h.v9)((function(n){return(0,p.qO)(n,e.datasourceId)})),t=(0,h.v9)(p.ft),i=(0,d.useState)(!1),a=(0,r.Z)(i,2),s=a[0],l=a[1],c=(0,h.I0)(),b=(0,h.v9)((function(e){var t=n?n.id:"";return{isSaving:e.ui.datasourceName.isSaving[t],error:e.ui.datasourceName.errors[t]}})),y=d.useCallback((function(e){var i={};return t.filter((function(e){return e.id!==(null===n||void 0===n?void 0:n.id)&&!(e.name===(null===n||void 0===n?void 0:n.name)&&["REST API","Authenticated GraphQL API"].includes(e.pluginName)&&e.pluginId===(null===n||void 0===n?void 0:n.pluginId))})).map((function(e){i[e.name]=e})),!(0,v.Pz)(e,(0,o.Z)({},i))}),[t,n]),I=d.useCallback((function(e){return e&&0!==e.trim().length?!!y(e)&&"".concat(e," is already being used or is a restricted keyword."):"Please enter a valid name"}),[y]),C=(0,d.useCallback)((function(e){var t,i,r=e||"Untitled datasource ABC";!I(e)&&n&&n.name!==e&&(n.id===m.m7?c((0,f.CT)({id:null!==(t=null===n||void 0===n?void 0:n.id)&&void 0!==t?t:"",name:r})):c((0,f.ST)({id:null!==(i=null===n||void 0===n?void 0:n.id)&&void 0!==i?i:"",name:r})))}),[c,I,n]);return(0,d.useEffect)((function(){!1===b.isSaving&&!0===b.error?l(!0):!0===b.isSaving&&l(!1)}),[b.isSaving,b.error]),(0,g.jsx)(x,{children:(0,g.jsx)(u.ZP,{className:"t--edit-datasource-name title-editable-text",defaultValue:n?n.name:"",disabled:e.disabled,editInteractionKind:u.lK.SINGLE,forceDefault:s,isEditingDefault:e.focusOnMount,isInvalid:I,maxLength:30,onTextChanged:C,placeholder:"Datasource name",type:"text",underline:!0,updating:b.isSaving})})},k=t(9010),E=t(26844),j=t(77271),w=t(83011),Z=c.ZP.div(b||(b=(0,a.Z)(["\n  display: flex;\n"]))),D=(0,c.ZP)(w.v2)(y||(y=(0,a.Z)(["\n  flex: 0;\n"]))),A=t(56626),N=t(77176),F=t(56553),R=t(49167),O=t(70971),_=t(97138),M=c.ZP.div(I||(I=(0,a.Z)(["\n  display: flex;\n  flex-direction: row-reverse;\n  gap: 16px;\n  align-items: center;\n"]))),H=c.ZP.div(C||(C=(0,a.Z)(["\n  flex-direction: row;\n  display: flex;\n  align-items: center;\n"]))),L=c.ZP.div(S||(S=(0,a.Z)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n  ","\n  padding: var(--ads-v2-spaces-5) 0 var(--ads-v2-spaces-5);\n  margin: 0 var(--ads-v2-spaces-7);\n"])),(function(e){return!e.noBottomBorder&&"border-bottom: 1px solid var(--ads-v2-color-border);"})),z=c.ZP.div(P||(P=(0,a.Z)(["\n  height: 34px;\n  width: 34px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-right: 8px;\n  flex-shrink: 0;\n  img {\n    height: 34px;\n    width: auto;\n  }\n"]))),U=function(e){return(0,g.jsx)(z,{children:(0,g.jsx)("img",(0,o.Z)({},e))})},V=function(e){var n=e.canDeleteDatasource,t=e.canManageDatasource,i=e.datasource,o=e.datasourceId,a=e.isDeleting,s=e.isNewDatasource,c=e.isPluginAuthorized,u=e.noBottomBorder,p=e.pluginImage,v=e.pluginName,x=e.pluginType,b=e.setDatasourceViewMode,y=e.viewMode,I=(0,d.useState)(!1),C=(0,r.Z)(I,2),S=C[0],P=C[1],z=(0,h.I0)(),V=(0,O.k6)(),B=(0,R.fg)(V.location.pathname),G=l()((function(){return P(!1)}),20),Y=(0,h.v9)(F.Ym),q=!N.XC.includes(x),W=!(c&&(!q||(0,N.GB)(i,Y))),K=(0,_.q)(B,{datasource:i,isPluginAuthorized:c,pluginType:x,showReconnectButton:W});return(0,g.jsxs)(L,{noBottomBorder:!!u,children:[(0,g.jsxs)(H,{children:[(0,g.jsx)(U,{alt:"Datasource",src:(0,k.V)(p)}),(0,g.jsx)(T,{datasourceId:o,disabled:!s&&!t,focusOnMount:s})]}),y&&(0,g.jsxs)(M,{children:[n&&(0,g.jsx)(Z,{className:"t--datasource-menu-option",onClick:function(e){e.stopPropagation()},children:(0,g.jsxs)(D,{onOpenChange:G,children:[(0,g.jsx)(w.bF,{children:(0,g.jsx)(A.z,{"data-testid":"t--context-menu-trigger",isIconButton:!0,kind:"tertiary",size:"md",startIcon:"context-menu"})}),(0,g.jsx)(w.Dv,{align:"end",style:{zIndex:100},width:"200px",children:[(0,g.jsx)(w.sN,{className:"t--datasource-option-delete error-menuitem",disabled:a,onSelect:function(e){e.preventDefault(),e.stopPropagation(),a||(S?a||(j.ZP.logEvent("DATASOURCE_CARD_DELETE_ACTION"),z((0,f.Vl)({id:o}))):P(!0))},startIcon:"delete-bin-line",children:a?(0,E.tnH)(E.VkA):S?(0,E.tnH)(E.fUd):(0,E.tnH)(E.mcU)},"delete-datasource-button")]})]})},o),(0,g.jsx)(A.z,{className:"t--edit-datasource",kind:"secondary",onClick:function(){b({datasourceId:o,viewMode:!1}),j.ZP.logEvent("EDIT_DATASOURCE_CLICK",{datasourceId:o,pluginName:v,entryPoint:m.bh.DATASOURCE_FORM_EDIT})},size:"md",children:(0,E.tnH)(E.dme)}),K&&K.newActionButton?K.newActionButton:null,K&&K.generatePageButton?K.generatePageButton:null]})]})}},82549:function(e,n,t){t.d(n,{pY:function(){return U},ZP:function(){return Y},BR:function(){return B}});var i=t(15671),r=t(43144),o=t(82963),a=t(78814),s=t(61120),l=t(60136),d=t(30168),c=t(85809),u=t.n(c),p=t(38342),h=t.n(p),v=t(2251),f=t.n(v),m=t(50390),g=t(62608),x=t(25786),b=t(5886),y=t.n(b),I=t(92397),C=t(95765),S=t(11989),P=t(77176),T=t(27665);function k(e){return B(e.config,e.currentEnv,e.datasource,e.viewMode)}var E,j,w,Z,D,A=t(56553),N=t(41815),F=t(13418),R=t(31205),O=t(90768),_=t(62559);var M=g.ZP.div(E||(E=(0,d.Z)(["\n  color: var(--ads-v2-color-fg-muted);\n  font-size: 14px;\n  display: inline-block;\n"]))),H=g.ZP.div(j||(j=(0,d.Z)(["\n  font-size: 14px;\n  font-weight: 500;\n  color: var(--ads-v2-color-fg);\n  display: inline-block;\n  margin-left: 5px;\n"]))),L=g.ZP.div(w||(w=(0,d.Z)(["\n  display: inline-block;\n  &:not(:first-child) {\n    margin-left: 10px;\n  }\n"]))),z=g.ZP.div(Z||(Z=(0,d.Z)(["\n  &:first-child {\n    margin-top: 9px;\n  }\n"]))),U=g.ZP.div(D||(D=(0,d.Z)(["\n  display: flex;\n  flex-direction: column;\n  border-bottom: 1px solid var(--ads-v2-color-border);\n  padding: var(--ads-v2-spaces-7) 0;\n  gap: var(--ads-v2-spaces-4);\n  overflow: auto;\n  height: 100%;\n  width: 100%;\n  flex-shrink: 0;\n"]))),V=function(e,n,t){try{var i="datasourceStorages.".concat(n,".")+e[0].configProperty||0,r=i.split("[*]."),o=h()(t,r[0],null);return e.reduce((function(e,n){var t=n.configProperty,i=n.label,r=t.split("[*].")[1];return o.forEach((function(n,t){e[t]||(e[t]=[]),e[t].push({key:r,label:i,value:n[r]})})),e}),[]).map((function(e,n){return(0,_.jsx)(z,{children:e.map((function(e){var t=e.key,r=e.label,o=e.value;return(0,_.jsxs)(L,{children:[(0,_.jsxs)(M,{children:[r,": "]}),(0,_.jsx)(H,{children:o})]},"".concat(i,".").concat(t,".").concat(n))}))},"".concat(i,".").concat(n))}))}catch(a){return}};function B(e,n,t,i){return(0,_.jsx)(m.Fragment,{children:f()(e.children,(function(e){if((0,x.xj)(t.datasourceStorages[n],e.hidden,void 0,i))return null;if("children"in e)return(0,x.dQ)(e.children)?V(e.children,n,t):B(e,n,t,i);try{var r=e.configProperty,o=e.controlType,a=e.label,s=e.subtitle,l=void 0===s?"":s,d="datasourceStorages.".concat(n,".")+r,c=t.id+"_"+a;if("FIXED_KEY_INPUT"===o)return(0,_.jsxs)(z,{children:[(0,_.jsxs)(M,{children:[r.key,": "]})," ",(0,_.jsx)(H,{children:r.value})]},c);var p=h()(t,d);if("DROP_DOWN"===o&&Array.isArray(e.options)){var v=e.options.find((function(e){return e.value===p}));v&&v.label&&(p=v.label)}if(!p&&i&&(!e.hidden||e.hidden&&"comparison"in e.hidden&&e.hidden.comparison===I.X.VIEW_MODE)&&(p=e.initialValue),"MULTIPLE_FILE_PICKER"===o){if(p&&Array.isArray(p)&&p.length>0){var f=p.length>1;return(0,_.jsxs)("div",{children:[(0,_.jsxs)(z,{children:[(0,_.jsxs)(M,{children:[a,": "]})," ",(0,_.jsxs)(H,{children:[p.length," file",f?"s":""," uploaded"]})]},c),(0,_.jsx)("div",{className:"mt-2 max-w-[50%]",children:(0,_.jsx)(O.Z,{columns:[{Header:"Name",accessor:"name"},{Header:"Size",accessor:"size",Cell:function(e){return(0,x.sS)(e.value)}}],data:p})}),e.labelVisibleWithFiles&&(0,_.jsx)("div",{className:"mt-2 max-w-[50%]",children:(0,_.jsx)(R.x,{kind:"body-s",children:e.labelVisibleWithFiles})})]})}return(0,_.jsxs)("div",{children:[(0,_.jsxs)(z,{children:[(0,_.jsxs)(M,{children:[a,": "]})," No Files Uploaded"]},c),(0,_.jsx)(R.x,{kind:"body-s",children:l})]})}if(!p||u()(p)&&p.length<1)return;return u()(p)?(0,_.jsxs)(z,{children:[(0,_.jsxs)(M,{children:[a,": "]}),p.map((function(e,n){var t=e.key,i=e.value;return(0,_.jsxs)("div",{children:[(0,_.jsxs)("div",{style:{display:"inline-block"},children:[(0,_.jsx)(M,{children:"Key: "}),(0,_.jsx)(H,{children:t})]}),(0,_.jsxs)(L,{children:[(0,_.jsx)(M,{children:"Value: "}),(0,_.jsx)(H,{children:i})]})]},"".concat(c,".").concat(n))}))]}):(0,_.jsxs)(z,{children:[(0,_.jsxs)(M,{children:[a,": "]})," ",(0,_.jsx)(H,{children:p})]},c)}catch(m){y().error(m)}}))},t.id)}var G=function(e){function n(){return(0,i.Z)(this,n),e=this,t=n,r=arguments,t=(0,s.Z)(t),(0,o.Z)(e,(0,a.Z)()?Reflect.construct(t,r||[],(0,s.Z)(e).constructor):t.apply(e,r));var e,t,r}return(0,l.Z)(n,e),(0,r.Z)(n,[{key:"render",value:function(){var e=this.props,n=e.config,t=e.currentEnv,i=e.datasource,r=e.isEnvEnabled,o=e.showOnlyCurrentEnv,a=e.viewMode,s=i.datasourceStorages;return o||!r?s?B(n,t,i,a):null:(0,_.jsx)(k,{config:n,currentEnv:t,datasource:i,viewMode:a})}}]),n}(m.Component),Y=(0,C.$j)((function(e,n){var t=n.datasource.pluginId,i=(0,S.s3)(e,t),r=null===i||void 0===i?void 0:i.type,o=!P.XC.includes(r)&&(0,N.YO)((0,F.Q)(e)),a=(0,A.Ym)(e);return{currentEnv:o?a:(0,T.DI)(),isEnvEnabled:o}}))(G)},69523:function(e,n,t){t.d(n,{nm:function(){return T}});var i,r,o=t(1413),a=t(43144),s=t(15671),l=t(82963),d=t(78814),c=t(61120),u=t(60136),p=t(30168),h=t(2251),v=t.n(h),f=t(50390),m=t(62608),g=t(84087),x=t(23459),b=t(25786),y=t(5886),I=t.n(y),C=t(62559);var S=m.ZP.div(i||(i=(0,p.Z)(["\n  display: flex;\n  position: relative;\n  height: 100%;\n  overflow: hidden;\n  flex: 1;\n  flex-direction: column;\n  width: 100%;\n"]))),P=m.ZP.div(r||(r=(0,p.Z)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n  flex-grow: 1;\n  overflow: hidden;\n  form {\n    height: 100%;\n  }\n"]))),T=function(e){function n(){var e,t,i,r;(0,s.Z)(this,n);for(var a=arguments.length,u=new Array(a),p=0;p<a;p++)u[p]=arguments[p];return t=this,i=n,r=[].concat(u),i=(0,c.Z)(i),(e=(0,l.Z)(t,(0,d.Z)()?Reflect.construct(i,r||[],(0,c.Z)(t).constructor):i.apply(t,r))).renderForm=function(e){return(0,C.jsx)(S,{className:"t--json-to-form-wrapper select-text",children:(0,C.jsx)(P,{className:"t--json-to-form-body",children:e})})},e.renderMainSection=function(n,t){var i;return e.props.formData&&e.props.formData.hasOwnProperty("datasourceStorages")&&e.props.hasOwnProperty("currentEnvironment")&&e.props.currentEnvironment&&e.props.formData.datasourceStorages.hasOwnProperty(e.props.currentEnvironment)?(0,b.xj)(e.props.formData.datasourceStorages[e.props.currentEnvironment],n.hidden,null===(i=e.props)||void 0===i?void 0:i.featureFlags,!1)?null:(0,C.jsx)(x.Z,{showSectionHeader:0!==t,title:n.sectionName,children:e.renderEachConfig(n)},n.sectionName):null},e.renderSingleConfig=function(n,t){t=t||[];var i=(0,o.Z)((0,o.Z)({},n),{},{configProperty:"datasourceStorages.".concat(e.props.currentEnvironment,".")+n.configProperty});try{return e.props.setupConfig(i),(0,C.jsx)("div",{style:{marginTop:"16px"},children:(0,C.jsx)(g.Z,{config:i,formName:e.props.formName,multipleConfig:t})},i.configProperty)}catch(r){I().error(r)}},e.renderKVArray=function(n){try{return n.forEach((function(n){return e.props.setupConfig(n)})),e.renderSingleConfig(n[n.length-1],n)}catch(r){I().error(r)}},e.renderEachConfig=function(n){return(0,C.jsx)("div",{style:(0,o.Z)({},n.sectionStyles||{}),children:v()(n.children,(function(n){var t;if((0,b.xj)(e.props.formData.datasourceStorages[e.props.currentEnvironment],n.hidden,null===(t=e.props)||void 0===t?void 0:t.featureFlags,!1))return null;if("children"in n){var i=n.children;return(0,b.dQ)(i)?e.renderKVArray(i):e.renderEachConfig(n)}return e.renderSingleConfig(n)}))},n.sectionName)},e}return(0,u.Z)(n,e),(0,a.Z)(n)}(f.Component)},41575:function(e,n,t){t(50390);var i=t(26844),r=t(32003),o=t(31205),a=t(56626),s=t(9137),l=t(83979),d=t(86335),c=t(81179),u=t(62559);n.Z=function(e){var n=e.datasourceId,t=e.datasourcePermissions,p=e.isOpen,h=e.onClose,v=e.onDiscard,f=e.onSave,m=e.saveButtonText,g=n===s.m7,x=(0,d.y)(l.Yx.license_gac_enabled),b=(0,c.nE)(x,t),y=!g&&!b;return(0,u.jsx)(r.u_,{onOpenChange:h,open:p,children:(0,u.jsxs)(r.hz,{style:{width:"600px"},children:[(0,u.jsx)(r.xB,{children:(0,i.tnH)(i.Y5Q)}),(0,u.jsx)(r.fe,{children:(0,u.jsx)(o.x,{children:(0,i.tnH)(i.rRm)})}),(0,u.jsxs)(r.mz,{children:[(0,u.jsx)(a.z,{className:"t--datasource-modal-do-not-save",kind:"secondary",onClick:v,size:"md",children:(0,i.tnH)(i.rvm)}),(0,u.jsx)(a.z,{className:"t--datasource-modal-save",isDisabled:y,onClick:f,size:"md",children:m})]})]})})}},56870:function(e,n,t){t.d(n,{J:function(){return C},o:function(){return I}});var i=t(1413),r=t(29439),o=t(38342),a=t.n(o),s=t(18448),l=t(50390),d=t(77271),c=t(95765),u=t(86335),p=t(30942),h=t(35045),v=t(81179),f=t(44595),m=t(11989),g=t(83979),x=t(81591),b=t(49167),y=t(53454),I=function(e){var n=e.setPreviewData,t=e.setPreviewDataError,o=(0,c.I0)(),a=(0,l.useState)(!1),u=(0,r.Z)(a,2),p=u[0],h=u[1],v=(0,l.useState)(!1),f=(0,r.Z)(v,2),m=f[0],g=f[1],x=(0,l.useCallback)((function(e){var t,i,r;(h(!1),e.data&&e.data.body)&&(Array.isArray(null===(t=e.data)||void 0===t?void 0:t.body)?n(null===(i=e.data)||void 0===i?void 0:i.body):(g(!0),d.ZP.logEvent("DATA_FETCH_FAILED_POST_SCHEMA_FETCH",{error:null===(r=e.data)||void 0===r?void 0:r.pluginErrorDetails})))}),[]),b=(0,l.useCallback)((function(e){h(!1),g(!0),d.ZP.logEvent("DATA_FETCH_FAILED_POST_SCHEMA_FETCH",{error:e})}),[]);return{fetchPreviewData:(0,l.useCallback)((function(e){h(!0),g(!1),t(!1),n([]),o((0,s._M)({payload:(0,i.Z)((0,i.Z)({},e),{},{isGeneratePage:!1}),onSuccessCallback:x,onErrorCallback:b}))}),[p]),isLoading:p,failedFetchingPreviewData:m}},C=function(e){var n=a()(e,"pluginId",""),t=(0,c.v9)((function(e){return(0,m.s3)(e,n)})),i=(0,c.v9)((function(e){var n,t;return null!==(n=null===(t=(0,x.kc)(e))||void 0===t?void 0:t.userPermissions)&&void 0!==n?n:[]})),r=(0,c.v9)(x.SE),o=(null===e||void 0===e?void 0:e.userPermissions)||[],s=(0,u.y)(g.Yx.license_gac_enabled),l=(0,h.IU)(null===t||void 0===t?void 0:t.packageName),d=f.Bk.includes((null===t||void 0===t?void 0:t.name)||"")||(null===t||void 0===t?void 0:t.name)===p.p7.MONGO&&!(null===e||void 0===e||!e.isMock)||l,I=(0,c.v9)(m.JV),C=(0,b.fg)(y.C.location.pathname),S=(0,v.K2)(s,i),P=(0,v.b7)({isEnabled:s,dsPermissions:o,pagePermissions:r,editorType:C})&&S;return!d&&!!I[e.pluginId]&&P}},45944:function(e,n,t){t.d(n,{Ll:function(){return ln},ZP:function(){return un}});var i,r,o,a=t(4942),s=t(1413),l=t(15671),d=t(43144),c=t(82963),u=t(78814),p=t(61120),h=t(97326),v=t(60136),f=t(30168),m=t(31355),g=t.n(m),x=t(29190),b=t.n(x),y=t(85686),I=t.n(y),C=t(52891),S=t.n(C),P=t(90495),T=t.n(P),k=t(38342),E=t.n(k),j=t(50390),w=t(95765),Z=t(86942),D=t(95165),A=t(6790),N=t(76116),F=t(11989),R=t(18448),O=t(65570),_=t(53537),M=t(62608),H=t(43834),L=t(13102),z=t(77271),U=t(84087),V=t(44284),B=t(8597),G=t(6810),Y=t.n(G),q=t(77176),W=t(97186),K=function(e,n){var t,i,r,o,a,s,l=E()(e,"datasourceStorages.".concat(n,".datasourceConfiguration.authentication.authenticationType"),W.Gr.NONE),d=E()(e,"datasourceStorages.".concat(n,".datasourceConfiguration.connection"),{ssl:{authType:W.vx.DEFAULT,authTypeControl:!1}});d.ssl.authTypeControl||Y()(d,"ssl.authTypeControl",d.ssl.authType===W.vx.SELF_SIGNED_CERTIFICATE);var c=X(l,e,n),u="Y"===E()(e,"datasourceStorages.".concat(n,".datasourceConfiguration.properties[0].value"),"N"),p=u?E()(e,"datasourceStorages.".concat(n,".datasourceConfiguration.properties[1].value")):"";return{datasourceId:e.id,workspaceId:e.workspaceId,pluginId:e.pluginId,isValid:(0,q.FY)(e,n),url:null===(t=e.datasourceStorages[n])||void 0===t||null===(i=t.datasourceConfiguration)||void 0===i?void 0:i.url,headers:ne(null===(r=e.datasourceStorages[n])||void 0===r||null===(o=r.datasourceConfiguration)||void 0===o?void 0:o.headers),queryParameters:ne(null===(a=e.datasourceStorages[n])||void 0===a||null===(s=a.datasourceConfiguration)||void 0===s?void 0:s.queryParameters),isSendSessionEnabled:u,sessionSignatureKey:p,authType:l,authentication:c,connection:d}},J=function(e,n,t){var i,r=Q(n.authType,n.authentication),o=e.datasourceStorages;(i=o.hasOwnProperty(t)?o[t]:{environmentId:t,datasourceConfiguration:{url:""},isValid:!1,datasourceId:e.id}).hasOwnProperty("environmentId")||(i.environmentId=t);var a=n.connection;if(a){var s=a.ssl.authTypeControl;Y()(a,"ssl.authType",s?W.vx.SELF_SIGNED_CERTIFICATE:W.vx.DEFAULT)}var l={url:n.url,headers:ne(n.headers),queryParameters:ne(n.queryParameters),properties:[{key:"isSendSessionEnabled",value:n.isSendSessionEnabled?"Y":"N"},{key:"sessionSignatureKey",value:n.sessionSignatureKey}],authentication:r,connection:n.connection};return Y()(i,"datasourceConfiguration",l),Y()(o,t,i),e},Q=function(e,n){if(e===W.Gr.NONE||!n)return null;if($(e,n)||ee(e,n)){var t={authenticationType:W.Gr.OAuth2,accessTokenUrl:n.accessTokenUrl,clientId:n.clientId,headerPrefix:n.headerPrefix,scopeString:n.scopeString,clientSecret:n.clientSecret,isAuthorizationHeader:n.isAuthorizationHeader,isTokenHeader:n.isTokenHeader,audience:n.audience,resource:n.resource,sendScopeWithRefreshToken:n.sendScopeWithRefreshToken,refreshTokenClientCredentialsLocation:n.refreshTokenClientCredentialsLocation,useSelfSignedCert:n.useSelfSignedCert};if($(e,n))return(0,s.Z)((0,s.Z)({},t),{},{grantType:W.qJ.ClientCredentials,customTokenParameters:ne(n.customTokenParameters)});if(ee(e,n))return(0,s.Z)((0,s.Z)({},t),{},{grantType:W.qJ.AuthorizationCode,authorizationUrl:n.authorizationUrl,isAuthorized:!!n.isAuthorized,customAuthenticationParameters:ne(n.customAuthenticationParameters),expiresIn:n.expiresIn})}if(e===W.Gr.basic&&"username"in n)return{authenticationType:W.Gr.basic,username:n.username,password:n.password,secretExists:n.secretExists};if(e===W.Gr.apiKey&&"label"in n)return{authenticationType:W.Gr.apiKey,label:n.label,value:n.value,headerPrefix:n.headerPrefix,addTo:n.addTo};if(e===W.Gr.bearerToken&&"bearerToken"in n)return{authenticationType:W.Gr.bearerToken,bearerToken:n.bearerToken};return null},X=function(e,n,t){var i,r;if(n&&null!==(i=n.datasourceStorages[t])&&void 0!==i&&i.datasourceConfiguration&&null!==(r=n.datasourceStorages[t])&&void 0!==r&&r.datasourceConfiguration.authentication){var o=n.datasourceStorages[t].datasourceConfiguration.authentication||{};if($(e,o)||ee(e,o)){var a={authenticationType:W.Gr.OAuth2,accessTokenUrl:o.accessTokenUrl||"",clientId:o.clientId||"",headerPrefix:o.headerPrefix||"",scopeString:o.scopeString||"",clientSecret:o.clientSecret,isTokenHeader:!!o.isTokenHeader,isAuthorizationHeader:!!o.isAuthorizationHeader,audience:o.audience||"",resource:o.resource||"",sendScopeWithRefreshToken:o.sendScopeWithRefreshToken||!1,refreshTokenClientCredentialsLocation:o.refreshTokenClientCredentialsLocation||"BODY",useSelfSignedCert:o.useSelfSignedCert};if($(e,o))return(0,s.Z)((0,s.Z)({},a),{},{grantType:W.qJ.ClientCredentials,customTokenParameters:ne(o.customTokenParameters)});if(ee(e,o))return(0,s.Z)((0,s.Z)({},a),{},{grantType:W.qJ.AuthorizationCode,authorizationUrl:o.authorizationUrl||"",customAuthenticationParameters:ne(o.customAuthenticationParameters),isAuthorized:!!o.isAuthorized,isAuthorizationHeader:"undefined"===typeof o.isAuthorizationHeader||!!o.isAuthorizationHeader,expiresIn:o.expiresIn})}if(e===W.Gr.basic)return{authenticationType:W.Gr.basic,username:o.username||"",password:o.password||"",secretExists:o.secretExists};if(e===W.Gr.apiKey)return{authenticationType:W.Gr.apiKey,label:o.label||"",value:o.value||"",headerPrefix:o.headerPrefix||"",addTo:o.addTo||""};if(e===W.Gr.bearerToken)return{authenticationType:W.Gr.bearerToken,bearerToken:o.bearerToken||""}}},$=function(e,n){return e===W.Gr.OAuth2&&(!n||E()(n,"grantType")===W.qJ.ClientCredentials)},ee=function(e,n){return e===W.Gr.OAuth2&&E()(n,"grantType")===W.qJ.AuthorizationCode},ne=function(e){if(!Array.isArray(e))return[];var n=[];return e.forEach((function(e){Object.values(e).every((function(e){return""===e}))||n.push(e)})),n},te=t(26844),ie=t(23459),re=t(35754),oe=t(29439),ae=t(20409),se=t.n(ae),le=t(45987),de=t(64250),ce=t(86125),ue=t(55524),pe=t(62559),he=["hasError"],ve=["className","input","meta","refHandler","showError"];var fe=(0,M.ZP)((function(e){e.hasError;var n=(0,le.Z)(e,he);return(0,pe.jsx)(de.BZ,(0,s.Z)({},n))}))(i||(i=(0,f.Z)(["\n  flex: 1;\n  & input {\n    box-shadow: none;\n    border-radius: 0;\n    height: 36px;\n    border: 1px solid\n      ",";\n    background-color: ",";\n    padding: 8px 12px 9px;\n    color: ",";\n    &:focus {\n      border-color: ",";\n      background-color: ",";\n      outline: 0;\n      box-shadow: none;\n    }\n    &:hover {\n      background: ",";\n    }\n  }\n  &.bp3-input-group {\n    .bp3-input:not(:first-child) {\n      padding-left: 35px;\n    }\n    .bp3-icon {\n      border-radius: 4px 0 0 4px;\n      margin: 0;\n      height: 32px;\n      width: 30px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      background-color: #eef2f5;\n      svg {\n        height: 20px;\n        width: 20px;\n        path {\n          fill: #979797;\n        }\n      }\n    }\n  }\n"])),(function(e){return e.hasError?e.theme.colors.error:e.theme.colors.border}),(function(e){return e.hasError?ce.w.FAIR_PINK:"#fff"}),(function(e){return e.hasError?ce.w.DANGER_SOLID:ce.w.CODE_GRAY}),(function(e){return e.hasError?e.theme.colors.error:"var(--appsmith-input-focus-border-color)"}),(function(e){return e.theme.colors.textOnDarkBG}),(function(e){return e.hasError?"":"#FAFAFA"})),me=M.ZP.p(r||(r=(0,f.Z)(["\n  color: ",";\n  font-size: 12px;\n  margin-top: 6px;\n"])),ce.w.DANGER_SOLID),ge=M.ZP.div(o||(o=(0,f.Z)(["\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n  position: relative;\n"]))),xe=function(e){function n(e){var t,i,r,o;return(0,l.Z)(this,n),i=this,r=n,o=[e],r=(0,p.Z)(r),(t=(0,c.Z)(i,(0,u.Z)()?Reflect.construct(r,o||[],(0,p.Z)(i).constructor):r.apply(i,o))).handleFocus=function(e){t.setState({inputIsFocused:!0}),t.props.input&&t.props.input.onFocus&&t.props.input.onFocus(e)},t.handleBlur=function(e){t.setState({inputIsFocused:!1}),t.props.input&&t.props.input.onBlur&&t.props.input.onBlur(e)},t.state={inputIsFocused:!1},t}return(0,v.Z)(n,e),(0,d.Z)(n,[{key:"render",value:function(){var e=this.props,n=e.className,t=e.input,i=e.meta,r=e.refHandler,o=e.showError,a=(0,le.Z)(e,ve),l=!!(o&&i&&(i.touched||i.active)&&i.error);return(0,pe.jsxs)(ge,{className:n,children:[(0,pe.jsx)(fe,(0,s.Z)((0,s.Z)((0,s.Z)({hasError:l,inputRef:r},t),{},{autoComplete:"off",onBlur:this.handleBlur,onFocus:this.handleFocus},a),{},{className:ue.$,tabIndex:0})),l&&(0,pe.jsx)(me,{children:i?i.error:""})]})}}]),n}(j.Component);var be,ye=t(11858),Ie=M.ZP.div(be||(be=(0,f.Z)(["\n  display: flex;\n\n  div {\n    flex-basis: calc(100% - 90px);\n  }\n  input:disabled {\n    color: #555;\n  }\n  button {\n    flex-basis: 80px;\n    margin-left: 10px;\n  }\n"])));var Ce,Se=function(e){var n=e.copyText,t=(0,j.createRef)(),i=(0,j.useState)(!1),r=(0,oe.Z)(i,2),o=r[0],a=r[1];return(0,pe.jsxs)(Ie,{children:[(0,pe.jsx)(xe,{defaultValue:n,disabled:!0,fill:!0,onChange:function(){t.current&&t.current.setSelectionRange(0,n.length)}}),(0,pe.jsx)(ye.Y,{onClick:function(){var e;e=n,se()(e),a(!0),setTimeout((function(){a(!1)}),3e3)},text:o?"Copied":"Copy"})]})},Pe=t(54826),Te=t(86481),ke=t(9137),Ee=t(13418),je=t(81179),we=t(83979);var Ze,De,Ae,Ne=M.ZP.div(Ce||(Ce=(0,f.Z)(["\n  margin-top: 16px;\n  .t--save-and-authorize-datasource {\n    margin-left: 0;\n  }\n"]))),Fe=function(e){function n(e){var t,i,r,o;return(0,l.Z)(this,n),i=this,r=n,o=[e],r=(0,p.Z)(r),(t=(0,c.Z)(i,(0,u.Z)()?Reflect.construct(r,o||[],(0,p.Z)(i).constructor):r.apply(i,o))).ensureAPIKeyDefaultsAreCorrect=function(){if(t.props.formData){var e=t.props.formData.authentication;e&&E()(e,"addTo")||t.props.change("authentication.addTo",W.b4.Header),e&&E()(e,"headerPrefix")||t.props.change("authentication.headerPefix","ApiKeyAuthType.Header")}},t.ensureOAuthDefaultsAreCorrect=function(){if(t.props.formData){var e=t.props.formData.authentication;e&&E()(e,"grantType")||t.props.change("authentication.grantType",W.qJ.ClientCredentials),void 0===E()(e,"isTokenHeader")&&t.props.change("authentication.isTokenHeader",!0),t.isDirty("authentication.headerPrefix")||void 0!==E()(e,"headerPrefix")||t.props.change("authentication.headerPrefix","Bearer"),E()(e,"grantType")===W.qJ.AuthorizationCode&&void 0===E()(e,"isAuthorizationHeader")&&t.props.change("authentication.isAuthorizationHeader",!0),E()(e,"grantType")===W.qJ.ClientCredentials&&void 0===E()(e,"isAuthorizationHeader")&&t.props.change("authentication.isAuthorizationHeader",!1),E()(e,"grantType")===W.qJ.AuthorizationCode&&(void 0!==E()(e,"sendScopeWithRefreshToken")&&""!==E()(e,"sendScopeWithRefreshToken")||t.props.change("authentication.sendScopeWithRefreshToken",!1)),E()(e,"grantType")===W.qJ.AuthorizationCode&&(void 0!==E()(e,"refreshTokenClientCredentialsLocation")&&""!==E()(e,"refreshTokenClientCredentialsLocation")||t.props.change("authentication.refreshTokenClientCredentialsLocation","BODY"))}},t.validate=function(){var e=t.props,n=e.datasource,i=e.datasourceId,r=e.formData,o=e.isFeatureEnabled,a=i===ke.m7,s=(0,je.nE)(o,(null===n||void 0===n?void 0:n.userPermissions)||[]);return!r||(!r.url||!a&&!s)},t.getSanitizedFormData=function(){return J(t.props.datasource,t.props.formData,t.props.currentEnvironment)},t.save=function(e){t.props.toggleSaveActionFlag(!0);var n=t.getSanitizedFormData();if(z.ZP.logEvent("SAVE_DATA_SOURCE_CLICK",{pageId:t.props.pageId,appId:t.props.applicationId,environmentId:t.props.currentEnvironment,environmentName:t.props.currentEnvironmentName,pluginName:t.props.pluginName||"",pluginPackageName:t.props.pluginPackageName||""}),t.props.datasource.id!==ke.m7)return t.props.updateDatasource(n,t.props.currentEnvironment,e);t.props.createDatasource((0,s.Z)((0,s.Z)({},n),{},{name:t.props.datasourceName}),e)},t.urlValidator=function(e){return e?new RegExp("^(http|https)://").test(e)?{isValid:!0,message:""}:{isValid:!1,message:(0,te.tnH)(te.uuD)}:{isValid:!0,message:""}},t.render=function(){return(0,pe.jsx)(_.l,{onSubmit:function(e){e.preventDefault()},viewMode:t.props.viewMode,children:t.renderEditor()})},t.renderEditor=function(){var e=t.props,n=e.formData,i=e.messages;if(n)return(0,pe.jsxs)(pe.Fragment,{children:[i&&i.map((function(e,n){return(0,pe.jsx)(B.U,{kind:"warning",children:e},n)})),t.renderGeneralSettings(),t.renderOauth2AdvancedSettings()]})},t.renderGeneralSettings=function(){var e=t.props.formData;return(0,pe.jsxs)("section",{className:"t--section-general","data-location-id":"section-General","data-testid":"section-General",children:[(0,pe.jsx)(Ne,{"data-location-id":btoa("url"),children:t.renderInputTextControlViaFormControl({configProperty:"url",label:"URL",placeholderText:"https://example.com",dataType:"TEXT",encrypted:!1,isRequired:!0,fieldValidator:t.urlValidator})}),(0,pe.jsx)(Ne,{"data-location-id":btoa("isSendSessionEnabled"),children:t.renderCheckboxViaFormControl("isSendSessionEnabled","Send Appsmith signature header","",!1)}),e.isSendSessionEnabled&&(0,pe.jsx)(Ne,{"data-location-id":btoa("sessionSignatureKey"),children:t.renderInputTextControlViaFormControl({configProperty:"sessionSignatureKey",label:"Session details signature key",placeholderText:"",dataType:"TEXT",encrypted:!1,isRequired:!1})}),(0,pe.jsx)(Ne,{"data-location-id":btoa("ssl"),children:t.renderCheckboxViaFormControl("connection.ssl.authTypeControl","Use Self-Signed Certificate","",!1)}),t.renderSelfSignedCertificateFields(),(0,pe.jsx)(ie.Z,{title:"Headers",children:(0,pe.jsx)(Ne,{className:"t--headers-array","data-location-id":btoa("headers"),children:t.renderKeyValueControlViaFormControl("headers","","",!1)})}),(0,pe.jsx)(ie.Z,{title:"Query parameters",children:(0,pe.jsx)(Ne,{"data-location-id":btoa("queryParameters"),children:t.renderKeyValueControlViaFormControl("queryParameters","","",!1)})}),(0,pe.jsx)(ie.Z,{title:"Authentication",children:(0,pe.jsxs)(Ne,{"data-location-id":btoa("authType"),children:[t.renderDropdownControlViaFormControl("authType",[{label:"None",value:W.Gr.NONE},{label:"Basic",value:W.Gr.basic},{label:"OAuth 2.0",value:W.Gr.OAuth2},{label:"API key",value:W.Gr.apiKey},{label:"Bearer token",value:W.Gr.bearerToken}],"Authentication type","",!1,""),t.renderAuthFields()]})})]})},t.renderSelfSignedCertificateFields=function(){var e=t.props.formData.connection;if(null!==e&&void 0!==e&&e.ssl.authTypeControl)return(0,pe.jsx)("div",{style:{marginTop:"16px"},children:t.renderFilePickerControlViaFormControl("connection.ssl.certificateFile","Upload Certificate","",!1,!0)})},t.renderAuthFields=function(){var e,n=t.props.formData.authType;if(n===W.Gr.OAuth2?e=t.renderOauth2():n===W.Gr.basic?e=t.renderBasic():n===W.Gr.apiKey?e=t.renderApiKey():n===W.Gr.bearerToken&&(e=t.renderBearerToken()),e)return e},t.renderApiKey=function(){var e=t.props.formData.authentication;return(0,pe.jsxs)(pe.Fragment,{children:[(0,pe.jsx)(Ne,{"data-location-id":btoa("authentication.label"),children:t.renderInputTextControlViaFormControl({configProperty:"authentication.label",label:"Key",placeholderText:"api_key",dataType:"TEXT",encrypted:!1,isRequired:!1})}),(0,pe.jsx)(Ne,{children:t.renderInputTextControlViaFormControl({configProperty:"authentication.value",label:"Value",placeholderText:"value",dataType:"TEXT",encrypted:!0,isRequired:!1})}),(0,pe.jsx)(Ne,{children:t.renderDropdownControlViaFormControl("authentication.addTo",[{label:"Query Params",value:W.b4.QueryParams},{label:"Header",value:W.b4.Header}],"Add To","",!1,"")}),"header"==E()(e,"addTo")&&(0,pe.jsx)(Ne,{"data-location-id":btoa("authentication.headerPrefix"),children:t.renderInputTextControlViaFormControl({configProperty:"authentication.headerPrefix",label:"Header prefix",placeholderText:"eg: Bearer ",dataType:"TEXT",encrypted:!1,isRequired:!1})})]})},t.renderBearerToken=function(){return(0,pe.jsx)(Ne,{"data-location-id":btoa("authentication.bearerToken"),children:t.renderInputTextControlViaFormControl({configProperty:"authentication.bearerToken",label:"Bearer token",placeholderText:"Bearer token",dataType:"TEXT",encrypted:!0,isRequired:!1})})},t.renderBasic=function(){return(0,pe.jsxs)(pe.Fragment,{children:[(0,pe.jsx)(Ne,{"data-location-id":btoa("authentication.username"),children:t.renderInputTextControlViaFormControl({configProperty:"authentication.username",label:"Username",placeholderText:"Username",dataType:"TEXT",encrypted:!1,isRequired:!1})}),(0,pe.jsx)(Ne,{"data-location-id":btoa("authentication.password"),children:t.renderInputTextControlViaFormControl({configProperty:"authentication.password",label:"Password",placeholderText:"Password",dataType:"PASSWORD",encrypted:!0,isRequired:!1,isSecretExistsPath:"authentication.secretExists.password"})})]})},t.renderOauth2=function(){var e=t.props.formData.authentication;if(e){var n;switch(e.grantType){case W.qJ.AuthorizationCode:n=t.renderOauth2AuthorizationCode();break;case W.qJ.ClientCredentials:n=t.renderOauth2ClientCredentials()}return(0,pe.jsxs)(pe.Fragment,{children:[(0,pe.jsx)(Ne,{"data-location-id":btoa("authentication.grantType"),children:t.renderDropdownControlViaFormControl("authentication.grantType",[{label:"Client Credentials",value:W.qJ.ClientCredentials},{label:"Authorization Code",value:W.qJ.AuthorizationCode}],"Grant type","",!1,"")}),n]})}},t.renderOauth2Common=function(){var e=t.props.formData;return(0,pe.jsxs)(pe.Fragment,{children:[(0,pe.jsx)(Ne,{"data-location-id":btoa("authentication.isTokenHeader"),children:t.renderDropdownControlViaFormControl("authentication.isTokenHeader",[{label:"Request Header",value:!0},{label:"Request URL",value:!1}],"Add Access Token To","",!1,"",!!E()(e.authentication,"isTokenHeader"))}),E()(e.authentication,"isTokenHeader")&&(0,pe.jsx)(Ne,{"data-location-id":btoa("authentication.headerPrefix"),children:t.renderInputTextControlViaFormControl({configProperty:"authentication.headerPrefix",label:"Header prefix",placeholderText:"eg: Bearer ",dataType:"TEXT",encrypted:!1,isRequired:!1})}),(0,pe.jsx)(Ne,{"data-location-id":btoa("authentication.accessTokenUrl"),children:t.renderInputTextControlViaFormControl({configProperty:"authentication.accessTokenUrl",label:"Access token URL",placeholderText:"https://example.com/login/oauth/access_token",dataType:"TEXT",encrypted:!1,isRequired:!1,fieldValidator:t.urlValidator})}),(0,pe.jsx)(Ne,{"data-location-id":btoa("authentication.clientId"),children:t.renderInputTextControlViaFormControl({configProperty:"authentication.clientId",label:"Client ID",placeholderText:"Client ID",dataType:"TEXT",encrypted:!1,isRequired:!1})}),(0,pe.jsx)(Ne,{"data-location-id":btoa("authentication.clientSecret"),children:t.renderInputTextControlViaFormControl({configProperty:"authentication.clientSecret",label:"Client secret",placeholderText:"Client secret",dataType:"PASSWORD",encrypted:!0,isRequired:!1,isSecretExistsPath:"authentication.secretExists.clientSecret"})}),(0,pe.jsx)(Ne,{"data-location-id":btoa("authentication.scopeString"),children:t.renderInputTextControlViaFormControl({configProperty:"authentication.scopeString",label:"Scope(s)",placeholderText:"e.g. read, write",dataType:"TEXT",encrypted:!1,isRequired:!1})}),(0,pe.jsx)(Ne,{"data-location-id":btoa("authentication.isAuthorizationHeader"),children:t.renderDropdownControlViaFormControl("authentication.isAuthorizationHeader",[{label:"Send as Basic Auth header",value:!0},{label:"Send client credentials in body",value:!1}],"Client Authentication","",!1,"",!!E()(e.authentication,"isAuthorizationHeader"))})]})},t.renderOauth2AdvancedSettings=function(){var e=t.props.formData,n=e.authentication,i=e.authType,r=e.connection,o=E()(n,"grantType")===W.qJ.AuthorizationCode,a=i===W.Gr.OAuth2,s=E()(r,"ssl.authTypeControl");return a&&(o||s)?(0,pe.jsxs)(ie.Z,{title:"Advanced Settings",children:[o&&(0,pe.jsx)(Ne,{"data-location-id":btoa("authentication.sendScopeWithRefreshToken"),children:t.renderDropdownControlViaFormControl("authentication.sendScopeWithRefreshToken",[{label:"Yes",value:!0},{label:"No",value:!1}],"Send scope with refresh token","",!1,"",!!E()(n,"sendScopeWithRefreshToken"))}),o&&(0,pe.jsx)(Ne,{"data-location-id":btoa("authentication.refreshTokenClientCredentialsLocation"),children:t.renderDropdownControlViaFormControl("authentication.refreshTokenClientCredentialsLocation",[{label:"Body",value:"BODY"},{label:"Header",value:"HEADER"}],"Send client credentials with (on refresh token):","",!1,"")}),s&&(0,pe.jsx)(Ne,{"data-location-id":btoa("authentication.useSelfSignedCert"),children:t.renderCheckboxViaFormControl("authentication.useSelfSignedCert","Use Self-Signed Certificate for Authorization requests","",!1)})]}):null},t.renderOauth2CommonAdvanced=function(){return(0,pe.jsxs)(pe.Fragment,{children:[(0,pe.jsx)(Ne,{"data-location-id":btoa("authentication.audience"),children:t.renderInputTextControlViaFormControl({configProperty:"authentication.audience",label:"Audience",placeholderText:"https://example.com/oauth/audience",dataType:"TEXT",encrypted:!1,isRequired:!1})}),(0,pe.jsx)(Ne,{"data-location-id":btoa("authentication.resource"),children:t.renderInputTextControlViaFormControl({configProperty:"authentication.resource",label:"Resource",placeholderText:"https://example.com/oauth/resource",dataType:"TEXT",encrypted:!1,isRequired:!1})})]})},t.renderOauth2ClientCredentials=function(){return(0,pe.jsxs)(pe.Fragment,{children:[t.renderOauth2Common(),t.renderOauth2CommonAdvanced()]})},t.renderOauth2AuthorizationCode=function(){var e=t.props.formData,n=window.location.origin+"/api/v1/datasources/authorize";return(0,pe.jsxs)(pe.Fragment,{children:[t.renderOauth2Common(),(0,pe.jsx)(Ne,{"data-location-id":btoa("authentication.authorizationUrl"),children:t.renderInputTextControlViaFormControl({configProperty:"authentication.authorizationUrl",label:"Authorization URL",placeholderText:"https://example.com/login/oauth/authorize",dataType:"TEXT",encrypted:!1,isRequired:!1})}),(0,pe.jsx)(Ne,{children:(0,pe.jsxs)("div",{style:{width:"20vw"},children:[(0,pe.jsxs)(re.Z,{children:["Redirect URL",(0,pe.jsx)("br",{}),(0,pe.jsx)(V.j,{children:"Url that the oauth server should redirect to"})]}),(0,pe.jsx)(Se,{copyText:n})]})}),(0,pe.jsx)(Ne,{"data-location-id":btoa("authentication.customAuthenticationParameters"),children:t.renderKeyValueControlViaFormControl("authentication.customAuthenticationParameters","Custom Authentication Parameters","",!1)}),(0,pe.jsx)(Ne,{"data-location-id":btoa("authentication.expiresIn"),children:t.renderInputTextControlViaFormControl({configProperty:"authentication.expiresIn",label:"Authorization expires in (seconds)",placeholderText:"3600",dataType:"NUMBER",encrypted:!1,isRequired:!1})}),!E()(e.authentication,"isAuthorizationHeader",!0)&&t.renderOauth2CommonAdvanced()]})},t}return(0,v.Z)(n,e),(0,d.Z)(n,[{key:"componentDidMount",value:function(){this.props.initializeReplayEntity(this.props.datasource.id,this.props.initialValues)}},{key:"componentDidUpdate",value:function(e){if(this.props.formData){var n=this.props.formData.authType;n===W.Gr.OAuth2?this.ensureOAuthDefaultsAreCorrect():n===W.Gr.apiKey&&this.ensureAPIKeyDefaultsAreCorrect(),e.triggerSave!==this.props.triggerSave&&this.props.triggerSave&&this.save()}}},{key:"isDirty",value:function(e){var n=this.props.formMeta;return E()(n,e+".visited",!1)}},{key:"renderInputTextControlViaFormControl",value:function(e){var n=e.configProperty,t=e.dataType,i=e.encrypted,r=e.fieldValidator,o=e.isRequired,a=e.isSecretExistsPath,s=e.label,l=e.placeholderText;return(0,pe.jsx)(U.Z,{config:{id:"",isValid:!1,isRequired:o,controlType:"INPUT_TEXT",dataType:t,configProperty:n,encrypted:i,label:s,conditionals:{},placeholderText:l,formName:this.props.formName,validator:r,isSecretExistsPath:a},formName:this.props.formName,multipleConfig:[]})}},{key:"renderDropdownControlViaFormControl",value:function(e,n,t,i,r,o,a){var s={id:"",isValid:!1,isRequired:r,controlType:"DROP_DOWN",configProperty:e,options:n,subtitle:o,label:t,conditionals:{},placeholderText:i,formName:this.props.formName,initialValue:a};return(0,pe.jsx)(U.Z,{config:s,formName:this.props.formName,multipleConfig:[]})}},{key:"renderKeyValueControlViaFormControl",value:function(e,n,t,i){var r={id:"",configProperty:e,isValid:!1,controlType:"KEYVALUE_ARRAY",placeholderText:t,label:n,conditionals:{},formName:this.props.formName,isRequired:i};return(0,pe.jsx)(U.Z,{config:r,formName:this.props.formName,multipleConfig:[]})}},{key:"renderFilePickerControlViaFormControl",value:function(e,n,t,i,r){var o={id:"",configProperty:e,isValid:!1,controlType:"FILE_PICKER",placeholderText:t,encrypted:r,label:n,conditionals:{},formName:this.props.formName,isRequired:i};return(0,pe.jsx)(U.Z,{config:o,formName:this.props.formName,multipleConfig:[]})}},{key:"renderCheckboxViaFormControl",value:function(e,n,t,i){return(0,pe.jsx)(U.Z,{config:{id:"",isValid:!1,isRequired:i,controlType:"CHECKBOX",configProperty:e,label:n,conditionals:{},placeholderText:t,formName:this.props.formName},formName:this.props.formName})}}]),n}(j.Component),Re=(0,w.$j)((function(e,n){var t,i=n.currentEnvironment,r=n.datasource,o=n.formName,a=r&&r.messages,s=(0,Ee.N)(e,we.Yx.license_gac_enabled);return{initialValues:K(r,i),formMeta:(0,H.Z)(o)(e),messages:a,datasourceName:null!==(t=null===r||void 0===r?void 0:r.name)&&void 0!==t?t:"",isFeatureEnabled:s}}),(function(e){return{initializeReplayEntity:function(n,t){return e((0,Pe.n6)(n,t,Te.lU.DATASOURCE))},updateDatasource:function(n,t,i){return e((0,R.Y_)(n,t,i))},createDatasource:function(n,t){return e((0,R.nS)(n,t))},toggleSaveActionFlag:function(n){return e((0,R.Tv)(n))}}}))((0,L.Z)({form:O.b6,enableReinitialize:!0})(Fe)),Oe=t(22074),_e=t(72352),Me=t(14822),He=t(91023),Le=t(81591),ze=t(26444),Ue=t(48713),Ve=t(20327),Be=t(41575),Ge=t(18581),Ye=t(35045),qe=t(42971),We=t(18848),Ke=t(46718),Je=t(25786),Qe=t(2171),Xe=t(30942),$e=t(46377),en=t(27665),nn=t(24264),tn=t(56553),rn=t(41815),on=t(79922),an=t(82549);var sn=M.ZP.div(Ze||(Ze=(0,f.Z)(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  overflow: hidden;\n  flex: 1;\n"]))),ln=M.ZP.div(De||(De=(0,f.Z)(["\n  height: calc(100vh - ",");\n  overflow: hidden;\n  display: flex;\n  flex-direction: row;\n\n  &.onboarding-flow {\n    height: 100%;\n  }\n"])),(function(e){return e.theme.headerHeight})),dn=M.ZP.div(Ae||(Ae=(0,f.Z)(["\n  width: 30vw;\n  margin-top: 24px;\n  margin-left: ",";\n"])),(function(e){return e.viewMode?"0px":"24px"})),cn=function(e){function n(e){var t,i,r,o;return(0,l.Z)(this,n),i=this,r=n,o=[e],r=(0,p.Z)(r),(t=(0,c.Z)(i,(0,u.Z)()?Reflect.construct(r,o||[],(0,p.Z)(i).constructor):r.apply(i,o))).getEnvironmentId=function(){return t.props.isInsideReconnectModal&&0===t.state.filterParams.id.length&&t.props.datasource?Object.keys(t.props.datasource.datasourceStorages)[0]:t.state.filterParams.id},t.setupConfig=function(e){var n=e.configProperty,i=e.controlType,r=e.isRequired,o=t.state.configDetails,a=t.state.requiredFields;if(n&&n.includes(t.getEnvironmentId()))if(o[n]=i,r&&(a[n]=e),t.hasRequiredFieldsChanged()){var l=(0,s.Z)({},o),d=(0,s.Z)({},a);Object.keys(a).forEach((function(e){var n,i=a[e];e&&t.props.formData&&t.props.pluginDatasourceForm!==Me.oY.RestAPIDatasourceForm&&(0,Je.xj)(t.props.formData.datasourceStorages[t.getEnvironmentId()],i.hidden,null===(n=t.props)||void 0===n?void 0:n.featureFlags,!1)&&(delete l[e],delete d[e])})),t.setState({configDetails:l,requiredFields:d})}else t.setState({configDetails:o,requiredFields:a})},t.hasRequiredFieldsChanged=function(){return Object.keys(t.state.requiredFields).some((function(e){var n,i=t.state.requiredFields[e];return!!(e&&t.props.formData&&t.props.pluginDatasourceForm!==Me.oY.RestAPIDatasourceForm&&(0,Je.xj)(t.props.formData.datasourceStorages[t.getEnvironmentId()],i.hidden,null===(n=t.props)||void 0===n?void 0:n.featureFlags,!1))}))},t.updateFilter=function(e,n,i){if(e.length>0){if(t.props.viewMode||t.props.setCurrentEditingEnvironmentID(e),t.state.filterParams.id!==e)return!T()(t.props.formData)&&t.props.isFormDirty&&t.state.filterParams.id.length>0?(t.setState({showDialog:!0,switchFilterBlocked:!0,navigation:function(){t.updateFilterSuccess(e,n,i)}}),!1):(t.props.resetForm(t.props.formName),t.updateFilterSuccess(e,n,i));if(!(0,q.aC)(t.props.formData,e))return t.updateFilterSuccess(e,n,i)}return!0},t.updateFilterSuccess=function(e,n,i){var r=t.props.datasource.datasourceStorages,o=Object.keys(r).reduce((function(e,n){return(r[n].hasOwnProperty("id")||r[n].hasOwnProperty("datasourceId"))&&(e[n]=r[n]),e}),{}),l=g()((0,Je.AI)(t.props.formConfig),{properties:[]});if(o.hasOwnProperty(e))o[e].hasOwnProperty("datasourceConfiguration")||t.props.reinitializeForm(t.props.formName,(0,s.Z)((0,s.Z)({},t.props.formData),{},{datasourceStorages:(0,s.Z)((0,s.Z)({},o),{},(0,a.Z)({},e,(0,s.Z)((0,s.Z)({},o[e]),{},{datasourceConfiguration:l.datasourceConfiguration})))}));else{var d={datasourceId:t.props.datasourceId,environmentId:e,isValid:!1,datasourceConfiguration:l.datasourceConfiguration,toastMessage:Oe.NN.EMPTY_TOAST_MESSAGE};t.props.reinitializeForm(t.props.formName,(0,s.Z)((0,s.Z)({},t.props.formData),{},{datasourceStorages:(0,s.Z)((0,s.Z)({},o),{},(0,a.Z)({},e,d))}))}return z.ZP.logEvent("SWITCH_ENVIRONMENT",{fromEnvId:t.state.filterParams.id,toEnvId:e,fromEnvName:t.state.filterParams.name,toEnvName:n,mode:"CONFIGURATION"}),t.setState({filterParams:{id:e,name:n,userPermissions:i},configDetails:{},requiredFields:{}}),t.blockRoutes(),!0},t.shouldRenderRestAPIForm=function(){var e=t.props,n=e.isInsideReconnectModal,i=e.pluginDatasourceForm,r=e.viewMode&&!n;return i===Me.oY.RestAPIDatasourceForm&&!r},t.getSanitizedData=function(){var e;return t.props.pluginDatasourceForm===Me.oY.RestAPIDatasourceForm?J(t.props.datasource,t.props.formData,t.state.filterParams.id):(0,Je.gQ)((0,s.Z)((0,s.Z)({},(0,Je.c1)((0,s.Z)({},t.props.formData),t.state.configDetails)),{},{name:(null===(e=t.props.datasource)||void 0===e?void 0:e.name)||""}))},t.renderViewConfigChild=function(){var e=t.props,n=e.datasource,i=e.formConfig,r=e.viewMode;return(0,pe.jsx)(an.pY,{"data-testid":"t--ds-review-section",children:I()(i)||I()(n)?void 0:(0,pe.jsx)(an.ZP,{config:i[0],datasource:n,viewMode:r})})},t.shouldShowTabs=function(){return t.props.isPluginAllowedToPreviewData},t.renderTabsForViewMode=function(){var e=t.props.datasource;return t.shouldShowTabs()?(0,pe.jsx)(on.Z,{configChild:t.renderViewConfigChild(),datasource:e}):t.renderViewConfigChild()},t.state={showDialog:!1,routesBlocked:!1,switchFilterBlocked:!1,readUrlParams:!1,requiredFields:{},configDetails:{},filterParams:{id:en.K3,name:"",userPermissions:[]},unblock:function(){},navigation:function(){}},t.closeDialog=t.closeDialog.bind((0,h.Z)(t)),t.onSave=t.onSave.bind((0,h.Z)(t)),t.onDiscard=t.onDiscard.bind((0,h.Z)(t)),t}return(0,v.Z)(n,e),(0,d.Z)(n,[{key:"componentDidUpdate",value:function(e){this.props.pluginDatasourceForm!==Me.oY.RestAPIDatasourceForm&&this.props.datasourceId&&this.props.datasourceId!==e.datasourceId&&this.props.switchDatasource(this.props.datasourceId),e.viewMode!==this.props.viewMode&&!this.props.viewMode&&this.props.pluginId&&this.blockRoutes(),this.props.isDatasourceBeingSaved&&this.closeDialogAndUnblockRoutes(),this.setViewModeFromQueryParams(),S()(this.props.defaultKeyValueArrayConfig,e.defaultKeyValueArrayConfig)||this.props.initializeFormWithDefaults(this.props.pluginType),this.props.datasourceId!==e.datasourceId&&this.setState({requiredFields:{},configDetails:{}})}},{key:"componentDidMount",value:function(){var e,n,t,i=new URL(window.location.href),r=null===i||void 0===i?void 0:i.searchParams.get("pluginId");if(this.props.datasource||(null===(e=this.props)||void 0===e||null===(n=e.match)||void 0===n||null===(t=n.params)||void 0===t?void 0:t.datasourceId)!==ke.m7||this.props.createTempDatasource({pluginId:r}),!this.props.viewMode&&this.props.pluginId&&this.blockRoutes(),this.props.pluginDatasourceForm===Me.oY.RestAPIDatasourceForm&&this.setViewModeFromQueryParams(),this.props.datasourceId&&this.props.pluginDatasourceForm!==Me.oY.RestAPIDatasourceForm&&this.props.switchDatasource(this.props.datasourceId),this.props.pluginDatasourceForm===Me.oY.RestAPIDatasourceForm&&this.props.location){var o=new URLSearchParams(this.props.location.search),a=o.get("response_status"),s=o.get("display_message");if(a){var l=te.GkW;"success"===a?l=te.B5v:"appsmith_error"===a&&(l=te.uuC),Ge.A.show(s||(0,te.tnH)(l))}}}},{key:"setViewModeFromQueryParams",value:function(){var e=this,n=(0,Ve.vl)();this.props.viewMode&&("false"===n.viewMode&&!this.state.readUrlParams||this.props.isNewDatasource)&&this.setState({readUrlParams:!0},(function(){e.props.setDatasourceViewModeFlag(!1)}))}},{key:"componentWillUnmount",value:function(){this.props.discardTempDatasource(),this.props.deleteTempDSFromDraft(),this.state.unblock&&this.state.unblock(),this.props.resetDefaultKeyValPairFlag()}},{key:"routesBlockFormChangeCallback",value:function(){this.props.isFormDirty?this.state.routesBlocked||this.blockRoutes():this.state.routesBlocked&&this.closeDialogAndUnblockRoutes(!0)}},{key:"blockRoutes",value:function(){var e,n,t=this;this.setState({unblock:null===(e=this.props)||void 0===e||null===(n=e.history)||void 0===n?void 0:n.block((function(e){if(e.pathname+e.search!==t.props.history.location.pathname+t.props.history.location.search&&t.props.isFormDirty)return t.setState({navigation:function(){return t.props.history.push(e.pathname+e.search,e.state)},showDialog:!0,routesBlocked:!0},t.routesBlockFormChangeCallback.bind(t)),!1}))})}},{key:"onCancel",value:function(){this.props.isFormDirty?this.setState({showDialog:!0}):this.props.setDatasourceViewMode({datasourceId:this.props.datasourceId,viewMode:!0})}},{key:"closeDialog",value:function(){this.setState({showDialog:!1,switchFilterBlocked:!1})}},{key:"onSave",value:function(){this.props.toggleSaveActionFromPopupFlag(!0)}},{key:"onDiscard",value:function(){var e,n;(this.props.resetForm(this.props.formName),this.closeDialogAndUnblockRoutes(),this.state.switchFilterBlocked)?this.setState({switchFilterBlocked:!1}):(this.props.discardTempDatasource(),this.props.deleteTempDSFromDraft(),this.props.datasourceDiscardAction(null===(n=this.props)||void 0===n?void 0:n.pluginId));this.state.navigation(),this.props.datasourceDiscardAction(null===(e=this.props)||void 0===e?void 0:e.pluginId),this.props.viewMode||this.state.switchFilterBlocked||this.props.setDatasourceViewMode({datasourceId:this.props.datasourceId,viewMode:!0}),this.props.isFormDirty&&this.props.resetForm(this.props.formName)}},{key:"closeDialogAndUnblockRoutes",value:function(e){this.closeDialog(),this.state.unblock&&this.state.unblock(),this.props.toggleSaveActionFlag(!1),this.props.toggleSaveActionFromPopupFlag(!1),this.setState({routesBlocked:!1}),e&&this.state.navigation()}},{key:"datasourceDeleteTrigger",value:function(){this.state.unblock&&this.state.unblock()}},{key:"resetDefaultKeyValPairFlag",value:function(){this.props.defaultKeyValueArrayConfig.length>0&&this.props.initialValue&&this.props.resetDefaultKeyValPairFlag()}},{key:"renderSaveDisacardModal",value:function(){var e;return(0,pe.jsx)(Be.Z,{datasourceId:this.props.datasourceId,datasourcePermissions:(null===(e=this.props.datasource)||void 0===e?void 0:e.userPermissions)||[],isOpen:this.state.showDialog,onClose:this.closeDialog,onDiscard:this.onDiscard,onSave:this.onSave,saveButtonText:(0,te.tnH)(te.IP_)})}},{key:"decodeToastMessage",value:function(e,n,t){switch(e){case Oe.NN.TEST_DATASOURCE_ERROR:return{message:(0,te.tnH)(te.iXP),kind:"error"};case Oe.NN.TEST_DATASOURCE_SUCCESS:return{message:(0,te.tnH)(te.MXJ,n,t),kind:"success"};default:return{message:"",kind:""}}}},{key:"renderToast",value:function(){var e=this,n=this.props,t=n.datasource,i=n.viewMode,r=this.getEnvironmentId()||"",o="datasourceStorages.".concat(r,".toastMessage"),a=this.decodeToastMessage(E()(t,o),t.name,this.state.filterParams.name);return a.message?(0,pe.jsx)(dn,{viewMode:i,children:(0,pe.jsx)(B.U,{isClosable:!0,kind:a.kind,onClose:function(){e.props.setDatasourceViewMode({datasourceId:e.props.datasourceId,viewMode:!1})},children:a.message})}):null}},{key:"renderForm",value:function(){var e=this.props,n=e.datasource,t=e.datasourceId,i=e.featureFlags,r=e.formConfig,o=e.formData,a=e.formName,s=e.isFormDirty,l=e.isInsideReconnectModal,d=e.isSaving,c=e.location,u=e.pageId,p=e.pluginName,h=e.pluginPackageName,v=e.pluginType,f=e.viewMode;return this.shouldRenderRestAPIForm()?(0,pe.jsxs)(pe.Fragment,{children:[(0,pe.jsx)(Re,{applicationId:this.props.applicationId,currentEnvironment:this.state.filterParams.id,currentEnvironmentName:this.state.filterParams.name,datasource:n,datasourceId:t,formData:o,formName:a,hiddenHeader:l,isFormDirty:s,isSaving:d,location:c,pageId:u,pluginName:p,pluginPackageName:h}),this.renderSaveDisacardModal()]}):(0,pe.jsxs)(pe.Fragment,{children:[(0,pe.jsx)(_.Z,{applicationId:this.props.applicationId,currentEnvironment:this.getEnvironmentId(),datasourceId:t,featureFlags:i,formConfig:r,formData:o,formName:O._8,hiddenHeader:l,isPluginAllowedToPreviewData:this.props.isPluginAllowedToPreviewData,isSaving:d,pageId:u,pluginType:v,setupConfig:this.setupConfig,viewMode:f&&!l}),this.renderSaveDisacardModal()]})}},{key:"render",value:function(){var e=this,n=this.props,t=n.canDeleteDatasource,i=n.canManageDatasource,r=n.datasource,o=n.datasourceButtonConfiguration,a=n.datasourceId,s=n.formData,l=n.history,d=n.isDeleting,c=n.isInsideReconnectModal,u=n.isNewDatasource,p=n.isOnboardingFlow,h=n.isPluginAuthorized,v=n.isSaving,f=n.isTesting,m=n.pageId,g=n.pluginId,x=n.pluginImage,y=n.pluginName,I=n.pluginPackageName,C=n.pluginType,S=n.setDatasourceViewMode,P=n.showDebugger,T=n.triggerSave,k=n.viewMode;if(!g&&a)return(0,pe.jsx)(_e.Z,{});if("SAAS"===C)return c?(0,pe.jsx)(He.Z,{datasourceId:a,hiddenHeader:!0,isInsideReconnectModal:c,pageId:m,pluginPackageName:I}):(l.push((0,ze.AP)({pageId:m,pluginPackageName:I,datasourceId:a})),null);var E=this.shouldShowTabs()&&k&&!c;return(0,pe.jsxs)(sn,{className:"t--json-to-form-wrapper",onSubmit:function(e){e.preventDefault()},children:[!c&&(0,pe.jsx)(Qe.X2,{canDeleteDatasource:t,canManageDatasource:i,datasource:r,datasourceId:a,isDeleting:d,isNewDatasource:u,isPluginAuthorized:h,noBottomBorder:E,pluginImage:x,pluginName:y,pluginType:C,setDatasourceViewMode:S,viewMode:k}),(0,pe.jsxs)(qe.yd,{children:[(0,pe.jsx)(qe.xq,{className:"db-form-resizer-content ".concat(E&&"db-form-resizer-content-show-tabs"),children:(0,pe.jsx)(ln,{className:p?"onboarding-flow":"",children:k&&!c?this.renderTabsForViewMode():(0,pe.jsxs)(pe.Fragment,{children:[(0,pe.jsx)($e.ZP,{filterId:this.state.filterParams.id,isInsideReconnectModal:!!c,pluginName:y,pluginType:C,updateFilter:this.updateFilter,viewMode:k}),(0,pe.jsxs)("div",{className:"db-form-content-container",children:[this.renderToast(),this.renderForm(),r&&(0,pe.jsx)(Ke.ZP,{currentEnvironment:this.getEnvironmentId(),datasource:r,datasourceButtonConfiguration:o,formData:s,formName:this.props.formName,getSanitizedFormData:b()(this.getSanitizedData),isFormDirty:this.props.isFormDirty,isInsideReconnectModal:c,isInvalid:this.validateForm(),isOnboardingFlow:p,isSaving:v,isTesting:f,onCancel:function(){return e.onCancel()},parentEntityId:m,pluginName:y,pluginPackageName:I,pluginType:C,setDatasourceViewMode:S,triggerSave:T,viewMode:k})]})]})})}),P&&(0,pe.jsx)(qe.ZP,{})]})]})}},{key:"validateForm",value:function(){var e=this.props,n=e.canManageDatasource,t=e.datasourceId,i=e.formData;if(e.pluginDatasourceForm===Me.oY.RestAPIDatasourceForm){var r=t===ke.m7;return!i||(!i.url||!r&&!n)}return(0,Je.Gu)(this.state.requiredFields,i,this.state.filterParams.id)}}]),n}(j.Component),un=(0,w.$j)((function(e,n){var t,i,r,o,a,s,l,d,c,u,p,h,v=null!==(t=n.datasourceId)&&void 0!==t?t:null===(i=n.match)||void 0===i||null===(r=i.params)||void 0===r?void 0:r.datasourceId,f=e.ui.datasourcePane,m=e.entities,g=m.datasources,x=m.plugins,b=(0,Ue.dZ)(e),y=(0,F.qO)(e,v),I=x.formConfigs,C=E()(y,"pluginId",""),S=(0,F.s3)(e,C),P=(0,Le.AJ)(e),T=P.applicationSlug,k=P.pageSlug,j="API"===(null===S||void 0===S?void 0:S.type)?O.b6:O._8,w=(0,Z.Z)(j)(e),N=f.newDatasource===ke.m7,R=null!==(o=null===S||void 0===S?void 0:S.datasourceComponent)&&void 0!==o?o:Me.oY.AutoForm,_=(0,tn.Q8)(e),M=(0,Je.PK)((0,D.Z)(j)(e),w,N,R===Me.oY.RestAPIDatasourceForm,_.editingId),H=(0,A.Z)(j)(e),L=null===f||void 0===f?void 0:f.defaultKeyValueArrayConfig,z=(null===y||void 0===y?void 0:y.userPermissions)||[],U=(0,Ee.Q)(e),V=(0,rn.fq)(U),B=(0,je.nE)(V,z),G=(0,je._g)(V,z),Y=(0,We.hq)(e),q=null!==(a=null===S||void 0===S?void 0:S.packageName)&&void 0!==a?a:"",W=q!==Xe.Fo.GOOGLE_SHEETS||S&&(0,Ye.q)(w,S,_.id),K=(0,F.Ds)(e,C),J=!!S&&(0,Ye.Id)(y,S);return{canDeleteDatasource:G,canManageDatasource:B,datasourceButtonConfiguration:K,datasourceId:v,pluginImage:(0,F.x8)(e)[C],featureFlags:U,formData:w,formName:j,isInsideReconnectModal:null!==(s=n.isInsideReconnectModal)&&void 0!==s&&s,pluginId:C,isSaving:g.loading,isDeleting:!(null===y||void 0===y||!y.isDeleting),isPluginAuthorized:!!W,isTesting:g.isTesting,formConfig:I[C]||[],isNewDatasource:N,isPluginAllowedToPreviewData:J,pageId:null!==(l=n.pageId)&&void 0!==l?l:null===(d=n.match)||void 0===d||null===(c=d.params)||void 0===c?void 0:c.pageId,viewMode:b,pluginType:null!==(u=null===S||void 0===S?void 0:S.type)&&void 0!==u?u:"",pluginName:null!==(p=null===S||void 0===S?void 0:S.name)&&void 0!==p?p:"",pluginDatasourceForm:R,pluginPackageName:q,applicationId:null!==(h=n.applicationId)&&void 0!==h?h:(0,Le.aS)(e),applicationSlug:T,pageSlug:k,isDatasourceBeingSaved:g.isDatasourceBeingSaved,triggerSave:g.isDatasourceBeingSavedFromPopup,isFormDirty:M,datasource:y,defaultKeyValueArrayConfig:L,initialValue:H,showDebugger:Y}}),(function(e,n){return{switchDatasource:function(t){e((0,R.XQ)(t,n.isInsideReconnectModal))},setDatasourceViewMode:function(n){return e((0,R.Ui)(n))},setDatasourceViewModeFlag:function(n){return e((0,R.n8)(n))},discardTempDatasource:function(){return e((0,R.iM)())},deleteTempDSFromDraft:function(){return e((0,R.c2)())},toggleSaveActionFlag:function(n){return e((0,R.Tv)(n))},toggleSaveActionFromPopupFlag:function(n){return e((0,R.V)(n))},reinitializeForm:function(n,t){return e((0,N.j2)(n,t,!1))},createTempDatasource:function(n){return e((0,R.Pd)(n))},resetForm:function(n){return e((0,N.mc)(n))},resetDefaultKeyValPairFlag:function(){return e((0,R.PH)())},initializeFormWithDefaults:function(n){return e((0,R.iR)(n))},datasourceDiscardAction:function(n){return e((0,R.mF)(n))},setCurrentEditingEnvironmentID:function(n){return e((0,nn.GH)(n))}}}))(cn)},79922:function(e,n,t){t.d(n,{Z:function(){return oe}});var i,r=t(30168),o=t(50390),a=t(43744),s=t(8557),l=t(62608),d=t(26844),c=t(95765),u=t(18448),p=t(29439),h=t(93776),v=t(11989),f=t(31205),m=t(56626),g=t(22074),x=t(35045),b=t(62559),y=l.ZP.div(i||(i=(0,r.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  width: 100%;\n  ","\n"])),(function(e){return e.paddingBottom&&"padding-bottom: var(--ads-v2-spaces-4);"}));function I(e){var n,t=(0,c.I0)(),i=(0,o.useCallback)((function(n){var i;if(null!==(i=e.datasource)&&void 0!==i&&i.id){var r;if(n.stopPropagation(),e.refetchFn)e.refetchFn();else t((0,u.ph)(null===(r=e.datasource)||void 0===r?void 0:r.id,g.RR.QUERY_EDITOR));e.onRefreshCallback&&e.onRefreshCallback()}}),[t,null===(n=e.datasource)||void 0===n?void 0:n.id]),r=(0,c.v9)((function(n){var t;return(0,v.Bl)(n,(null===(t=e.datasource)||void 0===t?void 0:t.pluginId)||"")})),a=(0,x.IU)(r);return(0,b.jsxs)(y,{className:"datasourceStructure-header",paddingBottom:!!e.paddingBottom,children:[(0,b.jsx)(f.x,{kind:"heading-xs",renderAs:"h3",children:(0,d.tnH)(a?d.qwk:d.L$_)}),(0,b.jsx)(m.z,{className:"datasourceStructure-refresh",isIconButton:!0,kind:"tertiary",onClick:function(e){return i(e)},size:"md",startIcon:"refresh"})]})}var C=t(89659),S=t(54826),P=t(70971),T=t(81591),k=t(7443),E=t(56870),j=t(92292),w=t(77271),Z=t(86335),D=t(83979),A=t(81179),N=t(73812),F=t(26150),R=t(49167),O=t(53454),_=t(26603),M=function(e){var n,t=(0,c.I0)(),i=(0,c.v9)((function(n){return(0,v.Zz)(n,e.datasource.id)})),r=(0,c.v9)((function(n){return(0,v.mS)(n,e.datasource.id)})),a=(0,c.v9)(T.SE),s=(null===(n=e.datasource)||void 0===n?void 0:n.userPermissions)||[],l=(0,c.v9)((function(e){var n,t;return null!==(n=null===(t=(0,j.kc)(e))||void 0===t?void 0:t.userPermissions)&&void 0!==n?n:[]})),f=(0,Z.y)(D.Yx.license_gac_enabled),x=(0,R.fg)(O.C.location.pathname),y=(0,A.K2)(f,l),M=(0,A.b7)({isEnabled:f,dsPermissions:s,pagePermissions:a,editorType:x}),H=(0,c.v9)(T.aS),L=(0,P.UO)().pageId,z=(0,o.useState)([]),U=(0,p.Z)(z,2),V=U[0],B=U[1],G=(0,o.useState)(!1),Y=(0,p.Z)(G,2),q=Y[0],W=Y[1],K=(0,c.v9)(v.xi),J=(0,o.useRef)(K>0?k.f.NEW:k.f.REPLACE_EMPTY),Q=(0,c.v9)(v.xS),X=(0,E.o)({setPreviewData:B,setPreviewDataError:W}),$=X.failedFetchingPreviewData,ee=X.fetchPreviewData,ne=X.isLoading,te=(0,c.v9)(_.V);(0,o.useEffect)((function(){var e;i&&i.tables&&(null===(e=i.tables)||void 0===e?void 0:e.length)>0&&t((0,u.wM)(i.tables[0].name)),(r||!i||!i.tables||i&&null!==i&&void 0!==i&&i.error)&&(B([]),W(!0),t((0,u.wM)("")))}),[i,r]),(0,o.useEffect)((function(){if(!r&&Q&&i&&i.tables){var n,t=null===(n=i.tables.find((function(e){return e.name===Q})))||void 0===n?void 0:n.templates;if(t){var o=null===t||void 0===t?void 0:t.find((function(e){return e.suggested}));o||(o=t[0]),ee({datasourceId:e.datasource.id,template:o})}}}),[Q,r]),(0,o.useEffect)((function(){V&&V.length>0&&w.ZP.logEvent("DATASOURCE_PREVIEW_DATA_SHOWN",{datasourceId:e.datasource.id,pluginId:e.datasource.pluginId})}),[V]),(0,o.useEffect)((function(){B([])}),[e.datasource.id]);var ie=!r&&!ne&&!$&&Q&&M&&y;return(0,b.jsxs)(F.Ol,{children:[(0,b.jsxs)(F.cA,{"data-testId":"datasource-schema-container",children:[(0,b.jsxs)(F.rY,{children:[e.datasource&&(0,b.jsx)(I,{datasource:e.datasource,paddingBottom:!0}),(0,b.jsx)(F.EI,{children:(0,b.jsx)(h.M,{context:g.RR.DATASOURCE_VIEW_MODE,customEditDatasourceFn:function(){e.setDatasourceViewModeFlag(!1)},datasourceId:e.datasource.id,datasourceName:e.datasource.name,datasourceStructure:i,onEntityTableClick:function(n){w.ZP.logEvent("DATASOURCE_PREVIEW_TABLE_CHANGE",{datasourceId:e.datasource.id,pluginId:e.datasource.pluginId}),t((0,u.wM)(n))},step:0,tableName:Q})})]}),(0,b.jsx)(F.sQ,{children:(0,b.jsxs)(F.y6,{children:[(ne||r)&&(0,b.jsx)(N.Z,{state:"LOADING"}),(!ne||!r)&&($||q)&&(0,b.jsx)(N.Z,{state:"FAILED"}),!ne&&!r&&!$&&!q&&(null===V||void 0===V?void 0:V.length)>0&&(0,b.jsx)(C.ZP,{data:V,shouldResize:!1}),!ne&&!r&&!$&&!q&&!(null!==V&&void 0!==V&&V.length)&&(0,b.jsx)(N.Z,{state:"NODATA"})]})})]}),ie&&(0,b.jsx)(F.qO,{children:(0,b.jsx)(m.z,{className:"t--datasource-generate-page",isLoading:te,kind:"primary",onClick:function(){var n;if(i&&null!==i&&void 0!==i&&i.tables&&(null===i||void 0===i||null===(n=i.tables)||void 0===n?void 0:n.length)>0){var r={applicationId:H||"",pageId:J.current===k.f.NEW?"":L||"",columns:[],searchColumn:"",tableName:Q,datasourceId:e.datasource.id||""};w.ZP.logEvent("DATASOURCE_GENERATE_PAGE_BUTTON_CLICKED",{datasourceId:e.datasource.id,pluginId:e.datasource.pluginId}),t((0,S.kW)(r))}},size:"md",children:(0,d.tnH)(d.eYx)},"datasource-generate-page")})]})},H=t(56553),L=t(77176),z=t(90495),U=t.n(z),V=t(8631),B=t(25434),G=t(19771),Y=t(41243),q=t(58201),W=t(86858),K=t(69348);var J,Q,X,$,ee=function(e){var n=(0,o.useState)([]),t=(0,p.Z)(n,2),i=t[0],r=t[1],a=(0,o.useState)([]),s=(0,p.Z)(a,2),l=s[0],u=s[1],h=(0,o.useState)([]),f=(0,p.Z)(h,2),g=f[0],x=f[1],y=(0,o.useState)({}),P=(0,p.Z)(y,2),k=P[0],E=P[1],M=(0,o.useState)({}),H=(0,p.Z)(M,2),L=H[0],z=H[1],J=(0,o.useState)(""),Q=(0,p.Z)(J,2),X=Q[0],$=Q[1],ee=(0,o.useState)(!1),ne=(0,p.Z)(ee,2),te=ne[0],ie=ne[1],re=(0,B.mc)({setSelectedDatasourceTableOptions:r,setSelectedDatasourceIsInvalid:ie}),oe=re.fetchAllSpreadsheets,ae=re.isFetchingSpreadsheets,se=(0,o.useRef)({}),le=(0,c.v9)(_.V),de=(0,B.qI)({setSheetOptions:u}),ce=de.failedFetchingSheetsList,ue=de.fetchSheetsList,pe=de.isFetchingSheetsList,he=(0,B.S7)({setSheetData:function(n){w.ZP.logEvent("GSHEET_PREVIEW_DATA_SHOWN",{datasourceId:e.datasourceId,pluginId:e.pluginId}),x(n.slice(0,12))}}),ve=he.failedFetchingSheetData,fe=he.fetchSheetData,me=he.isFetchingSheetData,ge=(0,c.v9)(T.aS),xe=(0,c.v9)((function(n){return(0,v.qO)(n,e.datasourceId)})),be=(0,c.I0)(),ye=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;try{var i=document.querySelector(e),r=document.querySelector(n);if(i&&r){var o=i.getBoundingClientRect(),a=r.getBoundingClientRect(),s=r.scrollTop,l=o.top-a.top+s+t;r.scrollTop=l}}catch(d){}},Ie=function(e,n,t){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];U()(n)||U()(t)||be((0,W.uS)("".concat(e,"-").concat(n,"-").concat(t),!1)),!U()(n)&&i&&be((0,W.uS)("".concat(e,"-").concat(n),!1))},Ce=function(n){Ie((null===xe||void 0===xe?void 0:xe.id)||"",k.value,L.value),u([]),z(G.tg),x(void 0),be((0,W.uS)("".concat(null===xe||void 0===xe?void 0:xe.id,"-").concat(n.value),!0)),ye("#".concat(CSS.escape("entity-".concat(null===xe||void 0===xe?void 0:xe.id,"-").concat(n.value))),".t--gsheet-structure .t--gsheet-structure-list"),E(n),ue({requestObject:{},selectedDatasourceId:e.datasourceId,selectedSpreadsheetUrl:n.value||"",pluginId:e.pluginId||""})},Se=function(n){Ie((null===xe||void 0===xe?void 0:xe.id)||"",k.value,L.value,!1),be((0,W.uS)("".concat(null===xe||void 0===xe?void 0:xe.id,"-").concat(k.value,"-").concat(n.value),!0)),ye("#".concat(CSS.escape("entity-".concat(null===xe||void 0===xe?void 0:xe.id,"-").concat(k.value,"-").concat(n.value))),".t--gsheet-structure .t--gsheet-structure-list",-30),z(n),x(void 0),fe({selectedDatasourceId:(null===xe||void 0===xe?void 0:xe.id)||"",selectedSpreadsheetUrl:k.value||"",selectedSheetName:n.value||"",pluginId:e.pluginId||""})};(0,o.useEffect)((function(){oe({selectedDatasourceId:e.datasourceId,pluginId:e.pluginId||"",requestObject:{}})}),[e.datasourceId,e.pluginId,be]),(0,o.useEffect)((function(){(null===i||void 0===i?void 0:i.length)>0&&U()(k.value)&&Ce(i[0])}),[k,i]),(0,o.useEffect)((function(){(null===l||void 0===l?void 0:l.length)>0&&U()(L.value)&&!pe&&!ae&&Se(l[0])}),[L,l,pe,ae]),(0,o.useEffect)((function(){se.current.selectedSpreadSheet=k.value,se.current.selectedSheet=L.value}),[k,L]),(0,o.useEffect)((function(){return function(){Ie((null===xe||void 0===xe?void 0:xe.id)||"",se.current.selectedSpreadSheet,se.current.selectedSheet)}}),[null===xe||void 0===xe?void 0:xe.id]);var Pe=te||ce||ve,Te=ae||pe||me,ke=(0,c.v9)(T.SE),Ee=(null===xe||void 0===xe?void 0:xe.userPermissions)||[],je=(0,c.v9)((function(e){var n,t;return null!==(n=null===(t=(0,j.kc)(e))||void 0===t?void 0:t.userPermissions)&&void 0!==n?n:[]})),we=(0,Z.y)(D.Yx.license_gac_enabled),Ze=(0,R.fg)(O.C.location.pathname),De=(0,A.K2)(we,je),Ae=(0,A.b7)({isEnabled:we,dsPermissions:Ee,pagePermissions:ke,editorType:Ze}),Ne=!Te&&!Pe&&(null===g||void 0===g?void 0:g.length)&&Ae&&De,Fe=i.filter((function(e){var n;return null===(n=(e.label||"").toLowerCase())||void 0===n?void 0:n.includes(X)}));return(0,b.jsxs)(F.Ol,{children:[(0,b.jsxs)(F.cA,{children:[(0,b.jsxs)(F.rY,{"data-testId":"datasource-schema-container",children:[xe&&(0,b.jsx)(I,{datasource:xe,paddingBottom:!0,refetchFn:function(){e.datasourceId&&e.pluginId&&(oe({selectedDatasourceId:e.datasourceId,pluginId:e.pluginId||"",requestObject:{}}),r([]),u([]),x(void 0),E((function(e){return z((function(n){return Ie((null===xe||void 0===xe?void 0:xe.id)||"",e.value,n.value),{}})),{}})))}}),(0,b.jsxs)(F.EI,{className:"t--gsheet-structure",children:[!ae&&(0,b.jsx)(F.YL,{className:"t--gsheet-search-container",children:(0,b.jsx)(V.M,{className:"datasourceStructure-search",endIcon:"close",onChange:function(n){return function(n){$(n.toLowerCase()),w.ZP.logEvent("GSHEET_SPREADSHEET_SEARCH",{datasourceId:e.datasourceId,pluginId:e.pluginId})}(n)},placeholder:(0,d.tnH)(d.rHd),size:"sm",startIcon:"search",type:"text"})}),(0,b.jsx)("div",{className:"t--gsheet-structure-list",children:ae?(0,b.jsx)(K.Z,{type:"SPREADSHEET"}):Fe.map((function(n){return(0,b.jsx)(Y.ZP,{className:"t--spreadsheet-structure",customAddButton:(t=n,(0,b.jsx)(m.z,{isIconButton:!0,kind:"tertiary",onClick:function(){return Ce(t)},startIcon:"refresh"})),entityId:"".concat(null===xe||void 0===xe?void 0:xe.id,"-").concat(n.value),icon:null,name:n.label,onToggle:function(t){var i,r;t&&(i=n.value,r=n,i&&r&&(w.ZP.logEvent("GSHEET_PREVIEW_SPREADSHEET_CHANGE",{datasourceId:e.datasourceId,pluginId:e.pluginId}),Ce(r)))},showAddButton:n.value===k.value,step:0,children:pe?(0,b.jsx)(K.Z,{type:"SHEET"}):l.length>0?l.map((function(t){return(0,b.jsx)(Y.ZP,{className:"t--sheet-structure ".concat(n.value===k.value&&t.value===L.value?"t--sheet-structure-active":""),entityId:"".concat(null===xe||void 0===xe?void 0:xe.id,"-").concat(k.value,"-").concat(t.value),icon:null,name:t.label,onToggle:function(n){var i,r;n&&(i=t.value,r=t,i&&r&&(w.ZP.logEvent("GSHEET_PREVIEW_SHEET_CHANGE",{datasourceId:e.datasourceId,pluginId:e.pluginId}),Se(r)))},step:1,children:L.value===t.value?me?(0,b.jsx)(K.Z,{type:"DATA"}):(null===g||void 0===g?void 0:g.length)>0?(0,b.jsx)(F.dS,{children:Object.keys(g[0]).map((function(e,n){return(0,b.jsx)(q.Z,{field:{name:e,type:"string"},step:2},"".concat(e).concat(n))}))}):null:(0,b.jsx)(K.Z,{type:"DATA"})},"".concat(null===xe||void 0===xe?void 0:xe.id,"-").concat(k.value,"-").concat(t.value))})):(0,b.jsx)(K.Z,{type:"SPREADSHEET"})},"".concat(null===xe||void 0===xe?void 0:xe.id,"-").concat(n.value));var t}))})]})]}),(0,b.jsx)(F.sQ,{children:(0,b.jsx)(F.y6,{children:Te?(0,b.jsx)(N.Z,{state:"LOADING"}):Pe?(0,b.jsx)(N.Z,{state:"FAILED"}):(null===g||void 0===g?void 0:g.length)>0?(0,b.jsx)(C.ZP,{data:g,shouldResize:!1}):(0,b.jsx)(N.Z,{state:"NODATA"})})})]}),Ne&&(0,b.jsx)(F.qO,{children:(0,b.jsx)(m.z,{className:"t--datasource-generate-page",isLoading:le,kind:"primary",onClick:function(){var n={applicationId:ge||"",pageId:"",columns:(null===g||void 0===g?void 0:g.length)>0?Object.keys(g[0]):[],searchColumn:"",tableName:(null===L||void 0===L?void 0:L.value)||"",datasourceId:e.datasourceId||"",pluginSpecificParams:{sheetName:(null===L||void 0===L?void 0:L.value)||"",sheetUrl:(null===k||void 0===k?void 0:k.value)||"",tableHeaderIndex:1}};w.ZP.logEvent("GSHEET_GENERATE_PAGE_BUTTON_CLICKED",{datasourceId:e.datasourceId,pluginId:e.pluginId}),be((0,S.kW)(n))},size:"md",children:(0,d.tnH)(d.eYx)},"datasource-generate-page")})]})},ne=(0,l.ZP)(s.mQ)(J||(J=(0,r.Z)(["\n  height: 100%;\n  overflow: hidden;\n  display: flex;\n  flex-direction: column;\n"]))),te=(0,l.ZP)(s.dr)(Q||(Q=(0,r.Z)(["\n  flex-shrink: 0;\n  margin-left: var(--ads-v2-spaces-7);\n"]))),ie=(0,l.ZP)(s.x4)(X||(X=(0,r.Z)(["\n  margin-top: 0;\n  overflow: hidden;\n  flex-grow: 1;\n"]))),re=(0,l.ZP)(s.x4)($||($=(0,r.Z)(["\n  margin-top: 0;\n  overflow: scroll;\n  flex-grow: 1;\n  padding: 0 var(--ads-v2-spaces-7);\n"]))),oe=function(e){var n,t=(0,c.v9)(H.Ym),i=(0,L.FY)(e.datasource,t)||!1,r=(0,c.I0)(),o=(0,c.v9)((function(n){return(0,v.s3)(n,e.datasource.pluginId)})),l=(0,x.IU)(null===o||void 0===o?void 0:o.packageName),p=!(!o||!e.datasource)&&(0,x.q)(e.datasource,o,t);return(0,b.jsxs)(ne,{defaultValue:i||p?a.xk.VIEW_DATA:a.xk.CONFIGURATIONS,children:[(0,b.jsxs)(te,{className:"t--datasource-tab-list",children:[(0,b.jsx)(s.OK,{value:a.xk.VIEW_DATA,children:(0,d.tnH)(d.eiU)}),(0,b.jsx)(s.OK,{value:a.xk.CONFIGURATIONS,children:(0,d.tnH)(d.Wdu)})]}),(0,b.jsx)(ie,{className:"t--datasource-tab-container",value:a.xk.VIEW_DATA,children:l?(0,b.jsx)(ee,{datasourceId:e.datasource.id,pluginId:null===(n=e.datasource)||void 0===n?void 0:n.pluginId}):(0,b.jsx)(M,{datasource:e.datasource,setDatasourceViewModeFlag:function(e){r((0,u.n8)(e))}})}),(0,b.jsx)(re,{className:"t--datasource-tab-container",value:a.xk.CONFIGURATIONS,children:e.configChild})]})}},92017:function(e,n,t){t.d(n,{Ue:function(){return C},f0:function(){return b}});var i,r,o,a,s=t(30168),l=t(39108),d=t.n(l),c=(t(50390),t(62608)),u=t(95765),p=t(11989),h=t(89323),v=t(73049),f=t(42957),m=t(54138),g=t(9010),x=t(62559),b=d()(),y=c.ZP.div(i||(i=(0,s.Z)(["\n  display: flex;\n  align-items: center;\n  user-select: none;\n  width: 100%;\n\n  &&& svg {\n    rect {\n      fill: ",";\n    }\n  }\n\n  ."," {\n    color: ",";\n  }\n\n  ."," {\n    margin-right: ","px;\n    svg {\n      path {\n        ",";\n      }\n    }\n  }\n"])),(function(e){return e.theme.colors.dropdownIconBg}),h.P.TEXT,(function(e){return e.disabled?"var(--ads-v2-color-fg-muted)":"var(--ads-v2-color-fg)"}),h.P.ICON,(function(e){return e.theme.spaces[5]}),(function(e){return"fill: ".concat(e.theme.colors.dropdown.icon)})),I=c.ZP.div(r||(r=(0,s.Z)(["\n  height: 16px;\n  width: auto;\n  display: flex;\n  align-items: center;\n  margin: 0px 8px 0px 0px;\n"]))),C=c.ZP.img(o||(o=(0,s.Z)(["\n  height: 16px;\n  width: 16px;\n"]))),S=c.ZP.div(a||(a=(0,s.Z)(["\n  margin: 0px 8px 0px 0px;\n  cursor: pointer;\n  height: 16px;\n"])));n.ZP=function(e){var n,t,i,r=e.dataTestid,o=e.isHighlighted,a=e.isSelectedNode,s=e.option,l=e.optionClickHandler,d=e.optionWidth,c=s.label,h=(0,u.v9)(p.x8),P=b===s.id,T=null===s||void 0===s||null===(n=s.data)||void 0===n?void 0:n.isSupportedForTemplate,k=!T&&!a&&!P,E=P?".t--connectNewDatasource-option":a?"":r;return(0,x.jsx)(f.u,{content:"Not supported for template generation",isDisabled:T||a||P,children:(0,x.jsxs)(y,{className:"t--dropdown-option ".concat(o?"highlight-option":""),"data-testid":E,disabled:k,onClick:function(){k||l&&l(s)},selected:a,width:d,children:[P?(0,x.jsx)(S,{children:(0,x.jsx)(m.J,{name:"plus",size:"md"})}):h[null===s||void 0===s||null===(t=s.data)||void 0===t?void 0:t.pluginId]?(0,x.jsx)(I,{children:(0,x.jsx)(C,{alt:"",className:"dataSourceImage",src:(0,g.V)(h[null===s||void 0===s||null===(i=s.data)||void 0===i?void 0:i.pluginId])})}):null,(0,x.jsx)(v.ZP,{type:v.yG.P1,children:c})]},s.id)})}},7443:function(e,n,t){t.d(n,{f:function(){return De},Z:function(){return Re}});var i,r,o,a,s,l,d,c,u,p=t(1413),h=t(29439),v=t(30168),f=t(50390),m=t(62608),g=t(95765),x=t(11989),b=t(18448),y=t(54826),I=t(70971),C=t(76104),S=t(53454),P=t(20327),T=t(26603),k=t(92017),E=t(31251),j=t(56626),w=t(54138),Z=t(31205),D=t(22994),A=t(42957),N=t(3143),F=t.n(N),R=t(20856),O=t(19771),_=t(69434),M=m.ZP.div(i||(i=(0,v.Z)(["\n  display: inline-block;\n  margin: 8px 0;\n  max-width: ",";\n  width: 100%;\n  &:first-child {\n    margin-top: 16px;\n  }\n"])),(function(e){return e.width})),H=m.ZP.p(r||(r=(0,v.Z)(["\n  flex: 1;\n  ",";\n  white-space: nowrap;\n  display: flex;\n  align-items: center;\n  margin-bottom: 4px;\n"])),(0,_.z8)("p1")),L=m.ZP.span(o||(o=(0,v.Z)(["\n  font-weight: 500;\n  /* margin-left: 2px; */\n"]))),z=t(73049),U=t(26844),V=t(5642),B=t(62559),G=m.ZP.div(a||(a=(0,v.Z)([""]))),Y=m.ZP.div(s||(s=(0,v.Z)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: center;\n  margin-bottom: 4px;\n"]))),q=m.ZP.span(l||(l=(0,v.Z)(["\n  ",";\n  text-align: center;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n"])),(0,_.z8)("p3")),W=m.ZP.div(d||(d=(0,v.Z)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: flex-start;\n  margin-bottom: 24px;\n  width: ",";\n  overflow: hidden;\n  flex-wrap: wrap;\n  margin-top: 2px;\n  .cs-text {\n    color: var(--ads-v2-color-fg-muted);\n  }\n"])),O.PO.WIDTH),K=m.ZP.div(c||(c=(0,v.Z)(["\n  display: flex;\n  color: var(--ads-v2-color-fg-muted);\n"]))),J=m.ZP.p(u||(u=(0,v.Z)(["\n  ",";\n  margin-right: 6px;\n"])),(0,_.z8)("p1"));var Q,X,$,ee,ne,te,ie,re,oe,ae=function(e){var n=e.generatePageAction,t=e.googleSheetPluginId,i=e.renderSubmitButton,r=e.selectedDatasource,o=e.selectedSpreadsheet,a=e.sheetColumnsHeaderProps,s=e.sheetsListProps,l=e.spreadSheetsProps,d=s.fetchSheetsList,c=s.isFetchingSheetsList,u=s.sheetsList,p=l.fetchAllSpreadsheets,v=a.columnHeaderList,m=a.errorFetchingColumnHeaderList,b=a.fetchColumnHeaderList,y=a.isFetchingColumnHeaderList,I=(0,f.useState)("1"),C=(0,h.Z)(I,2),S=C[0],P=C[1],T=(0,f.useState)(O.tg),k=(0,h.Z)(T,2),E=k[0],j=k[1],Z=(0,g.I0)(),N=(0,g.v9)((function(e){return(0,x.M2)(e,t)})),_=(0,f.useState)({}),Q=(0,h.Z)(_,2),X=Q[0],$=Q[1];(0,f.useEffect)((function(){var e;N||Z((0,R.LU)({pluginId:null===(e=r.data)||void 0===e?void 0:e.pluginId}))}),[N]),(0,f.useEffect)((function(){if(N&&N[0]){var e,n={},t=null===(e=N[0])||void 0===e?void 0:e.children;if(Array.isArray(t))for(var i=0;i<t.length;i+=2){var r=t[i],o=t[i+1];if(r&&o){var a=null===r||void 0===r?void 0:r.initialValue,s=null===o||void 0===o?void 0:o.initialValue;a&&void 0!==s&&(n[a]=s)}}$(n)}}),[N]),(0,f.useEffect)((function(){var e;r.value&&r.id&&N&&p({selectedDatasourceId:r.id,pluginId:null===r||void 0===r||null===(e=r.data)||void 0===e?void 0:e.pluginId,requestObject:X})}),[r.value,N,Z]),(0,f.useEffect)((function(){var e;r.value&&r.id&&o.value&&(j(O.tg),d({requestObject:X,selectedDatasourceId:r.id,selectedSpreadsheetUrl:o.value,pluginId:null===r||void 0===r||null===(e=r.data)||void 0===e?void 0:e.pluginId}))}),[o.value,r.id,r.value,Z,d]);var ee=(0,f.useCallback)(F()((function(e){var n;r.id&&o.value&&E.value&&b({selectedDatasourceId:r.id,selectedSpreadsheetUrl:o.value,pluginId:null===r||void 0===r||null===(n=r.data)||void 0===n?void 0:n.pluginId,sheetName:E.value,tableHeaderIndex:e,requestObject:X})}),200),[E,r,E]);return(0,B.jsxs)(B.Fragment,{children:[o.value?(0,B.jsxs)(M,{width:O.PO.WIDTH,children:[(0,B.jsxs)(H,{children:["Select sheet from\xa0",(0,B.jsx)(L,{children:o.label})]}),(0,B.jsx)(D.P,{"data-testid":"t--sheetName-dropdown",isLoading:c,onChange:function(e){return function(e,n){var t;e&&n&&(j(n),r.id&&o.value&&b({selectedDatasourceId:r.id,selectedSpreadsheetUrl:o.value,sheetName:e,tableHeaderIndex:S,pluginId:null===r||void 0===r||null===(t=r.data)||void 0===t?void 0:t.pluginId,requestObject:X}))}(e,u.find((function(n){return n.value===e})))},value:E,children:u.map((function(e){return(0,B.jsx)(D.W,{value:e.label,children:null===e||void 0===e?void 0:e.label},e.label)}))})]}):null,E.value?(0,B.jsx)(M,{width:O.PO.WIDTH,children:(0,B.jsxs)(B.Fragment,{children:[(0,B.jsxs)(Y,{children:[(0,B.jsx)(J,{children:(0,U.tnH)(U.Tuj)}),(0,B.jsx)(A.u,{content:(0,U.tnH)(U.EMV),children:(0,B.jsx)(G,{children:(0,B.jsx)(w.J,{name:"question-line",size:"md"})})})]}),(0,B.jsx)(V.I,{"data-testid":"t--tableHeaderIndex",onChange:function(e){(function(e){var n=/^\d+$/.test(e)&&Number(e)>0||""===e;return{isValid:n,message:n?"":"Only numeric value allowed"}})(e).isValid&&(P(e),ee(e))},placeholder:"Table header index",size:"md",type:"text",value:S}),(0,B.jsx)(W,{children:v.length?(0,B.jsxs)(B.Fragment,{children:[(0,B.jsxs)(z.ZP,{type:z.yG.P3,children:[(0,U.tnH)(U.BmT),":\xa0"]}),v.slice(0,3).map((function(e,n){return(0,B.jsxs)(K,{children:[(0,B.jsx)(q,{children:e.label}),v.length-1===n?null:(0,B.jsx)(q,{children:",\xa0"})]},e.id)})),v.length>3?(0,B.jsxs)(q,{children:["and +",v.length-3," more."]}):""]}):(0,B.jsx)(q,{children:(0,U.tnH)(U.T1n)})})]})}):null,E.value?i({onSubmit:function(){if(o.value){var e=[];v.forEach((function(n){var t=n.value;t&&e.push(t)}));var t={columns:e,searchColumn:"",tableName:E.value||"",pluginSpecificParams:{sheetUrl:o.value,tableHeaderIndex:S,sheetName:E.value}};n(t)}},disabled:!v.length||y||!!m,isLoading:y}):null]})},se=t(25434),le=t(77271),de=t(81591),ce=t(26444),ue=t(30942),pe=t(91331),he=t(9010),ve=t(9137),fe=t(35045),me=t(69433),ge=t.n(me),xe=t(86335),be=t(83979),ye=t(81179),Ie=m.ZP.div(Q||(Q=(0,v.Z)(["\n  margin-left: 6px;\n"]))),Ce=m.ZP.div(X||(X=(0,v.Z)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n  border: none;\n"]))),Se=m.ZP.div($||($=(0,v.Z)(["\n  display: flex;\n  flex-direction: column;\n"]))),Pe=m.ZP.div(ee||(ee=(0,v.Z)(["\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n"]))),Te=m.ZP.p(ne||(ne=(0,v.Z)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: center;\n  white-space: nowrap;\n  margin-bottom: 4px;\n"]))),ke=m.ZP.span(te||(te=(0,v.Z)(["\n  font-weight: normal;\n  font-size: 12px;\n  line-height: 16px;\n  letter-spacing: -0.221538px;\n  color: var(--ads-v2-color-fg-error);\n  margin-top: var(--ads-spaces-3);\n"]))),Ee=m.ZP.span(ie||(ie=(0,v.Z)(["\n  font-weight: normal;\n  font-size: 12px;\n  line-height: 16px;\n  letter-spacing: -0.221538px;\n  color: var(--ads-v2-color-fg-muted);\n  margin: 6px 0px 10px;\n"]))),je=m.ZP.div(re||(re=(0,v.Z)(["\n  height: 20px;\n  width: auto;\n  display: flex;\n  align-items: center;\n  margin: 0px 8px 0px 0px;\n"]))),we=m.ZP.div(oe||(oe=(0,v.Z)(["\n  display: flex;\n  align-items: center;\n  width: 100%;\n  position: relative;\n\n  .datasource-sub-text {\n    position: absolute;\n    right: 4px;\n    font-size: 12px;\n  }\n"]))),Ze="layout-5-line",De={NEW:"NEW",REPLACE_EMPTY:"REPLACE_EMPTY"};function Ae(e){var n=e.disabled,t=e.isLoading,i=e.onSubmit;return e.showSubmitButton?(0,B.jsx)("div",{children:(0,B.jsx)(j.z,{"data-testid":"t--generate-page-form-submit",isDisabled:n,isLoading:t,kind:"primary",onClick:function(){return!n&&i()},size:"md",children:"Generate page"})}):null}var Ne=function(e){return e.PLUGIN_ICON="plugin-icon",e.ADS_ICON="ads-icon",e}(Ne||{}),Fe=function(e){var n,t=e.iconType,i=e.option,r=e.pluginImages;return(0,B.jsxs)(we,{children:[(0,B.jsxs)(je,{children:[e.iconType===Ne.PLUGIN_ICON&&(0,B.jsx)(k.Ue,{alt:"",className:"dataSourceImage",src:(0,he.V)(r[null===i||void 0===i||null===(n=i.data)||void 0===n?void 0:n.pluginId])}),t===Ne.ADS_ICON&&(0,B.jsx)(w.J,{color:null===i||void 0===i?void 0:i.iconColor,name:i.icon,size:null===i||void 0===i?void 0:i.iconSize})]}),(0,B.jsxs)(Z.x,{renderAs:"p",children:[i.label," "]})]})};var Re=function(){var e,n,t=(0,g.I0)(),i=(0,I.TH)().search,r=(0,I.UO)().pageId,o=(0,g.v9)(x.x8),a=(0,g.v9)(de.aS),s=(0,g.v9)(pe.Y_),l=(0,g.v9)(x.ft),d=(0,g.v9)(T.V),c=(0,g.v9)(x.xi),u=(0,f.useRef)(c>0?De.NEW:De.REPLACE_EMPTY),v=(0,f.useState)(""),m=(0,h.Z)(v,2),N=m[0],F=m[1],R=(0,g.v9)(x.P7),_=(0,g.v9)(x.JV),z=(0,f.useState)([]),V=(0,h.Z)(z,2),G=V[0],Y=V[1],q=(0,f.useState)([]),W=(0,h.Z)(q,2),K=W[0],J=W[1],Q=(0,f.useState)(O.tg),X=(0,h.Z)(Q,2),$=X[0],ee=X[1],ne=(0,g.v9)((function(e){return(0,x.mS)(e,$.id||"")})),te=(0,f.useState)(!1),ie=(0,h.Z)(te,2),re=ie[0],oe=ie[1],he=null===(e=$.data)||void 0===e?void 0:e.pluginId,me=_[he],Re=(0,fe.IU)(me),Oe=me===ue.Fo.S3,_e=(0,g.v9)((function(e){var n;return!!Re&&(0,x.Ab)(e,null===(n=$.data)||void 0===n?void 0:n.pluginId)})),Me=(0,f.useState)(O.tg),He=(0,h.Z)(Me,2),Le=He[0],ze=He[1],Ue=(0,f.useState)(!1),Ve=(0,h.Z)(Ue,2),Be=Ve[0],Ge=Ve[1],Ye=(0,f.useState)(O.tg),qe=(0,h.Z)(Ye,2),We=qe[0],Ke=qe[1],Je=(0,se.uc)(),Qe=Je.bucketList,Xe=Je.failedFetchingBucketList,$e=Je.isFetchingBucketList,en=(0,f.useCallback)((function(e,n){if(e&&n&&$.id!==n.id){var i=n.data.pluginId,r=_[i];if(le.ZP.logEvent("GEN_CRUD_PAGE_SELECT_DATASOURCE",{datasourceType:r}),ee(n),Y([]),J([]),ze(O.tg),Ke(O.tg),Ge(!1),n.id)if(r===ue.Fo.GOOGLE_SHEETS);else n.id&&t((0,b.qV)(n.id,!0))}}),[_,ee,Y,J,ze,Ke,t,Ge,$,_]),nn=(0,f.useCallback)((function(e,n){if(e&&n&&(le.ZP.logEvent("GEN_CRUD_PAGE_SELECT_TABLE"),ze(n),Ke(O.tg),!Re&&!Oe)){var t=n.data;if(Array.isArray(t.columns))if(0===t.columns.length)oe(!0);else{re&&oe(!1);var i=[];t.columns.map((function(e){e.type&&O.qU.includes(e.type.toLowerCase())&&i.push({id:e.name,label:e.name,value:e.name,subText:e.type,icon:"layout-column-line",iconSize:"md",iconColor:"var(--ads-v2-color-fg)"})})),J(i)}else J([])}}),[re,ze,J,Ke,oe,Re,Oe]),tn=(0,f.useCallback)((function(e,n){e&&n&&(le.ZP.logEvent("GEN_CRUD_PAGE_SELECT_SEARCH_COLUMN"),Ke(n))}),[Ke]),rn=(0,xe.y)(be.Yx.license_gac_enabled),on=(0,ye.wk)(rn,(null===s||void 0===s?void 0:s.userPermissions)||[]),an=(0,se.mc)({setSelectedDatasourceTableOptions:Y,setSelectedDatasourceIsInvalid:Ge}),sn=ne||$e&&Oe||(_e||an.isFetchingSpreadsheets)&&Re,ln=(0,se.bF)({canCreateDatasource:on,datasources:l,generateCRUDSupportedPlugin:_,fetchingDatasourceConfigs:sn}),dn=(0,se.qI)(),cn=(0,se.fY)();(0,f.useEffect)((function(){if(Oe&&Qe&&Qe.length){var e=Qe.map((function(e){return{id:e,label:e,value:e,icon:Ze,iconSize:"md",iconColor:"var(--ads-v2-color-fg)"}}));Y(e)}}),[Qe,Oe,Y]),(0,f.useEffect)((function(){if($.id&&$.value&&!ne){var e=R[$.id]||{};if(null===e||void 0===e?void 0:e.error)Ge(!0);else{Ge(!1);var n=null===e||void 0===e?void 0:e.tables;if(n){var t=n.map((function(e){var n=e.columns,t=e.name;return{id:t,label:t,value:t,icon:Ze,iconSize:"md",iconColor:"var(--ads-v2-color-fg)",data:{columns:n}}}));Y(t)}}}}),[R,$,ne,Ge,Y]),(0,f.useEffect)((function(){if(N&&$.id!==N)for(var e=0;e<ln.length;e++)if(ln[e].id===N){en(ln[e].value,ln[e]),F("");break}for(var n=0;n<ln.length;n++)if(ln[n].id===$.id){ge()(ln[n],$)||ee(ln[n]);break}}),[ln,N,en,$,F,ee]),(0,f.useEffect)((function(){if(i){var e=(0,P.vl)(),n=e.datasourceId,t=e.new_page;if(n){u.current=t||c>0?De.NEW:De.REPLACE_EMPTY,F(n),delete e.datasourceId,delete e.new_page;var r=window.location.pathname+(0,E.XH)(e);S.C.replace(r)}}}),[c,i,F]);var un=function(){le.ZP.logEvent("GEN_CRUD_PAGE_CREATE_NEW_DATASOURCE"),S.C.push((0,ce.RQ)({pageId:r,selectedTab:C.Rb.NEW,params:{isGeneratePageMode:"generate-page"}}));var e=ve.vN.GENERATE_CRUD;le.ZP.logEvent("NAVIGATE_TO_CREATE_NEW_DATASOURCE_PAGE",{entryPoint:e})},pn=function(e){var n={};e.pluginSpecificParams&&(n={pluginSpecificParams:e.pluginSpecificParams});var i=(0,p.Z)({applicationId:a||"",pageId:u.current===De.NEW?"":r||"",columns:e.columns||[],searchColumn:e.searchColumn,tableName:e.tableName,datasourceId:$.id||"",mode:u.current},n);le.ZP.logEvent("GEN_CRUD_PAGE_FORM_SUBMIT"),t((0,y.kW)(i))},hn=null===(n=$.data)||void 0===n?void 0:n.isValid,vn=me&&O.hp[me]?O.hp[me]:O.hp.DEFAULT,fn="",mn=Be||!hn||Xe&&Oe;sn||(0===G.length&&(fn="Couldn't find any ".concat(vn.TABLE,", Please select another datasource")),mn&&(fn="Failed fetching datasource structure, Please check your datasource configuration"),re&&(fn="Couldn't find any columns, Please select table with columns."));var gn=!ne&&(Be||!hn)&&!!$.value,xn=!!Le.value&&!sn&&!mn&&ue.Fo.S3!==me,bn=Le.value&&!gn&&!sn&&!mn&&!!$.value,yn=!Le.value||!bn||re;return(0,B.jsxs)("div",{children:[(0,B.jsx)(Ce,{children:(0,B.jsx)(Pe,{children:(0,B.jsx)(Z.x,{kind:"heading-m",children:(0,U.pEA)()})})}),(0,B.jsxs)(Se,{children:[(0,B.jsxs)(M,{width:O.PO.WIDTH,children:[(0,B.jsx)(H,{children:(0,U.tnH)(U.A6)}),(0,B.jsx)(D.P,{"data-testid":"t--datasource-dropdown",onChange:function(e){e===k.f0?un():en(e,ln.find((function(n){return n.value===e})))},style:{width:O.PO.WIDTH},value:(null===$||void 0===$?void 0:$.label)!==(null===O.tg||void 0===O.tg?void 0:O.tg.label)?{key:null===$||void 0===$?void 0:$.value,label:(0,B.jsx)(Fe,{iconType:Ne.PLUGIN_ICON,option:$,pluginImages:o})}:$,virtual:!1,children:ln.map((function(e){var n,t=k.f0===e.id,i=!(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.isSupportedForTemplate)&&!t;return(0,B.jsx)(D.W,{disabled:i,value:e.value,children:(0,B.jsx)(k.ZP,{dataTestid:"t--datasource-dropdown-option",extraProps:{routeToCreateNewDatasource:un},option:e,optionWidth:O.PO.WIDTH},e.id)},e.value)}))})]}),$.value?(0,B.jsxs)(M,{width:O.PO.WIDTH,children:[(0,B.jsxs)(H,{children:["Select ",vn.TABLE," from\xa0",(0,B.jsx)(L,{children:$.label})]}),(0,B.jsx)(D.P,{"data-testid":"t--table-dropdown",isDisabled:!!fn,isLoading:sn,isValid:!fn,onChange:function(e){return nn(e,G.find((function(n){return n.value===e})))},value:(null===Le||void 0===Le?void 0:Le.label)!==(null===O.tg||void 0===O.tg?void 0:O.tg.label)?{key:null===Le||void 0===Le?void 0:Le.value,label:(0,B.jsx)(Fe,{iconType:Ne.ADS_ICON,option:Le})}:Le,virtual:!1,children:G.map((function(e){return(0,B.jsx)(D.W,{value:e.value,children:(0,B.jsxs)(we,{children:[(0,B.jsx)(je,{children:(0,B.jsx)(w.J,{color:null===e||void 0===e?void 0:e.iconColor,name:e.icon,size:e.iconSize})}),(0,B.jsx)(Z.x,{renderAs:"p",children:e.label})]})},e.value)}))}),fn&&(0,B.jsx)(ke,{className:"ads-dropdown-errorMsg",children:fn})]}):null,gn&&(0,B.jsx)("div",{children:(0,B.jsx)(j.z,{kind:"primary",onClick:function(){le.ZP.logEvent("GEN_CRUD_PAGE_EDIT_DATASOURCE_CONFIG",{datasourceId:$.id});var e=(0,ce.yf)({pageId:r,datasourceId:$.id,params:{isGeneratePageMode:"generate-page"}});S.C.push(e)},size:"md",children:"Edit datasource"})}),Re?(0,B.jsx)(ae,{generatePageAction:pn,googleSheetPluginId:he,renderSubmitButton:function(e){var n=e.disabled,t=e.isLoading,i=e.onSubmit;return(0,B.jsx)(Ae,{disabled:n,isLoading:!!d||t,onSubmit:i,showSubmitButton:!!bn})},selectedDatasource:$,selectedSpreadsheet:Le,sheetColumnsHeaderProps:cn,sheetsListProps:dn,spreadSheetsProps:an}):(0,B.jsxs)(B.Fragment,{children:[xn&&(0,B.jsxs)(M,{width:O.PO.WIDTH,children:[(0,B.jsxs)(Te,{children:["Select a searchable ",vn.COLUMN," from the selected\xa0",vn.TABLE,(0,B.jsx)(Ie,{children:(0,B.jsx)(A.u,{content:"Only string values are allowed for searchable column",children:(0,B.jsx)(w.J,{name:"question-line",size:"md"})})})]}),(0,B.jsx)(D.P,{"data-testid":"t--table-dropdown",isDisabled:0===K.length,onChange:function(e){return tn(e,K.find((function(n){return n.value===e})))},value:(null===We||void 0===We?void 0:We.label)!==(null===O.tg||void 0===O.tg?void 0:O.tg.label)?{key:null===We||void 0===We?void 0:We.value,label:(0,B.jsx)(Fe,{iconType:Ne.ADS_ICON,option:We})}:We,virtual:!1,children:K.map((function(e){return(0,B.jsx)(D.W,{value:e.value,children:(0,B.jsxs)(we,{children:[(0,B.jsx)(je,{children:(0,B.jsx)(w.J,{color:null===e||void 0===e?void 0:e.iconColor,name:e.icon,size:e.iconSize})}),(0,B.jsx)(Z.x,{renderAs:"p",children:e.label}),(0,B.jsx)(Z.x,{className:"datasource-sub-text",color:"var(--ads-v2-color-fg-muted)",renderAs:"span",children:e.subText})]})},e.value)}))}),(0,B.jsx)(Ee,{children:0===K.length?"* Optional (No searchable ".concat(vn.COLUMN," to select)"):"* Optional"})]}),(0,B.jsx)("div",{className:"mt-4",children:(0,B.jsx)(Ae,{disabled:yn,isLoading:!!d,onSubmit:function(){var e={columns:[],searchColumn:We.value,tableName:Le.value||""};pn(e)},showSubmitButton:!!bn})})]})]})]})}},25434:function(e,n,t){t.d(n,{S7:function(){return m},bF:function(){return h},fY:function(){return g},mc:function(){return v},qI:function(){return f},uc:function(){return b}});var i=t(1413),r=t(29439),o=t(50390),a=t(92017),s=t(18448),l=t(95765),d=t(30942),c=t(56553),u=t(77271),p={CONNECT_NEW_DATASOURCE_OPTION:{id:a.f0,label:"Connect new datasource",value:a.f0,data:{pluginId:""}}},h=function(e){var n=e.canCreateDatasource,t=e.datasources,i=e.fetchingDatasourceConfigs,a=e.generateCRUDSupportedPlugin,s=(0,o.useState)([]),u=(0,r.Z)(s,2),h=u[0],v=u[1],f=(0,l.v9)(c.Ym);return(0,o.useEffect)((function(){var e=[],i=[],r=[];n&&r.push(p.CONNECT_NEW_DATASOURCE_OPTION),t.forEach((function(n){var t=n.datasourceStorages,r=n.id,o=n.name,s=n.pluginId,l=a.hasOwnProperty(s)&&a[s]===d.Fo.GOOGLE_SHEETS?Object.values(t)[0]:t[f],c={id:r,label:o,value:o,data:{pluginId:s,isSupportedForTemplate:!!a[s],isValid:null===l||void 0===l?void 0:l.isValid}};a[s]?i.push(c):e.push(c)})),r=r.concat(i,e),v(r)}),[t,v,a,i]),h},v=function(e){var n=e.setSelectedDatasourceIsInvalid,t=e.setSelectedDatasourceTableOptions,a=(0,l.I0)(),d=(0,o.useState)(!1),c=(0,r.Z)(d,2),u=c[0],p=c[1],h=(0,o.useState)(!1),v=(0,r.Z)(h,2),f=v[0],m=v[1],g=(0,o.useCallback)((function(){p(!1),m(!0)}),[p]),x=(0,o.useCallback)((function(e){if(p(!1),e.data&&e.data.trigger){var i=e.data.trigger;Array.isArray(i)?t(i):n(!0)}}),[n,t,p]);return{fetchAllSpreadsheets:(0,o.useCallback)((function(e){var n=e.pluginId,t=e.requestObject,r=e.selectedDatasourceId;p(!0),m(!1);var o=(0,i.Z)({datasourceId:r,displayType:"DROP_DOWN",pluginId:n,requestType:"SPREADSHEET_SELECTOR"},t);a((0,s._M)({payload:{datasourceId:r,data:o,isGeneratePage:!0},onSuccessCallback:x,onErrorCallback:g}))}),[x,g,p,m]),isFetchingSpreadsheets:u,failedFetchingSpreadsheets:f}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,l.I0)(),t=(0,o.useState)([]),i=(0,r.Z)(t,2),a=i[0],d=i[1],c=(0,o.useState)(!1),u=(0,r.Z)(c,2),p=u[0],h=u[1],v=(0,o.useState)(!1),f=(0,r.Z)(v,2),m=f[0],g=f[1],x=(0,o.useCallback)((function(){h(!1),g(!0)}),[h]),b=(0,o.useCallback)((function(n){if(h(!1),n.data&&n.data.trigger){var t=n.data.trigger;Array.isArray(t)&&(d(t),e.setSheetOptions&&e.setSheetOptions(t))}}),[d,h,e.setSheetOptions]);return{sheetsList:a,isFetchingSheetsList:p,failedFetchingSheetsList:m,fetchSheetsList:(0,o.useCallback)((function(t){var i=t.pluginId,r=t.selectedDatasourceId,o=t.selectedSpreadsheetUrl;d([]),e.setSheetOptions&&e.setSheetOptions([]),h(!0),g(!1);var a={datasourceId:r,displayType:"DROP_DOWN",parameters:{sheetUrl:o},pluginId:i,requestType:"SHEET_SELECTOR"};n((0,s._M)({payload:{datasourceId:r,data:a,isGeneratePage:!0},onSuccessCallback:b,onErrorCallback:x}))}),[d,b,x,h,g,e.setSheetOptions])}},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,l.I0)(),t=(0,o.useState)([]),i=(0,r.Z)(t,2),a=i[0],d=i[1],c=(0,o.useState)(!1),p=(0,r.Z)(c,2),h=p[0],v=p[1],f=(0,o.useState)(!1),m=(0,r.Z)(f,2),g=m[0],x=m[1],b=(0,o.useCallback)((function(e){v(!1),x(!0),u.ZP.logEvent("DATA_FETCH_FAILED_POST_SCHEMA_FETCH",{error:e})}),[v]),y=(0,o.useCallback)((function(n){if(v(!1),n.data&&n.data.trigger){var t=n.data.trigger;Array.isArray(t)?(d(t),e.setSheetData&&e.setSheetData(t)):u.ZP.logEvent("DATA_FETCH_FAILED_POST_SCHEMA_FETCH",{error:n})}}),[d,v,e.setSheetData]);return{sheetData:a,isFetchingSheetData:h,failedFetchingSheetData:g,fetchSheetData:(0,o.useCallback)((function(t){var i=t.pluginId,r=t.selectedDatasourceId,o=t.selectedSheetName,a=t.selectedSpreadsheetUrl;d([]),e.setSheetData&&e.setSheetData([]),v(!0),x(!1);var l={datasourceId:r,displayType:"DROP_DOWN",parameters:{sheetUrl:a,sheetName:o,queryFormat:"ROWS",tableHeaderIndex:1},pluginId:i,requestType:"SHEET_DATA"};n((0,s._M)({payload:{datasourceId:r,data:l,isGeneratePage:!0},onSuccessCallback:y,onErrorCallback:b}))}),[d,y,b,v,x,e.setSheetData])}},g=function(){var e=(0,l.I0)(),n=(0,o.useState)([]),t=(0,r.Z)(n,2),i=t[0],a=t[1],d=(0,o.useState)(!1),c=(0,r.Z)(d,2),u=c[0],p=c[1],h=(0,o.useState)(""),v=(0,r.Z)(h,2),f=v[0],m=v[1],g=(0,o.useCallback)((function(e){p(!1),m(e),a([])}),[m,p]),x=(0,o.useCallback)((function(e){if(p(!1),e.data&&e.data.trigger){var n=e.data.trigger;if(Array.isArray(n))a(n);else{var t="Failed fetching Column headers";"string"===typeof n&&(t=n),a([]),m(t)}}}),[a,p,m]);return{columnHeaderList:i,isFetchingColumnHeaderList:u,errorFetchingColumnHeaderList:f,fetchColumnHeaderList:(0,o.useCallback)((function(n){p(!0),m("");var t={datasourceId:n.selectedDatasourceId,displayType:"DROP_DOWN",parameters:{sheetName:n.sheetName,sheetUrl:n.selectedSpreadsheetUrl,tableHeaderIndex:n.tableHeaderIndex},pluginId:n.pluginId,requestType:"COLUMNS_SELECTOR"};e((0,s._M)({payload:{datasourceId:n.selectedDatasourceId,data:t,isGeneratePage:!0},onSuccessCallback:x,onErrorCallback:g}))}),[x,g,p,m])}},x=[{value:"LIST_BUCKETS"}],b=function(){var e=(0,l.I0)(),n=(0,o.useState)([]),t=(0,r.Z)(n,2),i=t[0],a=t[1],d=(0,o.useState)(!1),c=(0,r.Z)(d,2),u=c[0],p=c[1],h=(0,o.useState)(!1),v=(0,r.Z)(h,2),f=v[0],m=v[1],g=(0,o.useCallback)((function(e){if(p(!1),e.data&&e.data.body){var n=e.data.body;if(Array.isArray(n.bucketList)){var t=n.bucketList;a(void 0===t?[]:t)}}}),[a,p]),b=(0,o.useCallback)((function(){p(!1),m(!0)}),[p]);return{bucketList:i,isFetchingBucketList:u,failedFetchingBucketList:f,fetchBucketList:(0,o.useCallback)((function(n){var t=n.selectedDatasource;t.id&&(p(!0),m(!1),e((0,s._M)({payload:{datasourceId:t.id,data:x,isGeneratePage:!0},onSuccessCallback:g,onErrorCallback:b})))}),[g,b,p])}}},91023:function(e,n,t){t.d(n,{Z:function(){return we}});var i,r=t(97326),o=t(1413),a=t(15671),s=t(43144),l=t(82963),d=t(78814),c=t(61120),u=t(60136),p=t(30168),h=t(59195),v=t.n(h),f=t(29190),m=t.n(f),g=t(2251),x=t.n(g),b=t(85686),y=t.n(b),I=t(52891),C=t.n(I),S=t(38342),P=t.n(S),T=t(50390),k=t(62608),E=t(65570),j=t(22074),w=t(86942),Z=t(6790),D=t(95165),A=t(76116),N=t(13102),F=t(95765),R=t(11989),O=t(69523),_=t(25786),M=t(81591),H=t(46718),L=t(72352),z=t(35045),U=t(18448),V=t(8597),B=t(26844),G=t(93782),Y=t(46262),q=t(62559),W=(0,G.x)().intercomAppID,K=k.ZP.div(i||(i=(0,p.Z)(["\n  width: fit-content;\n  ","\n"])),(function(e){return!e.isInViewMode&&"margin-top: var(--ads-v2-spaces-5);margin-bottom: var(--ads-v2-spaces-4);"}));function J(e){var n,t=e.actionType,i=e.calloutType,r=void 0===i?"error":i,o=e.datasource,a=e.description,s=e.isInViewMode,l=void 0!==s&&s,d=e.pageId,c=e.style,u=void 0===c?{}:c,p=(0,F.I0)(),h=(0,F.v9)((function(e){return(0,R.gn)(e,o.id)})),v=(null===e||void 0===e||null===(n=e.datasource)||void 0===n?void 0:n.pluginId)||"",f=(0,F.v9)((function(e){return(0,R.s3)(e,v)})),m=function(){h&&d&&p((0,U.l8)(d,o.id,h))},g=function(e){e.stopPropagation(),(0,Y.f)(Y.c.QUERY,null===f||void 0===f?void 0:f.documentationLink,null===f||void 0===f?void 0:f.name)};return(0,q.jsx)(K,{isInViewMode:l,style:u,children:(0,q.jsx)(V.U,{kind:r,links:function(){switch(t){case j.Us.AUTHORIZE:return[{children:(0,B.tnH)(B.QaP),onClick:m},{children:(0,B.tnH)(B.j2y),onClick:function(){W&&window.Intercom&&window.Intercom("showNewMessage",(0,B.tnH)(B.P7z))}}];case j.Us.DOCUMENTATION:return[{children:(0,B.tnH)(B.oHR),onClick:g}];default:return}}(),children:a})})}var Q=t(48713),X=t(9137),$=t(41575),ee=t(30942);function ne(e,n,t){if(!e)return"";var i="";if((null===n||void 0===n?void 0:n.packageName)===ee.Fo.GOOGLE_SHEETS){var r=function(e,n,t){var i=P()(e,"datasourceStorages.".concat(t,".datasourceConfiguration.authentication.scopeString")),r=i||"",o=(0,z.FS)(e,n,t),a=P()(e,"datasourceStorages.".concat(t,".datasourceConfiguration.authentication.authenticationStatus")),s=!!a&&a===j.y_.FAILURE_FILE_NOT_SELECTED,l=window.googleAPIsLoaded;return!!o&&0===o.length&&r.includes(X.q)&&s&&!!l}(e,(0,B.tnH)(B.fQt),t);i=r?B.IYv:B.k1S}return i}var te=t(74165),ie=t(15861),re=t(29439),oe=t(40167),ae=t(77271);var se,le=function(e){var n=e.datasourceId,t=e.gsheetProjectID,i=e.gsheetToken,r=(0,T.useState)(window.googleAPIsLoaded),o=(0,re.Z)(r,1)[0],a=(0,T.useState)(!1),s=(0,re.Z)(a,2),l=s[0],d=s[1],c=(0,T.useState)(!1),u=(0,re.Z)(c,2),p=u[0],h=u[1],v=(0,F.I0)(),f=window.gapi,m=window.google;(0,T.useEffect)((function(){o||v((0,U.Yk)({action:j.pP.CANCEL,fileIds:[],datasourceId:n}))}),[o]),(0,T.useEffect)((function(){if(p){var e=document.querySelector(".picker-dialog-bg"),n=document.querySelectorAll(".picker-dialog");e&&(e.style.pointerEvents="auto"),n.forEach((function(e){e.style.pointerEvents="auto"}))}}),[p]),(0,T.useEffect)((function(){i&&f&&t&&f.load("client:picker",(0,ie.Z)((0,te.Z)().mark((function e(){return(0,te.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.client.load("https://www.googleapis.com/discovery/v1/apis/drive/v3/rest");case 2:d(!0);case 3:case"end":return e.stop()}}),e)}))))}),[o,i,t]),(0,T.useEffect)((function(){i&&o&&l&&m&&t&&g(i,t)}),[i,o,l,t]),(0,T.useEffect)((function(){p&&ae.ZP.logEvent("GOOGLE_SHEET_FILE_PICKER_INITIATED")}),[p]);var g=function(){var e=(0,ie.Z)((0,te.Z)().mark((function e(n,t){var i,r;return(0,te.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(i=new m.picker.DocsView(m.picker.ViewId.SPREADSHEETS)).setMimeTypes("application/vnd.google-apps.spreadsheet"),i.setMode(m.picker.DocsViewMode.LIST),r=(0,B.tnH)(B.s4f),(new m.picker.PickerBuilder).enableFeature(m.picker.Feature.NAV_HIDDEN).enableFeature(m.picker.Feature.MULTISELECT_ENABLED).setAppId(t).setOAuthToken(n).addView(i).setTitle(r).setCallback(b).build().setVisible(!0),h(!0);case 7:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),x=function(e){var n;switch(null===e||void 0===e?void 0:e.action){case j.pP.LOADED:ae.ZP.logEvent("GOOGLE_SHEET_FILE_PICKER_FILES_LISTED");break;case j.pP.CANCEL:ae.ZP.logEvent("GOOGLE_SHEET_FILE_PICKER_CANCEL");break;case j.pP.PICKED:ae.ZP.logEvent("GOOGLE_SHEET_FILE_PICKER_PICKED",{numberOfSheetsSelected:null===e||void 0===e||null===(n=e.docs)||void 0===n?void 0:n.length})}},b=function(){var e=(0,ie.Z)((0,te.Z)().mark((function e(t){var i,r;return(0,te.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x(t),t.action!==j.pP.CANCEL&&t.action!==j.pP.PICKED||((0,oe.Vq)(X.lD),h(!1),r=(null===t||void 0===t||null===(i=t.docs)||void 0===i?void 0:i.map((function(e){return e.id})))||[],v((0,U.Yk)({action:t.action,datasourceId:n,fileIds:r})));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,q.jsx)("div",{})},de=t(82549),ce=t(2171),ue=t(42971),pe=t(18848),he=t(53537),ve=t(46377),fe=t(45944),me=t(20327),ge=t(56553),xe=t(27665),be=t(81179),ye=t(13418),Ie=t(83979),Ce=t(79922),Se=t(92292);function Pe(e,n,t){return n=(0,c.Z)(n),(0,l.Z)(e,(0,d.Z)()?Reflect.construct(n,t||[],(0,c.Z)(e).constructor):n.apply(e,t))}var Te=k.ZP.div(se||(se=(0,p.Z)(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  width: 100%;\n"]))),ke=function(e){function n(e){var t;return(0,a.Z)(this,n),(t=Pe(this,n,[e])).setupConfig=function(e){var n=e.configProperty,i=e.controlType,r=e.isRequired,o=t.state.configDetails,a=t.state.requiredFields;o[n]=i,r&&(a[n]=e),t.setState({configDetails:o,requiredFields:a})},t.state={requiredFields:{},configDetails:{}},t}return(0,u.Z)(n,e),(0,s.Z)(n,[{key:"componentDidUpdate",value:function(e){this.props.datasourceId!==e.datasourceId&&this.setState({requiredFields:{},configDetails:{}})}},{key:"render",value:function(){return(0,q.jsx)(je,(0,o.Z)((0,o.Z)({},this.props),{},{configDetails:this.state.configDetails,requiredFields:this.state.requiredFields,setupConfig:this.setupConfig}))}}]),n}(T.Component),Ee=function(e){function n(e){var t;return(0,a.Z)(this,n),(t=Pe(this,n,[e])).getSanitizedData=function(){return(0,o.Z)((0,o.Z)({},(0,_.c1)(t.props.formData,t.props.configDetails)),{},{name:t.props.datasourceName})},t.renderDatasourceInfo=function(){var e=t.props,n=e.datasource,i=e.formConfig,r=e.formData,o=e.isPluginAuthFailed,a=e.isPluginAuthorized,s=e.pageId,l=e.plugin,d=e.pluginPackageName,c=e.viewMode,u=(0,z.IU)(d),p=ne(r,l,t.state.filterParams.id),h=u&&!a&&p==B.k1S;return(0,q.jsxs)(de.pY,{"data-testid":"t--ds-review-section",children:[n&&u&&o&&n.id!==X.m7&&(0,q.jsx)(J,{actionType:j.Us.AUTHORIZE,datasource:n,description:p,isInViewMode:!0,pageId:s}),!y()(i)&&!y()(n)&&!h&&(0,q.jsx)(de.ZP,{config:i[0],datasource:n,viewMode:c})]})},t.shouldShowTabs=function(){var e=t.props,n=e.isPluginAllowedToPreviewData,i=e.isPluginAuthorized;return n&&i},t.renderTabsForViewMode=function(){var e=t.props.datasource;return(0,q.jsx)(Te,{children:t.shouldShowTabs()?(0,q.jsx)(Ce.Z,{configChild:t.renderDatasourceInfo(),datasource:e}):t.renderDatasourceInfo()})},t.renderDataSourceConfigForm=function(e){var n=t.props,i=n.canDeleteDatasource,r=n.canManageDatasource,o=n.datasource,a=n.datasourceButtonConfiguration,s=n.datasourceId,l=n.formData,d=n.gsheetProjectID,c=n.gsheetToken,u=n.hiddenHeader,p=n.isDeleting,h=n.isInsideReconnectModal,v=n.isOnboardingFlow,f=n.isPluginAuthFailed,g=n.isPluginAuthorized,b=n.isSaving,I=n.isTesting,C=n.pageId,S=n.plugin,P=n.pluginImage,T=n.pluginPackageName,k=n.scopeValue,E=n.setDatasourceViewMode,w=n.showDebugger,Z=n.viewMode,D=(0,z.IU)(T),A=s===X.m7,N=ne(l,S,t.state.filterParams.id),F=(0,B.tnH)(B.K7o),R=t.shouldShowTabs()&&Z&&!h;return(0,q.jsxs)(q.Fragment,{children:[!u&&(0,q.jsx)(ce.X2,{canDeleteDatasource:i||!1,canManageDatasource:r||!1,datasource:o,datasourceId:s,isDeleting:p,isNewDatasource:A,isPluginAuthorized:g,noBottomBorder:R,pluginImage:P,pluginName:(null===S||void 0===S?void 0:S.name)||"",pluginType:(null===S||void 0===S?void 0:S.type)||"",setDatasourceViewMode:E,viewMode:Z}),(0,q.jsxs)(ue.yd,{children:[(0,q.jsx)(ue.xq,{className:"saas-form-resizer-content ".concat(R&&"saas-form-resizer-content-show-tabs"),children:(0,q.jsxs)(fe.Ll,{children:[(0,q.jsx)(ve.ZP,{filterId:t.state.filterParams.id,isInsideReconnectModal:!!h,pluginName:(null===S||void 0===S?void 0:S.name)||"",pluginType:(null===S||void 0===S?void 0:S.type)||"",updateFilter:t.updateFilter,viewMode:Z}),(0,q.jsxs)("div",{className:"db-form-content-container",children:[(0,q.jsxs)(he.l,{onSubmit:function(e){e.preventDefault()},viewMode:Z,children:[(!Z||A||h)&&(0,q.jsxs)(q.Fragment,{children:[o&&D&&A?(0,q.jsx)(J,{actionType:j.Us.DOCUMENTATION,calloutType:"info",datasource:o,description:F,pageId:C}):null,o&&D&&f&&s!==X.m7?(0,q.jsx)(J,{datasource:o,description:N,pageId:C}):null,y()(e)?null:x()(e,t.renderMainSection),""]}),Z&&!h&&t.renderTabsForViewMode()]}),o&&(0,q.jsx)(H.ZP,{currentEnvironment:t.state.filterParams.id,datasource:o,datasourceButtonConfiguration:a,formData:l,formName:t.props.formName,getSanitizedFormData:m()(t.getSanitizedData),isInsideReconnectModal:h,isInvalid:(0,_.Gu)(t.props.requiredFields,l),isOnboardingFlow:v,isSaving:b,isTesting:I,onCancel:function(){return t.onCancel()},parentEntityId:C,pluginName:(null===S||void 0===S?void 0:S.name)||"",pluginPackageName:T,pluginType:null===S||void 0===S?void 0:S.type,scopeValue:k,setDatasourceViewMode:E,shouldDisplayAuthMessage:!D,triggerSave:t.props.isDatasourceBeingSavedFromPopup,viewMode:Z})]})]})}),w&&(0,q.jsx)(ue.ZP,{})]}),(0,q.jsx)($.Z,{datasourceId:s,datasourcePermissions:(null===o||void 0===o?void 0:o.userPermissions)||[],isOpen:t.state.showDialog,onClose:t.closeDialog,onDiscard:t.onDiscard,onSave:t.onSave,saveButtonText:(0,B.tnH)(B.Nsj)}),c?(0,q.jsx)(le,{datasourceId:s,gsheetProjectID:d,gsheetToken:c}):null]})},t.state={showDialog:!1,routesBlocked:!1,readUrlParams:!1,filterParams:{id:xe.K3,name:"",userPermissions:[]},unblock:function(){},navigation:function(){}},t.closeDialog=t.closeDialog.bind((0,r.Z)(t)),t.updateFilter=t.updateFilter.bind((0,r.Z)(t)),t.onSave=t.onSave.bind((0,r.Z)(t)),t.onDiscard=t.onDiscard.bind((0,r.Z)(t)),t.datasourceDeleteTrigger=t.datasourceDeleteTrigger.bind((0,r.Z)(t)),t}return(0,u.Z)(n,e),(0,s.Z)(n,[{key:"componentDidUpdate",value:function(e){var n,t,i,r=new URL(null===(n=window)||void 0===n||null===(t=n.location)||void 0===t?void 0:t.href),o=null===r||void 0===r||null===(i=r.searchParams)||void 0===i?void 0:i.get("pluginId");C()(v()(this.props.datasource,"name"),v()(e.datasource,"name"))||this.props.initializeDatasource(v()(this.props.datasource,"name")),e.viewMode!==this.props.viewMode&&!this.props.viewMode&&o&&this.blockRoutes(),this.props.isOnboardingFlow||this.setViewModeFromQueryParams(),this.props.isDatasourceBeingSaved&&this.closeDialogAndUnblockRoutes()}},{key:"setViewModeFromQueryParams",value:function(){var e=this,n=(0,me.vl)();this.props.viewMode&&("false"===n.viewMode&&!this.state.readUrlParams||this.props.isNewDatasource)&&this.setState({readUrlParams:!0},(function(){e.props.setDatasourceViewMode({datasourceId:e.props.datasourceId,viewMode:!1})}))}},{key:"routesBlockFormChangeCallback",value:function(){this.props.isFormDirty?this.state.routesBlocked||this.blockRoutes():this.state.routesBlocked&&this.closeDialogAndUnblockRoutes(!0)}},{key:"updateFilter",value:function(e,n,t){return this.state.filterParams.id!==e&&(ae.ZP.logEvent("SWITCH_ENVIRONMENT",{fromEnvId:this.state.filterParams.id,toEnvId:e,fromEnvName:this.state.filterParams.name,toEnvName:n,mode:"CONFIGURATION"}),this.setState({filterParams:{id:e,name:n,userPermissions:t}}),!0)}},{key:"componentDidMount",value:function(){var e,n,t,i,r,o,a=new URL(null===(e=window)||void 0===e||null===(n=e.location)||void 0===n?void 0:n.href),s=null===a||void 0===a||null===(t=a.searchParams)||void 0===t?void 0:t.get("pluginId");this.props.initialValues||this.props.initializeDatasource(v()(this.props.datasource,"name")),this.props.datasource||(null===(i=this.props)||void 0===i||null===(r=i.match)||void 0===r||null===(o=r.params)||void 0===o?void 0:o.datasourceId)!==X.m7||this.props.createTempDatasource({pluginId:s}),!this.props.viewMode&&s&&this.blockRoutes(),this.props.loadFilePickerAction()}},{key:"componentWillUnmount",value:function(){this.props.discardTempDatasource(),this.props.deleteTempDSFromDraft(),this.state.unblock&&this.state.unblock()}},{key:"closeDialog",value:function(){this.setState({showDialog:!1})}},{key:"onSave",value:function(){this.props.toggleSaveActionFromPopupFlag(!0)}},{key:"blockRoutes",value:function(){var e,n,t=this;this.setState({unblock:null===(e=this.props)||void 0===e||null===(n=e.history)||void 0===n?void 0:n.block((function(e){return t.setState({navigation:function(){return t.props.history.push(e.pathname+e.search,e.state)},showDialog:!0,routesBlocked:!0},t.routesBlockFormChangeCallback.bind(t)),!1}))})}},{key:"onDiscard",value:function(){var e;this.closeDialogAndUnblockRoutes(),this.state.navigation(),this.props.datasourceDiscardAction(null===(e=this.props)||void 0===e?void 0:e.pluginId),this.props.viewMode||this.props.setDatasourceViewMode({datasourceId:this.props.datasourceId,viewMode:!0}),this.props.isFormDirty&&this.props.resetForm(this.props.formName)}},{key:"closeDialogAndUnblockRoutes",value:function(e){this.closeDialog(),this.state.unblock&&this.state.unblock(),this.props.toggleSaveActionFlag(!1),this.props.toggleSaveActionFromPopupFlag(!1),this.setState({routesBlocked:!1}),e&&this.state.navigation()}},{key:"datasourceDeleteTrigger",value:function(){this.state.unblock&&this.state.unblock()}},{key:"render",value:function(){var e=this.props,n=e.formConfig;if(!e.pluginId)return(0,q.jsx)(L.Z,{});var t=this.renderDataSourceConfigForm(n);return this.renderForm(t)}},{key:"onCancel",value:function(){this.props.isFormDirty?this.setState({showDialog:!0}):this.props.setDatasourceViewMode({datasourceId:this.props.datasourceId,viewMode:!0})}}]),n}(O.nm),je=(0,F.$j)((function(e,n){var t,i,r,o,a,s,l,d,c=n.datasourceId||(null===(t=n.match)||void 0===t||null===(i=t.params)||void 0===i?void 0:i.datasourceId),u=e.ui.datasourcePane,p=e.entities,h=p.datasources,v=p.plugins,f=(0,Q.dZ)(e),m=(0,R.qO)(e,c),g=v.formConfigs,x=(0,w.Z)(E.Y4)(e),b=P()(m,"pluginId",""),y=(0,R.s3)(e,b),I=g[b],C=(0,Z.Z)(E.Y4)(e),S=(0,R.Q2)(e,c,E.Y4),T=(0,R.Ds)(e,b),k=c===X.m7||(0,D.Z)(E.Y4)(e),A=(null===m||void 0===m?void 0:m.userPermissions)||[],N=(0,ye.N)(e,Ie.Yx.license_gac_enabled),F=(0,be.nE)(N,A),O=(0,be._g)(N,A),_=(0,M.Uh)(e),H=(0,M.TZ)(e),L=(0,R.H5)(e),U=(0,pe.hq)(e),V=location.search,B=new URLSearchParams(V).get("viewMode");B&&(null===B||void 0===B?void 0:B.length)>0&&(f="true"===B);var G=n.currentEnvironment,Y=!(!y||!x)&&(0,z.q)(x,y,G),q=!(!y||!x)&&(0,z.q)(x,y,G,[j.y_.FAILURE,j.y_.FAILURE_ACCESS_DENIED,j.y_.FAILURE_FILE_NOT_SELECTED]),W=(0,Se.H6)(e),K=!!y&&(0,z.Id)(m,y);return{datasource:m,datasourceButtonConfiguration:T,datasourceId:c,documentationLink:L[b],isSaving:h.loading,isDeleting:!(null===m||void 0===m||!m.isDeleting),isTesting:h.isTesting,formData:x,formConfig:I,viewMode:null!==(r=f)&&void 0!==r?r:!n.isInsideReconnectModal,isNewDatasource:u.newDatasource===X.m7,pageId:n.pageId||(null===(o=n.match)||void 0===o||null===(a=o.params)||void 0===a?void 0:a.pageId),plugin:y,pluginImage:(0,R.x8)(e)[b],pluginPackageName:n.pluginPackageName||(null===(s=n.match)||void 0===s||null===(l=s.params)||void 0===l?void 0:l.pluginPackageName),initialValues:C,isPluginAuthorized:Y,pluginId:b,actions:e.entities.actions,formName:E.Y4,applicationId:W||(0,M.aS)(e),canManageDatasource:F,canDeleteDatasource:O,datasourceName:null!==(d=null===m||void 0===m?void 0:m.name)&&void 0!==d?d:"",isDatasourceBeingSaved:h.isDatasourceBeingSaved,isDatasourceBeingSavedFromPopup:e.entities.datasources.isDatasourceBeingSavedFromPopup,isFormDirty:k,gsheetToken:_,gsheetProjectID:H,showDebugger:U,scopeValue:S,isPluginAuthFailed:q,featureFlags:(0,ye.Q)(e),isPluginAllowedToPreviewData:K}}),(function(e){return{discardTempDatasource:function(){return e((0,U.iM)())},deleteTempDSFromDraft:function(){return e((0,U.c2)())},toggleSaveActionFlag:function(n){return e((0,U.Tv)(n))},toggleSaveActionFromPopupFlag:function(n){return e((0,U.V)(n))},setDatasourceViewMode:function(n){var t=new URLSearchParams(window.location.search);t.set("viewMode",n.viewMode.toString()),history.replaceState({},"","?"+t.toString()),e((0,U.Ui)(n))},createTempDatasource:function(n){return e((0,U.Pd)(n))},loadFilePickerAction:function(){return e((0,U.gx)())},datasourceDiscardAction:function(n){return e((0,U.mF)(n))},initializeDatasource:function(n){return e((0,A.j2)(E.Y4,n))},resetForm:function(n){return e((0,A.mc)(n))}}}))((0,N.Z)({form:E.Y4,enableReinitialize:!0})(Ee)),we=(0,F.$j)((function(e){return{currentEnvironment:(0,ge._N)(e)}}))(ke)},603:function(e,n,t){t.d(n,{Z:function(){return ve}});var i,r,o,a=t(29439),s=t(30168),l=t(79530),d=t.n(l),c=t(50390),u=t(92292),p=t(95765),h=t(86125),v=t(62608),f=t(81193),m=t(26844),g=t(11989),x=t(43138),b=t(45944),y=t(77271),I=t(96587),C=t(73049),S=t(42957),P=t(54138),T=t(9010),k=t(2171),E=t(77176),j=t(35045),w=t(62559),Z=v.ZP.div(i||(i=(0,s.Z)(["\n  display: flex;\n  height: 64px;\n  width: 100%;\n  padding: 10px 12px;\n  margin-bottom: 10px;\n  cursor: pointer;\n  opacity: ",";\n  border-radius: var(--ads-v2-border-radius);\n  &.active {\n    background-color: var(--ads-v2-color-bg-muted);\n  }\n  &:hover {\n    background-color: var(--ads-v2-color-bg-subtle);\n  }\n  img {\n    width: 24px;\n    height: 24px;\n  }\n"])),(function(e){return e.disabled?.4:1})),D=v.ZP.div(r||(r=(0,s.Z)(["\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n"]))),A=v.ZP.div(o||(o=(0,s.Z)(["\n  width: 100%;\n  display: flex;\n  margin-bottom: ","px;\n  .t--ds-list-title {\n    max-width: 160px;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    padding-right: 4px;\n  }\n  .cs-icon {\n    margin-left: ","px;\n  }\n"])),(function(e){return e.theme.spaces[1]}),(function(e){return e.theme.spaces[2]}));var N=function(e){var n=e.currentEnvironment,t=e.ds,i=e.onClick,r=e.plugin,o=e.selected,a=(0,j.IU)(null===r||void 0===r?void 0:r.packageName)?(0,j.q)(t,null!==r&&void 0!==r?r:{},n):(0,E.GB)(t,n);return(0,w.jsxs)(Z,{className:"t--ds-list ".concat(o?"active":""),onClick:function(){return i(t)},children:[(0,w.jsx)(k.cm,{alt:"Datasource",src:(0,T.V)(null===r||void 0===r?void 0:r.iconLocation)}),(0,w.jsxs)(D,{children:[(0,w.jsx)(S.u,{content:t.name,placement:"left",children:(0,w.jsxs)(A,{children:[(0,w.jsx)(C.ZP,{className:"t--ds-list-title",color:"var(--ads-v2-color-fg-emphasis)",type:C.yG.H4,children:t.name}),(0,w.jsx)(P.J,{color:a?"var(--ads-v2-color-fg-success)":"var(--ads-v2-color-fg-error)",name:a?"oval-check":"info",size:"md"})]})}),(0,w.jsx)(C.ZP,{color:"var(--ads-v2-color-fg)",type:C.yG.H5,children:null===r||void 0===r?void 0:r.name})]})]})},F=t(27923),R=t(48848),O=t(18448),_=t(28114),M=t(32003),H=t(18581),L=t(31205),z=t(56626),U=t(56553),V=t(86907),B=t(91331),G=t(26444),Y=t(49167);var q,W,K,J,Q,X,$,ee,ne,te=function(e){var n=e.appId,t=e.pageId,i=t&&(0,G.K3)({pageId:t});return{skipMessage:(0,m.tnH)(m.WaY),missingDsCredentialsDescription:(0,m.tnH)(m.p7N),editorURL:i,editorId:n,parentEntityId:t,editorType:Y.sg.APPLICATION}},ie=t(49473),re=v.ZP.div(q||(q=(0,s.Z)(["\n  display: flex;\n  align-items: center;\n  flex: 1;\n  justify-content: center;\n  margin-bottom: ","px;\n  width: calc(100% - 206px);\n"])),(function(e){return e.theme.spaces[11]})),oe=v.ZP.div(W||(W=(0,s.Z)(["\n  flex: 3;\n  height: 640px;\n  max-height: 82vh;\n"]))),ae=v.ZP.div(K||(K=(0,s.Z)(['\n  height: calc(100% - 16px);\n  display: flex;\n  margin-top: 24px;\n  border-top: 1px solid var(--ads-v2-color-border);\n  padding-top: 16px;\n\n  .t--json-to-form-wrapper {\n    width: 100%;\n\n    .t--collapse-section-container {\n      margin-top: 20px;\n    }\n\n    .t--close-editor {\n      display: none;\n    }\n\n    div[class^="JSONtoForm__DBForm-"] {\n      padding-top: 0px;\n\n      div[class^="JSONtoForm__SaveButtonContainer-"] {\n        button:first-child {\n          display: none;\n        }\n      }\n    }\n\n    .t--collapse-section-container {\n      width: 100%;\n\n      & > div {\n        color: ',';\n      }\n    }\n\n    .label-icon-wrapper div[class^="IconConstants__IconWrapper-"] {\n      width: 12px;\n      height: 14px;\n      margin-left: 6px;\n      margin-right: 6px;\n\n      svg {\n        width: 12px;\n        height: 14px;\n\n        path {\n          fill: ',';\n        }\n      }\n    }\n\n    div > label[class^="StyledFormComponents__StyledFormLabel-"] {\n      &:last-child {\n        width: 140px !important;\n      }\n    }\n  }\n\n  .t--message-container {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n  }\n'])),h.w.BLACK,h.w.GREEN),se=v.ZP.div(J||(J=(0,s.Z)(["\n  height: inherit;\n  overflow: auto;\n  width: 256px;\n  padding-right: 8px;\n\n  .t--collapse-section-container {\n    width: 90%;\n    margin-left: 5%;\n    margin-bottom: ","px;\n\n    & > div {\n      font-style: normal;\n      font-weight: normal;\n      font-size: 12px;\n      line-height: 16px;\n      color: ",";\n    }\n  }\n"])),(function(e){return e.theme.spaces[11]+2}),h.w.BLACK),le=v.ZP.div(Q||(Q=(0,s.Z)(["\n  font-size: ","px;\n  line-height: ","px;\n  letter-spacing: ","px;\n  text-align: center;\n  margin-bottom: ","px;\n"])),(function(e){return e.theme.typography.p0.fontSize}),(function(e){return e.theme.typography.p0.lineHeight}),(function(e){return e.theme.typography.p0.letterSpacing}),(function(e){return e.theme.spaces[6]})),de=v.ZP.div(X||(X=(0,s.Z)(['\n  width: calc(100% - 206px);\n  overflow: auto;\n  display: flex;\n  overflow: hidden;\n  height: inherit;\n  flex: 1;\n  display: flex;\n  border-left: 1px solid var(--ads-v2-color-border);\n  border-right: 1px solid var(--ads-v2-color-border);\n  margin-right: 12px;\n  width: calc(100% - 256px - 256px);\n\n  > div {\n    width: 100%;\n    height: calc(100% - 68px); // Adding height offset of the buttons container\n  }\n  div[class^="RestAPIDatasourceForm__RestApiForm-"] {\n    padding-top: 0px;\n    height: 100%;\n  }\n\n  .t--cancel-edit-datasource {\n    display: none;\n  }\n']))),ce=(0,v.ZP)(M.hz)($||($=(0,s.Z)(["\n  width: 100%;\n"]))),ue=(0,v.ZP)(M.fe)(ee||(ee=(0,s.Z)(["\n  overflow-y: hidden;\n"]))),pe=v.ZP.div(ne||(ne=(0,s.Z)(["\n  display: flex;\n  flex-direction: column;\n  width: 256px;\n"]))),he=function(e){return e.SUCCESS="success",e.APPSMITH_ERROR="appsmith_error",e}(he||{});var ve=function(){var e=(0,p.I0)(),n=(0,p.v9)(g.YZ),t=(0,p.v9)(u.xz),i=(0,p.v9)(u.su),r=(0,p.v9)((function(e){return(0,U.uZ)(e,t)})),o=(0,p.v9)(g._K).map((function(e){return e.id})),s=(0,p.v9)(g.ft),l=(0,c.useMemo)((function(){return s.filter((function(e){return o.includes(e.id)}))}),[s,o]),h=(0,p.v9)(g.Zs),v=d()(h,"id"),C=(0,p.v9)(g.$A),S=(0,p.v9)(g.S5),P=(0,p.v9)(g.xO),T=JSON.parse(_.ZP.getItem("importedAppPendingInfo")||"null"),k=(0,p.v9)(V.cW),Z=(0,p.v9)(B.BF),D=(0,p.v9)(U.Q8),A=(0,I.aM)(),G=A.get("appId")||(T?T.appId:null),Y=A.get("pageId")||(T?T.pageId:null),q=A.get("datasourceId")||(T?T.datasourceId:null),W="true"===A.get("importForGit")||!!T,K=(0,c.useState)(q),J=(0,a.Z)(K,2),Q=J[0],X=J[1],$=(0,c.useState)(Y),ee=(0,a.Z)($,2),ne=ee[0],ve=ee[1],fe=(0,c.useState)(G),me=(0,a.Z)(fe,2),ge=me[0],xe=me[1],be=(0,c.useState)(null),ye=(0,a.Z)(be,2),Ie=ye[0],Ce=ye[1],Se=(0,c.useState)(W),Pe=(0,a.Z)(Se,2),Te=Pe[0],ke=Pe[1],Ee=(0,c.useState)(!1),je=(0,a.Z)(Ee,2),we=je[0],Ze=je[1],De=l.find((function(e){return e.id===q})),Ae=null===De||void 0===De?void 0:De.name,Ne=null===De||void 0===De?void 0:De.workspaceId,Fe=function(e){if(!e||0===h.length)return!1;var n=v[e.pluginId];return(0,j.IU)(null===n||void 0===n?void 0:n.packageName)?(0,j.q)(e,n,D.id):!!e.datasourceStorages&&(0,E.GB)(e,D.id)},Re=te({pageId:ne,appId:ge}),Oe=Re.editorId,_e=Re.editorType,Me=Re.editorURL,He=Re.missingDsCredentialsDescription,Le=Re.parentEntityId,ze=Re.skipMessage;if(Te){ke(!1);var Ue=A.get("response_status"),Ve=A.get("display_message");if(Ue!==he.SUCCESS){var Be,Ge=Ue===he.APPSMITH_ERROR?m.sSc:m.rqT;H.A.show(Ve||Ge,{kind:"error"}),y.ZP.logEvent("DATASOURCE_AUTH_COMPLETE",{applicationId:G,datasourceId:q,environmentId:D.id,environmentName:D.name,pageId:Y,oAuthPassOrFailVerdict:Ue,workspaceId:Ne,datasourceName:Ae,pluginName:null===(Be=v[(null===Ie||void 0===Ie?void 0:Ie.pluginId)||""])||void 0===Be?void 0:Be.name,editorType:_e})}else q&&(e((0,O.gx)()),e((0,O.$z)(q)))}(0,c.useEffect)((function(){if(Z&&W&&q&&G){var n=Z.find((function(e){return e.id===G}));if(n){e((0,x.F5)({editorId:Oe||"",workspaceId:n.workspaceId})),e((0,x.di)({isOpen:!0}));var t=(0,F.Sf)(n.pages);i?ve(i):t&&ve(t),l.length||e({type:R.Ep.FETCH_UNCONFIGURED_DATASOURCE_LIST,payload:{applicationId:Oe,workspaceId:n.workspaceId}})}}}),[k,W,Z]);var Ye=(0,p.v9)(u.Xj);(0,c.useEffect)((function(){n&&t&&r&&e((0,x.ED)({workspaceId:t}))}),[t,n,r]),(0,c.useEffect)((function(){n&&(P&&Ze(!1),S&&Ze(!0))}),[n,S,P]);var qe=function(e){var n=!1;e&&(n=(n=e.target.classList.contains("reconnect-datasource-modal"))||function(e){var n=document.querySelector(".ads-v2-modal__content-header-close-button");return!!n&&n.contains(e)}(e.target),n&&(We(),"app"===window.location.pathname.split("/")[1]&&Me&&(window.location.href=Me)))},We=function(){_.ZP.setItem("importedAppPendingInfo","null"),e((0,x.di)({isOpen:!1})),e((0,x.F5)({editorId:Oe||"",workspaceId:""})),e((0,x.fA)("")),e((0,x.Rt)()),X(""),e((0,ie.Ux)())},Ke=(0,c.useCallback)((function(e){var n;Ze(!1),X(e.id),Ce(e),y.ZP.logEvent("RECONNECTING_DATASOURCE_ITEM_CLICK",{id:e.id,name:e.name,pluginName:null===(n=v[e.id])||void 0===n?void 0:n.name,isConfigured:Fe(e)})}),[]);(0,c.useEffect)((function(){var e;Ye&&l&&!Q&&!W&&(Ce(l[0]),X(null!==(e=l[0].id)&&void 0!==e?e:""))}),[Ye,Q,W]);var Je=(0,p.v9)(u.Mn);(0,c.useEffect)((function(){if(!W){var e,n=null===Je||void 0===Je||null===(e=Je.pages)||void 0===e?void 0:e.find((function(e){return e.isDefault}));n&&(ve(n.id),xe(null===Je||void 0===Je?void 0:Je.id))}}),[Je,W]),(0,c.useEffect)((function(){if(n&&!we){var e=Q,t=l.filter((function(e){return!Fe(e)}));if(t.length>0){if(e)if(t.findIndex((function(n){return n.id===e}))>-1)return;var i=t[0];if(i&&i.id){X(i.id),Ce(i);var r={appId:ge,pageId:ne,datasourceId:i.id};_.ZP.setItem("importedAppPendingInfo",JSON.stringify(r))}}else Me&&0===t.length&&l.length>0&&(_.ZP.setItem("importSuccess","true"),_.ZP.setItem("importedAppPendingInfo","null"),window.open(Me,"_self"))}}),[l,Me,n,we,W]);var Qe=l.map((function(e){return(0,w.jsx)(N,{currentEnvironment:D.id,ds:e,onClick:function(){Ke(e)},plugin:v[e.pluginId],selected:e.id===Q},e.id)})),Xe=Ye&&!C&&!Fe(Ie);return(0,w.jsx)(M.u_,{open:n,children:(0,w.jsxs)(ce,{"data-testId":"reconnect-datasource-modal",onClick:qe,onEscapeKeyDown:We,onInteractOutside:qe,overlayClassName:"reconnect-datasource-modal",children:[(0,w.jsx)(M.xB,{children:"Reconnect datasources"}),(0,w.jsx)(ue,{children:(0,w.jsxs)(oe,{children:[(0,w.jsx)(f.Dx,{children:(0,m.tnH)(m.SwX)}),(0,w.jsx)(L.x,{children:He}),(0,w.jsxs)(ae,{children:[(0,w.jsx)(se,{children:Qe}),(0,w.jsxs)(de,{children:[Xe&&(0,w.jsx)(b.ZP,{applicationId:Oe,datasourceId:Q,fromImporting:!0,isInsideReconnectModal:!0,pageId:Le}),Fe(Ie)&&(0,w.jsxs)(re,{className:"t--message-container",children:[(0,w.jsx)(le,{children:(0,m.tnH)(m.sHT)}),(0,w.jsx)(le,{children:(0,m.tnH)(m.nrS)})]})]}),(0,w.jsxs)(pe,{children:[(0,w.jsx)(L.x,{kind:"heading-s",children:(0,m.tnH)(m.YE5)}),(0,w.jsx)(L.x,{children:(0,m.tnH)(m.sZF)}),(0,w.jsx)(z.z,{UNSAFE_width:"100px",className:"t--skip-to-application-btn mt-5",kind:"secondary",onClick:function(){y.ZP.logEvent("RECONNECTING_SKIP_TO_APPLICATION_BUTTON_CLICK"),_.ZP.setItem("importedAppPendingInfo","null"),Me&&(window.location.href=Me),We()},renderAs:"a",size:"md",children:ze})]})]})]})})]})})}},81193:function(e,n,t){t.d(n,{Dx:function(){return u},T:function(){return p},W2:function(){return h}});var i,r,o,a,s,l=t(30168),d=t(62608),c=t(69434),u=d.ZP.p(i||(i=(0,l.Z)(["\n  ",";\n  /* margin: ","; */\n  color: var(--ads-v2-color-fg-emphasis);\n"])),(0,c.z8)("h2"),(function(e){return"".concat(e.theme.spaces[7],"px 0px ").concat(e.theme.spaces[3],"px 0px")})),p=(d.ZP.div(r||(r=(0,l.Z)(["\n  margin-top: 8px;\n  ",";\n  color: var(--ads-v2-color-fg);\n"])),(0,c.z8)("p1")),d.ZP.span(o||(o=(0,l.Z)(["\n  ",";\n"])),(0,c.z8)("p1")),d.ZP.div(a||(a=(0,l.Z)(["\n  margin: ",";\n"])),(function(e){return e.horizontal?"0px ".concat(e.theme.spaces[e.size],"px "):"".concat(e.theme.spaces[e.size],"px 0px")}))),h=d.ZP.div(s||(s=(0,l.Z)(["\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  overflow-y: scroll;\n  overflow-x: hidden;\n  scrollbar-width: none;\n\n  &::-webkit-scrollbar-thumb {\n    background-color: transparent;\n  }\n\n  &::-webkit-scrollbar {\n    width: 0;\n  }\n"])))},65258:function(e,n,t){t.d(n,{Z:function(){return w}});var i,r,o,a,s,l=t(29439),d=t(50390),c=t(30168),u=t(62608),p=u.ZP.div(i||(i=(0,c.Z)(["\n  border: 1px solid var(--ads-v2-color-border);\n  margin-bottom: 24px;\n  cursor: pointer;\n  background-color: var(--ads-v2-color-bg);\n  border-radius: var(--ads-v2-border-radius);\n\n  &:hover {\n    border-color: var(--ads-v2-color-border-emphasis);\n  }\n"]))),h=u.ZP.div(r||(r=(0,c.Z)(["\n  overflow: hidden;\n  margin-bottom: ","px;\n"])),(function(e){return e.theme.spaces[9]})),v=u.ZP.img(o||(o=(0,c.Z)(["\n  object-fit: cover;\n  width: 100%;\n  height: 236px;\n"]))),f=u.ZP.div(a||(a=(0,c.Z)(["\n  padding: 0 25px 16px 25px;\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n\n  .title {\n    color: var(--ads-v2-color-fg-emphasis-plus);\n    overflow: hidden;\n    display: -webkit-box;\n    -webkit-line-clamp: 1;\n    -webkit-box-orient: vertical;\n  }\n  .description {\n    margin-top: ","px;\n    color: var(--ads-v2-color-fg);\n    font-size: 15px;\n    height: 65px;\n    overflow: hidden;\n    display: -webkit-box;\n    -webkit-line-clamp: 4;\n    -webkit-box-orient: vertical;\n  }\n"])),(function(e){return e.theme.spaces[2]})),m=u.ZP.div(s||(s=(0,c.Z)(["\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  margin-top: ","px;\n"])),(function(e){return e.theme.spaces[9]})),g=t(31205),x=t(42957),b=t(56626),y=t(53454),I=t(26844),C=t(27421),S=t(95765),P=t(61894),T=t(26444),k=t(61666),E=t(24375),j=t(62559),w=function(e){var n=e.buildingBlock,t=n.description,i=n.id,r=n.screenshotUrls,o=n.title,a=(0,d.useState)(!1),s=(0,l.Z)(a,2),c=s[0],u=s[1],w=(0,S.v9)(P.jg),Z=(0,S.v9)(P.nC);return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(E.Z,{onClose:function(e){null===e||void 0===e||e.stopPropagation(),u(!1)},showForkModal:c,templateId:i}),(0,j.jsxs)(p,{onClick:function(){e.onClick?e.onClick(i):y.C.push((0,T.eg)({id:i}))},children:[(0,j.jsx)(h,{className:"image-wrapper",children:(0,j.jsx)(v,{alt:k.ws,src:r[0]})}),(0,j.jsxs)(f,{children:[(0,j.jsx)(g.x,{className:"title",kind:"heading-m",renderAs:"h1",children:o}),(0,j.jsx)(g.x,{className:"description",kind:"body-m",children:t}),(0,j.jsx)(m,{children:!e.hideForkTemplateButton&&(0,j.jsx)(x.u,{content:(0,I.tnH)(I.$zi),placement:C.Ly.BOTTOM,children:(0,j.jsx)(b.z,{className:"t--fork-template fork-button","data-testid":"t--fork-building-block",isDisabled:!!Z||!!w,isIconButton:!0,isLoading:e.onForkTemplateClick&&w===i,onClick:function(n){e.onForkTemplateClick?(n.preventDefault(),n.stopPropagation(),e.onForkTemplateClick(e.buildingBlock)):(n.stopPropagation(),u(!0))},size:"sm",startIcon:"plus"})})})]})]})]})}},91539:function(e,n,t){var i,r=t(30168),o=(t(50390),t(95765)),a=t(11989),s=t(62608),l=t(56617),d=t(62559),c=(0,s.ZP)(l.V)(i||(i=(0,r.Z)(["\n  .image {\n    height: 13px;\n    margin-right: 4px;\n    display: inline-block;\n  }\n\n  .ads-v2-text {\n    display: flex;\n    align-items: center;\n  }\n\n  .plugin-name {\n    flex-shrink: 0;\n  }\n"])));n.Z=function(e){var n=(0,o.v9)((function(n){return(0,a.ak)(n,e.pluginPackageName)}));return n?(0,d.jsxs)(c,{isClosable:!1,size:"md",children:[(0,d.jsx)("img",{className:"image",src:n.iconLocation}),(0,d.jsx)("span",{className:"plugin-name",children:n.name})]}):null}},24375:function(e,n,t){var i=t(29439),r=t(50390),o=t(32003),a=t(22994),s=t(56626),l=t(95765),d=t(61894),c=t(75016),u=t(26844),p=t(62559);n.Z=function(e){var n=e.children,t=e.onClose,h=e.showForkModal,v=e.templateId,f=(0,l.v9)(d.$t),m=(0,r.useState)(f[0]),g=(0,i.Z)(m,2),x=g[0],b=g[1],y=(0,l.v9)(d.ix),I=(0,l.I0)();return(0,p.jsxs)(p.Fragment,{children:[n,(0,p.jsx)(o.u_,{onOpenChange:function(e){e||y||t()},open:h,children:(0,p.jsxs)(o.hz,{style:{width:"640px"},children:[(0,p.jsx)(o.xB,{children:(0,u.tnH)(u.agG)}),(0,p.jsx)(o.fe,{style:{overflow:"unset",paddingBottom:"4px"},children:(0,p.jsx)(a.P,{dropdownMatchSelectWidth:!0,getPopupContainer:function(e){return e.parentNode},onSelect:function(e,n){return b(n)},options:f,placeholder:(0,u.tnH)(u.sst),value:x})}),(0,p.jsxs)(o.mz,{children:[(0,p.jsx)(s.z,{isDisabled:y,kind:"secondary",onClick:t,size:"md",children:(0,u.tnH)(u.n14)}),(0,p.jsx)(s.z,{className:"t--fork-template-button",isLoading:y,onClick:function(){I((0,c.DI)(v,x.value))},size:"md",children:(0,u.tnH)(u.QkF)})]})]})})]})}},55360:function(e,n,t){t.d(n,{Z:function(){return N}});var i,r,o,a,s,l,d=t(30168),c=t(62608),u=t(29439),p=t(50390),h=t(53454),v=t(42957),f=t(31205),m=t(56626),g=t(24375),x=t(91539),b=t(26844),y=t(26444),I=t(27421),C=t(61894),S=t(95765),P=t(62559),T=c.ZP.div(i||(i=(0,d.Z)(["\n  border: 1px solid var(--ads-v2-color-border);\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  margin-bottom: 24px;\n  cursor: pointer;\n  background-color: var(--ads-v2-color-bg);\n  border-radius: var(--ads-v2-border-radius);\n\n  &:hover {\n    border-color: var(--ads-v2-color-border-emphasis);\n  }\n"]))),k=c.ZP.div(r||(r=(0,d.Z)(["\n  padding: ","px;\n  overflow: hidden;\n"])),(function(e){return e.theme.spaces[9]})),E=c.ZP.img(o||(o=(0,d.Z)(["\n  object-fit: contain;\n  width: 100%;\n  height: 236px;\n"]))),j=c.ZP.div(a||(a=(0,d.Z)(["\n  padding: 0 25px 0 25px;\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n\n  .title {\n    color: var(--ads-v2-color-fg-emphasis-plus);\n  }\n  .categories {\n    // font-weight: normal;\n    color: var(--ads-v2-color-fg-emphasis);\n    margin-top: ","px;\n  }\n  .description {\n    margin-top: ","px;\n    color: var(--ads-v2-color-fg);\n  }\n"])),(function(e){return e.theme.spaces[1]}),(function(e){return e.theme.spaces[2]})),w=c.ZP.div(s||(s=(0,d.Z)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-top: ","px;\n  padding: 0 25px 20px 25px;\n"])),(function(e){return e.theme.spaces[7]})),Z=c.ZP.div(l||(l=(0,d.Z)(["\n  display: flex;\n  flex-wrap: wrap;\n  gap: ","px;\n"])),(function(e){return e.theme.spaces[1]}));function D(e){var n=e.template,t=n.datasources,i=n.description,r=n.functions,o=n.id,a=n.screenshotUrls,s=n.title,l=(0,p.useState)(!1),d=(0,u.Z)(l,2),c=d[0],D=d[1],A=(0,S.v9)(C.jg),N=(0,S.v9)(C.nC);return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(g.Z,{onClose:function(e){null===e||void 0===e||e.stopPropagation(),D(!1)},showForkModal:c,templateId:o}),(0,P.jsxs)(T,{className:e.className,"data-testid":"template-card",onClick:function(){e.onClick?e.onClick(o):h.C.push((0,y.eg)({id:o}))},children:[(0,P.jsx)(k,{className:"image-wrapper",children:(0,P.jsx)(E,{alt:"Template Thumbnail",src:a[0]})}),(0,P.jsxs)(j,{className:"template-content",children:[(0,P.jsx)(v.u,{content:s,placement:"right",children:(0,P.jsx)(f.x,{className:"title","data-testid":"template-content-title",kind:"heading-m",renderAs:"h1",children:s})}),(0,P.jsx)(f.x,{className:"categories",kind:"heading-s",renderAs:"h4",children:r.join(" \u2022 ")}),(0,P.jsx)(f.x,{className:"description",kind:"body-m",children:i})]}),(0,P.jsxs)(w,{children:[(0,P.jsx)(Z,{children:t.map((function(e){return(0,P.jsx)(x.Z,{pluginPackageName:e},e)}))}),!e.hideForkTemplateButton&&(0,P.jsx)(v.u,{content:(0,b.tnH)(b.Ly5),placement:I.Ly.BOTTOM,children:(0,P.jsx)(m.z,{className:"t--fork-template fork-button","data-testid":"t--fork-template-button",isDisabled:N||!!A,isIconButton:!0,isLoading:e.onForkTemplateClick&&A===o,onClick:function(n){e.onForkTemplateClick?(n.preventDefault(),n.stopPropagation(),e.onForkTemplateClick(e.template)):(n.stopPropagation(),D(!0))},size:"sm",startIcon:"plus"})})]})]})]})}var A,N=(0,c.ZP)(D)(A||(A=(0,d.Z)(["\n  && {\n    .title {\n      overflow: hidden;\n      display: -webkit-box;\n      -webkit-line-clamp: 1;\n      -webkit-box-orient: vertical;\n    }\n    .categories {\n      overflow: hidden;\n      display: -webkit-box;\n      -webkit-line-clamp: 1;\n      -webkit-box-orient: vertical;\n    }\n    .description {\n      height: 85px;\n      overflow: hidden;\n      display: -webkit-box;\n      -webkit-line-clamp: 4;\n      -webkit-box-orient: vertical;\n    }\n  }\n\n  .image-wrapper {\n    & > img {\n      object-position: top;\n      height: 180px;\n    }\n  }\n"])))},21520:function(e,n,t){var i,r,o,a=t(30168),s=t(26844),l=t(31205),d=t(59551),c=t(50390),u=t(62608),p=t(34631),h=t(55360),v=t(65258),f=t(61666),m=t(62559),g=u.ZP.div(i||(i=(0,a.Z)(["\n  padding-right: 132px;\n  padding-left: 132px;\n"]))),x=u.ZP.div(r||(r=(0,a.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n"]))),b=u.ZP.div(o||(o=(0,a.Z)(["\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\n  grid-gap: 16px;\n  margin-top: ","px;\n"])),(function(e){return e.theme.spaces[12]}));n.Z=function(e){var n=(0,c.useCallback)((function(n){e.onClick(n)}),[e.onClick]);return e.similarTemplates.length?(0,m.jsx)(g,{className:e.className,children:(0,m.jsxs)(p.$0,{children:[(0,m.jsxs)(x,{children:[(0,m.jsx)(l.x,{kind:"heading-m",renderAs:"h4",children:(0,s.tnH)(s.FJc)}),(0,m.jsx)(d.r,{endIcon:"view-all",onClick:e.onBackPress,children:(0,s.tnH)(s.KRq)})]}),(0,m.jsx)(b,{children:e.similarTemplates.map((function(t){return t.functions.includes(f.eH)?(0,m.jsx)(v.Z,{buildingBlock:t,hideForkTemplateButton:e.isForkingEnabled,onClick:function(){return n(t)},onForkTemplateClick:e.onFork},t.id):(0,m.jsx)(h.Z,{hideForkTemplateButton:e.isForkingEnabled,onClick:function(){return n(t)},onForkTemplateClick:e.onFork,template:t},t.id)}))})]})}):null}},34631:function(e,n,t){t.d(n,{$0:function(){return T},ZP:function(){return w}});var i,r=t(30168),o=t(50390),a=t(62608),s=t(91539),l=t(31205),d=t(26844),c=t(95765),u=t(33230),p=t(81591),h=t(9010),v=t(62559),f=a.ZP.div(i||(i=(0,r.Z)(["\n  display: inline-flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n"])));var m,g,x,b,y,I,C=function(e){var n=e.widgetType,t=(0,c.v9)(p.bl),i=(0,o.useMemo)((function(){return t.find((function(e){return e.type===n}))}),[n,t.length]);return(0,v.jsxs)(f,{children:[(0,v.jsx)(u.a,{children:(0,v.jsx)("img",{className:"w-5 h-5",src:(0,h.V)(null===i||void 0===i?void 0:i.icon)})}),(0,v.jsx)(l.x,{kind:"body-m",children:null===i||void 0===i?void 0:i.displayName})]})},S=a.ZP.div(m||(m=(0,r.Z)(["\n  display: flex;\n  gap: ","px;\n  margin-top: ","px;\n"])),(function(e){return e.theme.spaces[17]}),(function(e){return e.theme.spaces[15]})),P=a.ZP.div(g||(g=(0,r.Z)(["\n  flex: 1;\n"]))),T=a.ZP.div(x||(x=(0,r.Z)(["\n  padding-top: ","px;\n\n  .section-content {\n    margin-top: ","px;\n  }\n\n  .template-fork-button {\n    margin-top: ","px;\n  }\n\n  .datasource-note {\n    margin-top: ","px;\n  }\n"])),(function(e){return e.theme.spaces[12]}),(function(e){return e.theme.spaces[3]}),(function(e){return e.theme.spaces[7]}),(function(e){return e.theme.spaces[5]})),k=(0,a.ZP)(s.Z)(b||(b=(0,r.Z)(["\n  padding: ",";\n  .image {\n    height: 25px;\n    width: 25px;\n  }\n"])),(function(e){return"".concat(e.theme.spaces[4],"px ").concat(e.theme.spaces[10],"px")})),E=a.ZP.div(y||(y=(0,r.Z)(["\n  display: flex;\n  flex-wrap: wrap;\n  gap: ","px;\n"])),(function(e){return e.theme.spaces[12]})),j=a.ZP.div(I||(I=(0,r.Z)(["\n  display: flex;\n  flex-wrap: wrap;\n  gap: ","px;\n"])),(function(e){return e.theme.spaces[4]}));var w=function(e){var n=e.template;return(0,v.jsxs)(S,{children:[(0,v.jsxs)(P,{children:[(0,v.jsxs)(T,{children:[(0,v.jsx)(l.x,{kind:"heading-m",renderAs:"h4",children:(0,d.tnH)(d.mDT)}),(0,v.jsx)("div",{className:"section-content",children:(0,v.jsx)(l.x,{kind:"body-m",children:n.description})})]}),(0,v.jsxs)(T,{children:[(0,v.jsx)(l.x,{kind:"heading-m",renderAs:"h4",children:(0,d.tnH)(d.cy5)}),(0,v.jsx)("div",{className:"section-content",children:(0,v.jsx)(l.x,{kind:"body-m",children:n.functions.join(" \u2022 ")})})]}),(0,v.jsxs)(T,{children:[(0,v.jsx)(l.x,{kind:"heading-m",renderAs:"h4",children:(0,d.tnH)(d.J3g)}),(0,v.jsx)("div",{className:"section-content",children:(0,v.jsx)(l.x,{kind:"body-m",children:n.useCases.join(" \u2022 ")})})]})]}),(0,v.jsxs)(P,{children:[(0,v.jsxs)(T,{children:[(0,v.jsx)(l.x,{kind:"heading-m",renderAs:"h4",children:(0,d.tnH)(d.OJQ)}),(0,v.jsxs)("div",{className:"section-content",children:[(0,v.jsx)(j,{children:n.datasources.map((function(e){return(0,v.jsx)(k,{pluginPackageName:e},e)}))}),(0,v.jsxs)("div",{className:"datasource-note",children:[(0,v.jsx)(l.x,{kind:"body-m",children:(0,d.tnH)(d.a9e)}),(0,v.jsx)(l.x,{kind:"body-m",children:(0,d.tnH)(d.Zmw)})]})]})]}),(0,v.jsxs)(T,{children:[(0,v.jsx)(l.x,{kind:"heading-m",renderAs:"h4",children:(0,d.tnH)(d.SgE)}),(0,v.jsx)("div",{className:"section-content",children:(0,v.jsx)(E,{children:n.widgets.map((function(e){return(0,v.jsx)(C,{widgetType:e},e)}))})})]})]})]})}},40705:function(e,n,t){t.d(n,{q:function(){return N}});var i,r,o=t(26844),a=(t(50390),t(95765)),s=t(61894),l=t(65258),d=t(30168),c=t(62608),u=t(73049),p=t(56626),h=t(42688),v=t(77271),f=t(62559),m=c.ZP.div(i||(i=(0,d.Z)(["\n  border: 1px solid var(--ads-v2-color-border);\n  border-radius: var(--ads-v2-border-radius);\n  display: flex;\n  flex-direction: column;\n  padding: ","px;\n  background-color: var(--ads-v2-color-bg-subtle);\n  margin-bottom: ","px;\n  cursor: pointer;\n\n  &:hover {\n    border-color: var(--ads-v2-color-border-emphasis);\n  }\n\n  .title {\n    color: var(--ads-v2-color-fg-emphasis-plus);\n    margin-top: ","px;\n  }\n\n  .description {\n    color: var(--ads-v2-color-fg);\n    margin-top: ","px;\n  }\n\n  .button {\n    margin-top: ","px;\n    max-width: 229px;\n  }\n"])),(function(e){return e.theme.spaces[11]}),(function(e){return e.theme.spaces[12]}),(function(e){return e.theme.spaces[9]}),(function(e){return e.theme.spaces[2]}),(function(e){return e.theme.spaces[8]})),g=c.ZP.img(r||(r=(0,d.Z)(["\n  height: 168px;\n  object-fit: cover;\n  border-radius: var(--ads-v2-border-radius);\n"])));var x,b,y,I,C=function(e){var n=e.isBuildingBlock?(0,o.tnH)(o.tFk):(0,o.tnH)(o.OOV);return(0,f.jsxs)(m,{children:[(0,f.jsx)(g,{src:h.Z}),(0,f.jsx)(u.ZP,{className:"title",type:u.yG.H1,children:(0,o.tnH)(o.mFF)}),(0,f.jsx)(u.ZP,{className:"description",type:u.yG.P1,children:(0,o.tnH)(o.rS2)}),(0,f.jsx)(p.z,{className:"button",onClick:function(){v.ZP.logEvent("REQUEST_NEW_TEMPLATE"),window.open("https://app.appsmith.com/app/request-templates/request-list-6241c12fc99df2369931a714")},size:"md",children:n})]})},S=t(84520),P=t(61666),T=t(91331),k=t(31205),E=c.ZP.div(x||(x=(0,d.Z)(["\n  ","\n\n  margin-right: 24px;\n  .grid {\n    display: flex;\n  }\n\n  .grid_column {\n    padding: 11px;\n  }\n"])),(function(e){return!e.isModalLayout&&"\n  padding: 48px;\n  border: 1px solid var(--ads-v2-color-border);\n  border-radius: var(--ads-v2-border-radius);\n  background-color: var(--ads-v2-color-bg);\n  "})),j=(0,c.ZP)(k.x)(b||(b=(0,d.Z)(["\n  font-weight: 600;\n  margin-bottom: 4px;\n"]))),w=c.ZP.div(y||(y=(0,d.Z)(["\n  width: 100%;\n  height: 1px;\n  background-color: var(--ads-v2-color-bg-emphasis);\n  margin: 48px 0;\n"]))),Z=c.ZP.div(I||(I=(0,d.Z)(["\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\n  grid-gap: 16px;\n  margin-top: ","px;\n"])),(function(e){return e.theme.spaces[9]})),D=t(55360);function A(e){var n,t,i,r=(0,a.v9)(s.bc),d=1===(null===r||void 0===r||null===(n=r.functions)||void 0===n?void 0:n.length)&&r.functions[0]===P.eH,c=!(null!==r&&void 0!==r&&null!==(t=r.functions)&&void 0!==t&&t.includes(P.eH)),u=1===(null===r||void 0===r||null===(i=r.functions)||void 0===i?void 0:i.length)&&r.functions[0]===P.A9,p=!c||u,h=!d&&p,v=e.templates.filter((function(e){return e.functions[0]===P.eH})),m=e.templates.filter((function(e){return e.functions[0]!==P.eH}));return(0,f.jsxs)(E,{isModalLayout:e.isModalLayout,children:[!d&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(j,{kind:"heading-m",children:"Use case templates"}),(0,f.jsxs)(Z,{children:[m.map((function(n){return(0,f.jsx)(D.Z,{hideForkTemplateButton:!e.isForkingEnabled,onClick:e.onTemplateClick,onForkTemplateClick:e.onForkTemplateClick,template:n},n.id)})),(0,f.jsx)(C,{})]})]}),h&&(0,f.jsx)(w,{}),p&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(j,{kind:"heading-m",children:(0,o.tnH)(o.J3Z.buildingBlocksTitle)}),(0,f.jsxs)(Z,{children:[v.map((function(n){return(0,f.jsx)(l.Z,{buildingBlock:n,hideForkTemplateButton:!e.isForkingEnabled,onClick:e.onTemplateClick,onForkTemplateClick:e.onForkTemplateClick},n.id)})),d&&(0,f.jsx)(C,{isBuildingBlock:!0})]})]})]})}function N(e){var n=(0,a.v9)(T.ZO),t=(0,a.v9)(s._p),i=n||t,r=e.filterWithAllowPageImport||!1,o=(0,a.v9)(s.YU).filter((function(e){return!r||!!e.allowPageImport}));return i?(0,f.jsx)(S.Z,{text:"Loading templates"}):(0,f.jsx)(A,{isForkingEnabled:e.isForkingEnabled,isModalLayout:e.isModalLayout,onForkTemplateClick:e.onForkTemplateClick,onTemplateClick:e.onTemplateClick,templates:o})}},97801:function(e,n,t){t.d(n,{Z:function(){return H}});var i,r,o,a,s,l,d,c=t(93433),u=t(1413),p=t(3143),h=t.n(p),v=t(26844),f=t(75016),m=t(54138),g=t(8631),x=t(50390),b=t(95765),y=t(61894),I=t(77271),C=t(30168),S=t(62608),P=t(31205),T=S.ZP.div(i||(i=(0,C.Z)(["\n  overflow: auto;\n  height: calc(100vh - ","px);\n\n  .more {\n    padding-left: ","px;\n    cursor: pointer;\n  }\n\n  .hide {\n    visibility: hidden;\n  }\n"])),(function(e){return e.theme.homePage.header+256}),(function(e){return e.theme.spaces[11]})),k=S.ZP.div(r||(r=(0,C.Z)(["\n  padding: 8px;\n  background-color: ",";\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 4px;\n  border-radius: var(--ads-v2-border-radius);\n  cursor: pointer;\n"])),(function(e){return e.selected?"var(--ads-v2-color-bg)":"inherit"})),E=(0,S.ZP)(P.x)(o||(o=(0,C.Z)(["\n  font-size: 14px;\n  font-weight: 400;\n"]))),j=(0,S.ZP)(P.x)(a||(a=(0,C.Z)(["\n  margin-top: 12px;\n  padding-left: 8px;\n  text-transform: capitalize;\n  font-size: 14px;\n  font-weight: 500;\n\n  &.title {\n    color: var(--ads-v2-color-fg-emphasis);\n  }\n"]))),w=S.ZP.div(s||(s=(0,C.Z)(["\n  margin-top: ","px;\n"])),(function(e){return e.theme.spaces[2]})),Z=S.ZP.div(l||(l=(0,C.Z)(["\n  padding-bottom: ","px;\n"])),(function(e){return e.theme.spaces[13]-11})),D=S.ZP.div(d||(d=(0,C.Z)(["\n  margin-bottom: ","px;\n  .templates-search {\n    max-width: 250px;\n  }\n  ","\n"])),(function(e){return e.theme.spaces[11]}),(function(e){return e.sticky&&"position: sticky;\n  top: 0;\n  position: -webkit-sticky;\n  z-index: 1;\n  background-color: var(--ads-v2-color-bg);\n  padding: var(--ads-v2-spaces-7);\n  margin-left: 0; \n  "})),A=t(91331),N=t(62559),F="All Templates",R="All",O=function(e){var n=e.item,t=e.onSelectFilter,i=e.selectedFilter;return(0,N.jsxs)(k,{onClick:function(){var e,r=i?"remove":"add",o=null!==(e=null===n||void 0===n?void 0:n.value)&&void 0!==e?e:n.label;t(o,r),"add"===r&&I.ZP.logEvent("TEMPLATE_FILTER_SELECTED",{filter:o})},selected:i,children:[(0,N.jsx)(E,{"data-testid":"t--templates-filter-item",kind:"body-m",children:n.label}),i&&(0,N.jsx)(m.J,{color:"var(--ads-v2-color-bg-brand-secondary-emphasis-plus)","data-testid":"t--templates-filter-item-selected-icon",name:"check-line",size:"md"})]})};function _(e){var n=["All Templates","Building Blocks","Customer Support","Operations","Human Resources (HR)","Finance","Sales","Marketing","Other"],t=e.map((function(e){return e.label===R?(0,u.Z)((0,u.Z)({},e),{},{label:F}):e}));return t.sort((function(e,t){var i=n.indexOf(e.label),r=n.indexOf(t.label);return-1!==i&&-1!==r?i-r:-1!==i?-1:-1!==r?1:e.label.localeCompare(t.label)})),t}var M=function(e){var n,t=e.filterList,i=e.label,r=e.selectedFilters,o=(0,x.useMemo)((function(){return{functions:"categories"}}),[]),a=(0,b.I0)(),s=function(e,n){var t=e===R||e===F;if("add"===n){var o=t?[R]:[].concat((0,c.Z)(r.filter((function(e){return e!==R}))),[e]);a((0,f.FR)(i,o))}else{if(t)return;var s=1===r.length?[R]:r.filter((function(n){return n!==e}));a((0,f.FR)(i,s))}},l=function(e){var n;return r.includes(null!==(n=null===e||void 0===e?void 0:e.value)&&void 0!==n?n:e.label)};return(0,N.jsxs)(Z,{children:[(0,N.jsxs)(j,{kind:"body-m",renderAs:"h4",children:["".concat(null!==(n=o[i])&&void 0!==n?n:i," "),!!r.length&&"(".concat(r.length,")")]}),(0,N.jsx)(w,{children:_(t).map((function(e){return(0,N.jsx)(O,{item:e,onSelectFilter:s,selectedFilter:l(e)},e.label)}))})]})},H=function(e){var n=(0,b.I0)(),t=(0,b.v9)(y.G6),i=(0,b.v9)(y.bc),r=(0,b.v9)(y.fD),o=(0,b.v9)(A.ZO),a=(0,b.v9)(y._p),s=o||a,l=h()((function(e){n((0,f.zU)(e)),I.ZP.logEvent("TEMPLATES_SEARCH_INPUT_EVENT",{query:e})}),500);return(0,x.useEffect)((function(){e.initialFilters?Object.keys(e.initialFilters).forEach((function(t){n((0,f.FR)(t,e.initialFilters[t]))})):n((0,f.FR)("functions",["All"]))}),[e.initialFilters]),(0,N.jsxs)(T,{className:"filter-wrapper",children:[(0,N.jsx)(D,{sticky:e.stickySearchBar,children:(0,N.jsx)("div",{className:"templates-search",children:(0,N.jsx)(g.M,{"aria-label":(0,v.tnH)(v.ESz),"data-testid":"t--application-search-input",isDisabled:!1,onChange:l,placeholder:(0,v.tnH)(v.ESz),value:r})})}),!s&&Object.keys(t).map((function(e){var n;return(0,N.jsx)(M,{filterList:t[e],label:e,selectedFilters:null!==(n=i[e])&&void 0!==n?n:[]},e)}))]})}},37746:function(e,n,t){t.d(n,{zb:function(){return B},qe:function(){return V},Tc:function(){return K},ZP:function(){return J}});var i,r,o=t(30168),a=t(50390),s=t(62608),l=t(44922),d=t(70971),c=t(95765),u=t(72352),p=t(61894),h=t(75016),v=t(53454),f=t(76104),m=t(86125),g=t(77271),x=t(603),b=t(34631),y=t(21520),I=t(26444),C=t(26844),S=t(31205),P=t(59551),T=t(56626),k=t(96587),E=t(24375),j=t(61666),w=t(62559),Z=s.ZP.div(i||(i=(0,o.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n"]))),D=(0,s.ZP)(S.x)(r||(r=(0,o.Z)(["\n  display: inline-block;\n  color: var(--ads-v2-color-fg-emphasis-plus);\n"]))),A="showForkTemplateModal";var N,F,R,O,_,M,H=function(e){var n=e.handleBackPress,t=e.onClickUseTemplate,i=e.showBack,r=e.templateId,o=(0,c.v9)(p.d5),a=(0,k.aM)(),s=(0,c.v9)(p.$t),l=(0,c.v9)(p.nC),d=(0,c.v9)(p.ix),u=null!==o&&void 0!==o&&o.functions.includes(j.eH)?C.$zi:C.Ly5;return(0,w.jsxs)(Z,{children:[i&&(0,w.jsx)(P.r,{"data-testid":"t--template-view-goback",onClick:function(){n?n():v.C.goBack()},startIcon:"arrow-left-line",children:(0,C.tnH)(C.xmV)}),(0,w.jsx)(D,{kind:"heading-l",renderAs:"h1",children:null===o||void 0===o?void 0:o.title}),(0,w.jsx)("section",{children:!!s.length&&(0,w.jsx)(E.Z,{onClose:function(){v.C.replace("".concat((0,I.eg)({id:r})))},showForkModal:!!a.get(A),templateId:r,children:(0,w.jsx)(T.z,{className:"template-fork-button","data-testid":"template-fork-button",isLoading:t&&(l||d),onClick:function(){t?t(r):v.C.replace("".concat((0,I.eg)({id:r}),"?").concat(A,"=true"))},size:"md",startIcon:"fork-2",children:(0,C.tnH)(u)})})})]})},L=t(30067),z=s.ZP.div(N||(N=(0,o.Z)(["\n  overflow: auto;\n  position: relative;\n  width: 100%;\n"]))),U=s.ZP.div(F||(F=(0,o.Z)(["\n  ","\n  padding-top: var(--ads-v2-spaces-7);\n  padding-bottom: 80px;\n  background-color: var(--ads-v2-color-bg);\n"])),(function(e){return e.isModalLayout?"padding-right: 12px; padding-left: 12px;":"padding-right: 132px; padding-left: 132px;"})),V=s.ZP.div(R||(R=(0,o.Z)(["\n  border-radius: 16px;\n  margin-top: ","px;\n\n  iframe {\n    border-radius: 0px 0px 16px 16px;\n    box-shadow:\n      0px 20px 24px -4px rgba(16, 24, 40, 0.1),\n      0px 8px 8px -4px rgba(16, 24, 40, 0.04);\n    width: 100%;\n    height: 734px;\n  }\n"])),(function(e){return e.theme.spaces[12]})),B=s.ZP.div(O||(O=(0,o.Z)(["\n  width: 100%;\n  background-color: var(--ads-v2-color-bg-muted);\n  border-radius: 8px 8px 0px 0px;\n  display: flex;\n  gap: ","px;\n  height: 41px;\n  align-items: center;\n  padding-left: ","px;\n\n  .round {\n    height: 12px;\n    width: 12px;\n    border-radius: var(--ads-v2-border-radius-circle);\n  }\n\n  .red {\n    background-color: ",";\n  }\n  .yellow {\n    background-color: ",";\n  }\n  .green {\n    background-color: ",";\n  }\n"])),(function(e){return e.theme.spaces[3]}),(function(e){return e.theme.spaces[5]}),m.w.PERSIMMON,m.w.SUNGLOW_2,m.w.MOUNTAIN_MEADOW),G=s.ZP.div(_||(_=(0,o.Z)(["\n  display: flex;\n  margin-top: ","px;\n  height: calc(100vh - ","px);\n"])),(function(e){return e.theme.homePage.header}),(function(e){return e.theme.homePage.header})),Y=s.ZP.div(M||(M=(0,o.Z)(["\n  height: 100vh;\n  width: 100%;\n  .title-placeholder {\n    margin-top: ","px;\n    height: 28px;\n    width: 100%;\n  }\n  .iframe-placeholder {\n    margin-top: ","px;\n    height: 500px;\n    width: 100%;\n  }\n"])),(function(e){return e.theme.spaces[11]}),(function(e){return e.theme.spaces[12]}));function q(){return(0,w.jsx)(Y,{children:(0,w.jsxs)(U,{children:[(0,w.jsx)("div",{className:"title-placeholder ".concat(l.Ms1)}),(0,w.jsx)("div",{className:"iframe-placeholder ".concat(l.Ms1)})]})})}function W(){return(0,w.jsx)(u.Z,{})}function K(e){var n=e.handleBackPress,t=e.handleSimilarTemplateClick,i=e.isModalLayout,r=void 0!==i&&i,o=e.onClickUseTemplate,s=e.showBack,l=void 0===s||s,d=e.showSimilarTemplate,u=void 0===d||d,m=e.similarTemplatesClassName,C=void 0===m?"":m,S=e.templateId,P=(0,c.I0)(),T=(0,c.v9)((function(e){return e.ui.templates.similarTemplates})),k=(0,c.v9)(p.IT),E=(0,c.v9)(p.$t),j=(0,c.v9)(p.d5),Z=(0,a.useRef)(null);(0,a.useEffect)((function(){(0,L.x)()}),[]),(0,a.useEffect)((function(){P((0,h.ej)(S)),P((0,h.q3)(S)),Z.current&&Z.current.scrollTo({top:0})}),[S]);return k?(0,w.jsx)(q,{}):j?(0,w.jsxs)(z,{ref:Z,children:[(0,w.jsx)(x.Z,{}),(0,w.jsxs)(U,{isModalLayout:r,children:[(0,w.jsx)(H,{handleBackPress:n,onClickUseTemplate:o,showBack:l,templateId:S}),(0,w.jsxs)(V,{children:[(0,w.jsxs)(B,{children:[(0,w.jsx)("div",{className:"round red"}),(0,w.jsx)("div",{className:"round yellow"}),(0,w.jsx)("div",{className:"round green"})]}),(0,w.jsx)("iframe",{src:j.appUrl,width:"100%"})]}),(0,w.jsx)(b.ZP,{template:j})]}),u&&(0,w.jsx)(y.Z,{className:C,isForkingEnabled:!!E.length,onBackPress:function(){n?n():v.C.push(f.VU)},onClick:function(e){g.ZP.logEvent("SIMILAR_TEMPLATE_CLICK",{from:{id:null===j||void 0===j?void 0:j.id,name:null===j||void 0===j?void 0:j.title},to:{id:e.id,name:e.title}}),t?t(e):v.C.push((0,I.eg)({id:e.id}))},similarTemplates:T})]}):(0,w.jsx)(W,{})}var J=function(){var e=(0,d.UO)();return(0,w.jsx)(G,{children:(0,w.jsx)(K,{templateId:e.templateId})})}},84520:function(e,n,t){var i,r=t(30168),o=(t(50390),t(62608)),a=t(86542),s=t(31205),l=t(62559),d=o.ZP.div(i||(i=(0,r.Z)(["\n  height: 85vh;\n  justify-content: center;\n  align-items: center;\n  display: flex;\n  flex-direction: column;\n  gap: ","px;\n"])),(function(e){return e.theme.spaces[9]}));n.Z=function(e){return(0,l.jsxs)(d,{children:[(0,l.jsx)(a.$,{size:"lg"}),(0,l.jsx)(s.x,{kind:"heading-m",children:e.text})]})}}}]);
//# sourceMappingURL=7568.1b4bd7e4.chunk.js.map