"use strict";(self.webpackChunkappsmith=self.webpackChunkappsmith||[]).push([[6147],{56777:function(t,e,r){r.d(e,{o:function(){return v}});var n=r(93433),o=r(15671),i=r(43144),a=r(82963),s=r(78814),c=r(61120),u=r(97326),l=r(60136),p=r(75284),h=r(9831),d=r(19198),y=r(99712),f=r(73198);var v=function(t){function e(t,r,n){var i,l,p,h,v;return(0,o.Z)(this,e),p=this,h=e,v=[n],h=(0,c.Z)(h),(l=(0,a.Z)(p,(0,s.Z)()?Reflect.construct(h,v||[],(0,c.Z)(p).constructor):h.apply(p,v))).endpoint=t,l.opts=r||{},l.started=!1,l.timeoutHandle=null,l.aborted=!1,l.harvest=new d.M(l.sharedContext),(0,y.L)(l.unload.bind((0,u.Z)(l))),null===(i=l.sharedContext)||void 0===i||i.ee.on(f.wO.RESET,(function(){return l.runHarvest({forceNoRetry:!0})})),l}return(0,l.Z)(e,t),(0,i.Z)(e,[{key:"unload",value:function(){this.aborted||(this.opts.onUnload&&this.opts.onUnload(),this.runHarvest({unload:!0}))}},{key:"startTimer",value:function(t,e){this.interval=t,this.started=!0,this.scheduleHarvest(null!=e?e:this.interval)}},{key:"stopTimer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.aborted=t,this.started=!1,this.timeoutHandle&&clearTimeout(this.timeoutHandle)}},{key:"scheduleHarvest",value:function(t,e){var r=this;this.timeoutHandle||(null==t&&(t=this.interval),this.timeoutHandle=setTimeout((function(){r.timeoutHandle=null,r.runHarvest(e)}),1e3*t))}},{key:"runHarvest",value:function(t){var e=this;if(!this.aborted){var r,o,i=function(r){null!==t&&void 0!==t&&t.forceNoRetry&&(r.retry=!1),e.onHarvestFinished(t,r)},a=[];if(this.opts.getPayload){if(!(r=p.qD({isFinalHarvest:null===t||void 0===t?void 0:t.unload})))return!1;var s=!(null!==t&&void 0!==t&&t.unload)&&r===p.Be;if(!(o=this.opts.getPayload({retry:s,opts:t})))return void(this.started&&this.scheduleHarvest());o="[object Array]"===Object.prototype.toString.call(o)?o:[o],a.push.apply(a,(0,n.Z)(o))}var c=function(t){return e.harvest.sendX(t)};a.length?c=this.opts.raw?function(t){return e.harvest._send(t)}:function(t){return e.harvest.send(t)}:a.push(void 0),a.forEach((function(n){c({endpoint:e.endpoint,payload:n,opts:t,submitMethod:r,cbFinished:i,customUrl:e.opts.customUrl,raw:e.opts.raw})})),this.started&&this.scheduleHarvest()}}},{key:"onHarvestFinished",value:function(t,e){if(this.opts.onFinished&&this.opts.onFinished(e),e.sent&&e.retry){var r=e.delay||this.opts.retryDelay;this.started&&r?(clearTimeout(this.timeoutHandle),this.timeoutHandle=null,this.scheduleHarvest(r,t)):!this.started&&r&&this.scheduleHarvest(r,t)}}}]),e}(h.w)},99712:function(t,e,r){r.d(e,{L:function(){return c}});var n=r(37762),o=r(98841),i=r(63711),a=r(73087);if(i.v6){i._A.cleanupTasks=[];var s=i._A.close;i._A.close=function(){var t,e=(0,n.Z)(i._A.cleanupTasks);try{for(e.s();!(t=e.n()).done;){(0,t.value)()}}catch(r){e.e(r)}finally{e.f()}s()}}function c(t){i.il?((0,a.N)(t,!0),(0,o.bP)("pagehide",t)):i.v6&&i._A.cleanupTasks.push(t)}},6437:function(t,e,r){r.r(e),r.d(e,{Aggregate:function(){return U}});var n=r(29439),o=r(15671),i=r(43144),a=r(82963),s=r(78814),c=r(61120),u=r(97326),l=r(60136),p=r(4942),h=r(19435),d=r(68295),y=r(56777),f=r(12088),v=r(63711),w="React",b="NextJS",g="Vue",m="NuxtJS",S="Angular",O="AngularUniversal",k="Svelte",M="SvelteKit",P="Preact",j="PreactSSR",Z="AngularJS",x="Backbone",R="Ember",T="Meteor",_="Zepto",A="Jquery",H="MooTools",C="Qwik",E="Electron";function D(){if(!v.il)return[];var t=[];try{(function(){try{return Object.prototype.hasOwnProperty.call(window,"React")||Object.prototype.hasOwnProperty.call(window,"ReactDOM")||Object.prototype.hasOwnProperty.call(window,"ReactRedux")||document.querySelector("[data-reactroot], [data-reactid]")||function(){for(var t=document.querySelectorAll("body > div"),e=0;e<t.length;e++)if(Object.prototype.hasOwnProperty.call(t[e],"_reactRootContainer"))return!0}()}catch(t){return!1}})()&&(t.push(w),function(){try{return Object.prototype.hasOwnProperty.call(window,"next")&&Object.prototype.hasOwnProperty.call(window.next,"version")}catch(t){return!1}}()&&t.push(b)),function(){try{return Object.prototype.hasOwnProperty.call(window,"Vue")}catch(t){return!1}}()&&(t.push(g),function(){try{return Object.prototype.hasOwnProperty.call(window,"$nuxt")&&Object.prototype.hasOwnProperty.call(window.$nuxt,"nuxt")}catch(t){return!1}}()&&t.push(m)),function(){try{return Object.prototype.hasOwnProperty.call(window,"ng")||document.querySelector("[ng-version]")}catch(t){return!1}}()&&(t.push(S),function(){try{return document.querySelector("[ng-server-context]")}catch(t){return!1}}()&&t.push(O)),function(){try{return Object.prototype.hasOwnProperty.call(window,"__svelte")}catch(t){return!1}}()&&(t.push(k),function(){try{return!!Object.keys(window).find((function(t){return t.startsWith("__sveltekit")}))}catch(t){return!1}}()&&t.push(M)),function(){try{return Object.prototype.hasOwnProperty.call(window,"preact")}catch(t){return!1}}()&&(t.push(P),function(){try{return document.querySelector('script[type="__PREACT_CLI_DATA__"]')}catch(t){return!1}}()&&t.push(j)),function(){try{return Object.prototype.hasOwnProperty.call(window,"angular")||document.querySelector(".ng-binding, [ng-app], [data-ng-app], [ng-controller], [data-ng-controller], [ng-repeat], [data-ng-repeat]")||document.querySelector('script[src*="angular.js"], script[src*="angular.min.js"]')}catch(t){return!1}}()&&t.push(Z),Object.prototype.hasOwnProperty.call(window,"Backbone")&&t.push(x),Object.prototype.hasOwnProperty.call(window,"Ember")&&t.push(R),Object.prototype.hasOwnProperty.call(window,"Meteor")&&t.push(T),Object.prototype.hasOwnProperty.call(window,"Zepto")&&t.push(_),Object.prototype.hasOwnProperty.call(window,"jQuery")&&t.push(A),Object.prototype.hasOwnProperty.call(window,"MooTools")&&t.push(H),Object.prototype.hasOwnProperty.call(window,"qwikevents")&&t.push(C),function(){try{return"object"===typeof navigator&&"string"===typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0}catch(t){return!1}}()&&t.push(E)}catch(e){}return t}var G=r(12293),F=r(34370),N=r(96878),q=r(98841),B=r(14415),I=r(21782);var U=function(t){function e(t,r){var i,l,p,h;return(0,o.Z)(this,e),l=this,p=e,h=[t,r,f.t9],p=(0,c.Z)(p),(i=(0,a.Z)(l,(0,s.Z)()?Reflect.construct(p,h||[],(0,c.Z)(l).constructor):p.apply(l,h))).waitForFlags(["err"]).then((function(t){(0,n.Z)(t,1)[0]?(new y.o("jserrors",{onUnload:function(){return i.unload()}},(0,u.Z)(i)).harvest.on("jserrors",(function(){return{body:i.aggregator.take(["cm","sm"])}})),i.drain()):(i.blocked=!0,(0,I.o5)(i.agentIdentifier,i.featureName))})),(0,d.X)(f.xS,i.storeSupportabilityMetrics.bind((0,u.Z)(i)),i.featureName,i.ee),(0,d.X)(f.vz,i.storeEventMetrics.bind((0,u.Z)(i)),i.featureName,i.ee),i.singleChecks(),i.eachSessionChecks(),i}return(0,l.Z)(e,t),(0,i.Z)(e,[{key:"storeSupportabilityMetrics",value:function(t,e){if(!this.blocked){var r=f.mY,n={name:t};this.aggregator.storeMetric(r,t,n,e)}}},{key:"storeEventMetrics",value:function(t,e){if(!this.blocked){var r=f.gF,n={name:t};this.aggregator.store(r,t,n,e)}}},{key:"singleChecks",value:function(){var t=this,e=(0,h.OP)(this.agentIdentifier),r=e.distMethod,n=e.loaderType,o=(0,h.P_)(this.agentIdentifier),i=o.proxy,a=o.privacy,s=o.page_view_timing;if(n&&this.storeSupportabilityMetrics("Generic/LoaderType/".concat(n,"/Detected")),r&&this.storeSupportabilityMetrics("Generic/DistMethod/".concat(r,"/Detected")),v.il){var c;this.storeSupportabilityMetrics("Generic/Runtime/Browser/Detected");var u=null===(c=document)||void 0===c||null===(c=c.currentScript)||void 0===c?void 0:c.nonce;u&&""!==u&&this.storeSupportabilityMetrics("Generic/Runtime/Nonce/Detected"),(0,N.KB)((function(){D().forEach((function(e){t.storeSupportabilityMetrics("Framework/"+e+"/Detected")}))})),a.cookies_enabled||this.storeSupportabilityMetrics("Config/SessionTracking/Disabled"),s.long_task&&this.storeSupportabilityMetrics("Config/LongTask/Enabled")}else v.v6?this.storeSupportabilityMetrics("Generic/Runtime/Worker/Detected"):this.storeSupportabilityMetrics("Generic/Runtime/Unknown/Detected");(0,G.V)()&&this.storeSupportabilityMetrics("Generic/FileProtocol/Detected");var l=(0,F.$c)(this.agentIdentifier);l.length>0&&this.storeSupportabilityMetrics("Generic/Obfuscate/Detected"),l.length>0&&!(0,F.Ng)(l)&&this.storeSupportabilityMetrics("Generic/Obfuscate/Invalid"),i.assets&&this.storeSupportabilityMetrics("Config/AssetsUrl/Changed"),i.beacon&&this.storeSupportabilityMetrics("Config/BeaconUrl/Changed")}},{key:"eachSessionChecks",value:function(){var t=this;v.il&&(0,q.bP)("pageshow",(function(e){null!==e&&void 0!==e&&e.persisted&&t.storeSupportabilityMetrics("Generic/BFCache/PageRestored")}))}},{key:"unload",value:function(){var t=this;try{var e,r=function(t){return o.includes(t.initiatorType)};if(this.resourcesSent)return;this.resourcesSent=!0;var n=(0,h.OP)(this.agentIdentifier),o=["beacon","fetch","xmlhttprequest"],i=["nr-data.net","newrelic.com","nr-local.net","localhost"];if(((null===(e=performance)||void 0===e?void 0:e.getEntriesByType("resource"))||[]).forEach((function(e){var n;n=e,i.some((function(t){return n.name.indexOf(t)>=0}))?r(e)?t.storeSupportabilityMetrics("Generic/Resources/Ajax/Internal"):t.storeSupportabilityMetrics("Generic/Resources/Non-Ajax/Internal"):r(e)?t.storeSupportabilityMetrics("Generic/Resources/Ajax/External"):t.storeSupportabilityMetrics("Generic/Resources/Non-Ajax/External")})),n.ptid&&this.storeSupportabilityMetrics("PageSession/Feature/SessionTrace/DurationMs",Math.round(performance.now())),"undefined"!==typeof performance){var a=performance.getEntriesByType("mark"),s=performance.getEntriesByType("measure");this.storeSupportabilityMetrics("Generic/Performance/Mark/Seen",a.length),this.storeSupportabilityMetrics("Generic/Performance/Measure/Seen",s.length)}}catch(c){}}}]),e}(B.m);(0,p.Z)(U,"featureName",f.t9)}}]);
//# sourceMappingURL=metrics-aggregate.454aa114.chunk.js.map