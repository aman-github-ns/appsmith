"use strict";(self.webpackChunkappsmith=self.webpackChunkappsmith||[]).push([[6348],{56777:function(t,e,n){n.d(e,{o:function(){return g}});var i=n(93433),r=n(15671),a=n(43144),o=n(82963),s=n(78814),u=n(61120),l=n(97326),d=n(60136),c=n(75284),v=n(9831),f=n(19198),h=n(99712),p=n(73198);var g=function(t){function e(t,n,i){var a,d,c,v,g;return(0,r.Z)(this,e),c=this,v=e,g=[i],v=(0,u.Z)(v),(d=(0,o.Z)(c,(0,s.Z)()?Reflect.construct(v,g||[],(0,u.Z)(c).constructor):v.apply(c,g))).endpoint=t,d.opts=n||{},d.started=!1,d.timeoutHandle=null,d.aborted=!1,d.harvest=new f.M(d.sharedContext),(0,h.L)(d.unload.bind((0,l.Z)(d))),null===(a=d.sharedContext)||void 0===a||a.ee.on(p.wO.RESET,(function(){return d.runHarvest({forceNoRetry:!0})})),d}return(0,d.Z)(e,t),(0,a.Z)(e,[{key:"unload",value:function(){this.aborted||(this.opts.onUnload&&this.opts.onUnload(),this.runHarvest({unload:!0}))}},{key:"startTimer",value:function(t,e){this.interval=t,this.started=!0,this.scheduleHarvest(null!=e?e:this.interval)}},{key:"stopTimer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.aborted=t,this.started=!1,this.timeoutHandle&&clearTimeout(this.timeoutHandle)}},{key:"scheduleHarvest",value:function(t,e){var n=this;this.timeoutHandle||(null==t&&(t=this.interval),this.timeoutHandle=setTimeout((function(){n.timeoutHandle=null,n.runHarvest(e)}),1e3*t))}},{key:"runHarvest",value:function(t){var e=this;if(!this.aborted){var n,r,a=function(n){null!==t&&void 0!==t&&t.forceNoRetry&&(n.retry=!1),e.onHarvestFinished(t,n)},o=[];if(this.opts.getPayload){if(!(n=c.qD({isFinalHarvest:null===t||void 0===t?void 0:t.unload})))return!1;var s=!(null!==t&&void 0!==t&&t.unload)&&n===c.Be;if(!(r=this.opts.getPayload({retry:s,opts:t})))return void(this.started&&this.scheduleHarvest());r="[object Array]"===Object.prototype.toString.call(r)?r:[r],o.push.apply(o,(0,i.Z)(r))}var u=function(t){return e.harvest.sendX(t)};o.length?u=this.opts.raw?function(t){return e.harvest._send(t)}:function(t){return e.harvest.send(t)}:o.push(void 0),o.forEach((function(i){u({endpoint:e.endpoint,payload:i,opts:t,submitMethod:n,cbFinished:a,customUrl:e.opts.customUrl,raw:e.opts.raw})})),this.started&&this.scheduleHarvest()}}},{key:"onHarvestFinished",value:function(t,e){if(this.opts.onFinished&&this.opts.onFinished(e),e.sent&&e.retry){var n=e.delay||this.opts.retryDelay;this.started&&n?(clearTimeout(this.timeoutHandle),this.timeoutHandle=null,this.scheduleHarvest(n,t)):!this.started&&n&&this.scheduleHarvest(n,t)}}}]),e}(v.w)},84320:function(t,e,n){n.d(e,{AG:function(){return u},FX:function(){return d},n1:function(){return c},uR:function(){return l}});var i=n(44567),r=n(17610),a=n(34370),o=Object.prototype.hasOwnProperty,s=64;function u(t,e,n){return t||0===t||""===t?e(t)+(n?",":""):"!"}function l(t,e){return e?Math.floor(t).toString(36):void 0===t||0===t?"":Math.floor(t).toString(36)}function d(t){var e=Object.hasOwnProperty("create")?Object.create(null):{},n=0;return function(i){if("undefined"===typeof i||""===i)return"";var r=new a.RR({agentIdentifier:t});i=String(i),r.shouldObfuscate()&&(i=r.obfuscateString(i));return o.call(e,i)?l(e[i],!0):(e[i]=n++,function(t){return"'"+t.replace(v,"\\$1")}(i))}}function c(t,e){var n=[];return(0,i.D)(t,(function(t,i){if(!(n.length>=s)){var a,o=5;switch(t=e(t),typeof i){case"object":i?a=e((0,r.P)(i)):o=9;break;case"number":o=6,a=i%1?i:i+".";break;case"boolean":o=i?7:8;break;case"undefined":o=9;break;default:a=e(i)}n.push([o,t+(a?","+a:"")])}})),n}var v=/([,\\;])/g},99712:function(t,e,n){n.d(e,{L:function(){return u}});var i=n(37762),r=n(98841),a=n(63711),o=n(73087);if(a.v6){a._A.cleanupTasks=[];var s=a._A.close;a._A.close=function(){var t,e=(0,i.Z)(a._A.cleanupTasks);try{for(e.s();!(t=e.n()).done;){(0,t.value)()}}catch(n){e.e(n)}finally{e.f()}s()}}function u(t){a.il?((0,o.N)(t,!0),(0,r.bP)("pagehide",t)):a.v6&&a._A.cleanupTasks.push(t)}},6291:function(t,e,n){n.d(e,{P:function(){return s}});var i=n(63711),r=n(33559),a=n(2052),o=n(99038),s=new a.U(r.S.TIME_TO_FIRST_BYTE);if(i.il&&"undefined"!==typeof PerformanceNavigationTiming&&!i.Tt)(0,o.mr)((function(t){var e=t.value,n=t.attribution;s.isValid||s.update({value:e,attrs:{navigationEntry:n.navigationEntry}})}));else if(!s.isValid){var u={};for(var l in(null===i._A||void 0===i._A||null===(d=i._A.performance)||void 0===d?void 0:d.timing)||{}){var d,c;u[l]=Math.max((null===i._A||void 0===i._A||null===(c=i._A.performance)||void 0===c?void 0:c.timing[l])-i.cv,0)}s.update({value:u.responseStart,attrs:{navigationEntry:u}})}},98409:function(t,e,n){n.r(e),n.d(e,{Aggregate:function(){return G}});var i=n(93433),r=n(15671),a=n(43144),o=n(82963),s=n(78814),u=n(61120),l=n(97326),d=n(60136),c=n(72346),v=n(4942),f=n(86033),h=n(84320),p=n(44567),g=n(56777),m=n(68295),y=n(38450),T=n(19435),b=n(64045),S=n(30733),Z=n(14415),k=n(99038),_=n(33559),w=n(2052),A=n(63711),H=new w.U(_.S.CUMULATIVE_LAYOUT_SHIFT,(function(t){return t}));A.il&&(0,k.mw)((function(t){var e=t.value,n=t.attribution,i={metricId:t.id,largestShiftTarget:n.largestShiftTarget,largestShiftTime:n.largestShiftTime,largestShiftValue:n.largestShiftValue,loadState:n.loadState};H.update({value:e,attrs:i})}),{reportAllChanges:!0});var E=n(89596),U=new w.U(_.S.FIRST_INPUT_DELAY);A.il&&(0,k.Fu)((function(t){var e=t.value,n=t.attribution;if(!A.iS&&!U.isValid){var i={type:n.eventType,fid:Math.round(e),eventTarget:n.eventTarget,loadState:n.loadState};U.update({value:n.eventTime,attrs:i})}}));var F=n(69480),I=new w.U(_.S.INTERACTION_TO_NEXT_PAINT);A.il&&(0,k.Yn)((function(t){var e=t.value,n=t.attribution,i={metricId:t.id,eventTarget:n.eventTarget,eventType:n.eventType,eventTime:n.eventTime,loadState:n.loadState};I.update({value:e,attrs:i})}));var N=n(69292),C=new w.U(_.S.LARGEST_CONTENTFUL_PAINT);A.il&&(0,k.NO)((function(t){var e=t.value,n=t.attribution;if(!A.iS&&!C.isValid){var i,r,a=n.lcpEntry;if(a)i={size:a.size,eid:a.id,element:n.element,timeToFirstByte:n.timeToFirstByte,resourceLoadDelay:n.resourceLoadDelay,resourceLoadTime:n.resourceLoadTime,elementRenderDelay:n.elementRenderDelay},n.url&&(i.elUrl=(0,N.f)(n.url)),null!==(r=a.element)&&void 0!==r&&r.tagName&&(i.elTag=a.element.tagName);C.update({value:e,attrs:i})}}));var P=n(6291),R=n(1413),O=n(99712),L=new w.U(_.S.LONG_TASK);if(A.il){var M,D=function(t){t.forEach((function(t){L.update({value:t.duration,attrs:(0,R.Z)({ltFrame:t.name,ltStart:t.startTime,ltCtr:t.attribution[0].containerType},"window"!==t.attribution[0].containerType&&{ltCtrSrc:t.attribution[0].containerSrc,ltCtrId:t.attribution[0].containerId,ltCtrName:t.attribution[0].containerName})})}))};try{PerformanceObserver.supportedEntryTypes.includes("longtask")&&(M=new PerformanceObserver((function(t){Promise.resolve().then((function(){D(t.getEntries())}))}))).observe({type:"longtask",buffered:!0})}catch(X){}M&&(0,O.L)((function(){D(M.takeRecords())}),!0)}var j=n(73087);var V=new WeakMap,G=function(t){function e(t,n){var i,a,d,v,h;(0,r.Z)(this,e),d=this,v=e,h=[t,n,b.t],v=(0,u.Z)(v),i=(0,o.Z)(d,(0,s.Z)()?Reflect.construct(v,h||[],(0,u.Z)(d).constructor):v.apply(d,h)),(0,c.Z)((0,l.Z)(i),V,{writable:!0,value:function(t){var e=t.name,n=t.value,r=t.attrs;i.addTiming(e,n,r)}}),a=(0,l.Z)(i),i.timings=[],i.timingsSent=[],i.curSessEndRecorded=!1,!0===(0,T.Mt)(i.agentIdentifier,"page_view_timing.long_task")&&L.subscribe((0,f.Z)((0,l.Z)(i),V)),(0,m.X)("docHidden",(function(t){return i.endCurrentSession(t)}),i.featureName,i.ee),(0,m.X)("winPagehide",(function(t){return i.recordPageUnload(t)}),i.featureName,i.ee);var p=(0,T.Mt)(i.agentIdentifier,"page_view_timing.initialHarvestSeconds")||10,y=(0,T.Mt)(i.agentIdentifier,"page_view_timing.harvestTimeSeconds")||30;return i.waitForFlags([]).then((function(){F.U.subscribe((0,f.Z)((0,l.Z)(i),V)),E.y.subscribe((0,f.Z)((0,l.Z)(i),V)),U.subscribe((0,f.Z)((0,l.Z)(i),V)),C.subscribe((0,f.Z)((0,l.Z)(i),V)),I.subscribe((0,f.Z)((0,l.Z)(i),V)),P.P.subscribe((function(t){var e=t.attrs;i.addTiming("load",Math.round(e.navigationEntry.loadEventEnd))})),(0,j.N)((function(){var t=H.current,e=t.name,n=t.value,r=t.attrs;void 0!==n&&i.addTiming(e,1e3*n,r)}),!0);var t=new g.o("events",{onFinished:function(){var t;return(t=a).onHarvestFinished.apply(t,arguments)},getPayload:function(){var t;return(t=a).prepareHarvest.apply(t,arguments)}},(0,l.Z)(i));t.startTimer(y,p),i.drain()})),i}return(0,d.Z)(e,t),(0,a.Z)(e,[{key:"endCurrentSession",value:function(t){this.curSessEndRecorded||(this.addTiming("pageHide",t,null),this.curSessEndRecorded=!0)}},{key:"recordPageUnload",value:function(t){this.addTiming("unload",t,null),this.endCurrentSession(t)}},{key:"addTiming",value:function(t,e,n){(function(t){var e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;if(!e)return;e.type&&(t["net-type"]=e.type);e.effectiveType&&(t["net-etype"]=e.effectiveType);e.rtt&&(t["net-rtt"]=e.rtt);e.downlink&&(t["net-dlink"]=e.downlink)})(n=n||{}),t!==_.S.CUMULATIVE_LAYOUT_SHIFT&&H.current.value>=0&&(n.cls=H.current.value),this.timings.push({name:t,value:e,attrs:n}),(0,y.p)("pvtAdded",[t,e,n],void 0,S.D.sessionTrace,this.ee)}},{key:"onHarvestFinished",value:function(t){var e;t.retry&&this.timingsSent.length>0&&((e=this.timings).unshift.apply(e,(0,i.Z)(this.timingsSent)),this.timingsSent=[])}},{key:"appendGlobalCustomAttributes",value:function(t){var e=t.attrs||{},n=(0,T.C5)(this.agentIdentifier).jsAttributes||{},i=["size","eid","cls","type","fid","elTag","elUrl","net-type","net-etype","net-rtt","net-dlink"];(0,p.D)(n,(function(t,n){i.indexOf(t)<0&&(e[t]=n)}))}},{key:"prepareHarvest",value:function(t){if(0!==this.timings.length){var e=this.getPayload(this.timings);if(t.retry)for(var n=0;n<this.timings.length;n++)this.timingsSent.push(this.timings[n]);return this.timings=[],{body:{e:e}}}}},{key:"getPayload",value:function(t){for(var e=(0,h.FX)(this.agentIdentifier),n="bel.6;",i=0;i<t.length;i++){var r=t[i];n+="e,",n+=e(r.name)+",",n+=(0,h.AG)(r.value,h.uR,!1)+",",this.appendGlobalCustomAttributes(r);var a=(0,h.n1)(r.attrs,e);a&&a.length>0&&(n+=(0,h.uR)(a.length)+";"+a.join(";")),i+1<t.length&&(n+=";")}return n}}]),e}(Z.m);(0,v.Z)(G,"featureName",b.t)}}]);
//# sourceMappingURL=page_view_timing-aggregate.c4241ae8.chunk.js.map