{"version":3,"file":"static/js/uppy.90314db9.chunk.js","mappings":"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","sources":["../node_modules/@uppy/companion-client/lib/AuthError.js","../node_modules/@uppy/companion-client/lib/Provider.js","../node_modules/@uppy/companion-client/lib/RequestClient.js","../node_modules/@uppy/companion-client/lib/SearchProvider.js","../node_modules/@uppy/companion-client/lib/Socket.js","../node_modules/@uppy/companion-client/lib/index.js","../node_modules/@uppy/companion-client/lib/tokenStorage.js","../node_modules/@uppy/google-drive/lib/DriveProviderViews.js","../node_modules/@uppy/google-drive/lib/index.js","../node_modules/@uppy/onedrive/lib/index.js","../node_modules/@uppy/provider-views/lib/Breadcrumbs.js","../node_modules/@uppy/provider-views/lib/Browser.js","../node_modules/@uppy/provider-views/lib/CloseWrapper.js","../node_modules/@uppy/provider-views/lib/Filter.js","../node_modules/@uppy/provider-views/lib/FooterActions.js","../node_modules/@uppy/provider-views/lib/Item/components/GridLi.js","../node_modules/@uppy/provider-views/lib/Item/components/ItemIcon.js","../node_modules/@uppy/provider-views/lib/Item/components/ListLi.js","../node_modules/@uppy/provider-views/lib/Item/index.js","../node_modules/@uppy/provider-views/lib/ItemList.js","../node_modules/@uppy/provider-views/lib/Loader.js","../node_modules/@uppy/provider-views/lib/ProviderView/AuthView.js","../node_modules/@uppy/provider-views/lib/ProviderView/Header.js","../node_modules/@uppy/provider-views/lib/ProviderView/ProviderView.js","../node_modules/@uppy/provider-views/lib/ProviderView/User.js","../node_modules/@uppy/provider-views/lib/ProviderView/index.js","../node_modules/@uppy/provider-views/lib/SearchProviderView/Header.js","../node_modules/@uppy/provider-views/lib/SearchProviderView/InputView.js","../node_modules/@uppy/provider-views/lib/SearchProviderView/SearchProviderView.js","../node_modules/@uppy/provider-views/lib/SearchProviderView/index.js","../node_modules/@uppy/provider-views/lib/SharedHandler.js","../node_modules/@uppy/provider-views/lib/index.js","../node_modules/@uppy/url/lib/UrlUI.js","../node_modules/@uppy/url/lib/index.js","../node_modules/@uppy/url/lib/utils/forEachDroppedOrPastedUrl.js","../node_modules/@uppy/utils/lib/NetworkError.js","../node_modules/@uppy/utils/lib/canvasToBlob.js","../node_modules/@uppy/utils/lib/fetchWithNetworkError.js","../node_modules/@uppy/utils/lib/getFileTypeExtension.js","../node_modules/@uppy/utils/lib/remoteFileObjToLocal.js","../node_modules/@uppy/webcam/lib/CameraIcon.js","../node_modules/@uppy/webcam/lib/CameraScreen.js","../node_modules/@uppy/webcam/lib/PermissionsScreen.js","../node_modules/@uppy/webcam/lib/RecordButton.js","../node_modules/@uppy/webcam/lib/RecordingLength.js","../node_modules/@uppy/webcam/lib/SnapshotButton.js","../node_modules/@uppy/webcam/lib/VideoSourceSelect.js","../node_modules/@uppy/webcam/lib/formatSeconds.js","../node_modules/@uppy/webcam/lib/index.js","../node_modules/@uppy/webcam/lib/supportsMediaRecorder.js","../node_modules/qs-stringify/index.js"],"sourcesContent":["'use strict';\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nfunction _wrapNativeSuper(Class) { var _cache = typeof Map === \"function\" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== \"function\") { throw new TypeError(\"Super expression must either be null or a function\"); } if (typeof _cache !== \"undefined\") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }\n\nfunction _construct(Parent, args, Class) { if (_isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _isNativeFunction(fn) { return Function.toString.call(fn).indexOf(\"[native code]\") !== -1; }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nvar AuthError = /*#__PURE__*/function (_Error) {\n  _inheritsLoose(AuthError, _Error);\n\n  function AuthError() {\n    var _this;\n\n    _this = _Error.call(this, 'Authorization required') || this;\n    _this.name = 'AuthError';\n    _this.isAuthError = true;\n    return _this;\n  }\n\n  return AuthError;\n}( /*#__PURE__*/_wrapNativeSuper(Error));\n\nmodule.exports = AuthError;","'use strict';\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nvar qsStringify = require('qs-stringify');\n\nvar RequestClient = require('./RequestClient');\n\nvar tokenStorage = require('./tokenStorage');\n\nvar _getName = function _getName(id) {\n  return id.split('-').map(function (s) {\n    return s.charAt(0).toUpperCase() + s.slice(1);\n  }).join(' ');\n};\n\nmodule.exports = /*#__PURE__*/function (_RequestClient) {\n  _inheritsLoose(Provider, _RequestClient);\n\n  function Provider(uppy, opts) {\n    var _this;\n\n    _this = _RequestClient.call(this, uppy, opts) || this;\n    _this.provider = opts.provider;\n    _this.id = _this.provider;\n    _this.name = _this.opts.name || _getName(_this.id);\n    _this.pluginId = _this.opts.pluginId;\n    _this.tokenKey = \"companion-\" + _this.pluginId + \"-auth-token\";\n    _this.companionKeysParams = _this.opts.companionKeysParams;\n    _this.preAuthToken = null;\n    return _this;\n  }\n\n  var _proto = Provider.prototype;\n\n  _proto.headers = function headers() {\n    var _this2 = this;\n\n    return Promise.all([_RequestClient.prototype.headers.call(this), this.getAuthToken()]).then(function (_ref) {\n      var headers = _ref[0],\n          token = _ref[1];\n      var authHeaders = {};\n\n      if (token) {\n        authHeaders['uppy-auth-token'] = token;\n      }\n\n      if (_this2.companionKeysParams) {\n        authHeaders['uppy-credentials-params'] = btoa(JSON.stringify({\n          params: _this2.companionKeysParams\n        }));\n      }\n\n      return _extends({}, headers, authHeaders);\n    });\n  };\n\n  _proto.onReceiveResponse = function onReceiveResponse(response) {\n    response = _RequestClient.prototype.onReceiveResponse.call(this, response);\n    var plugin = this.uppy.getPlugin(this.pluginId);\n    var oldAuthenticated = plugin.getPluginState().authenticated;\n    var authenticated = oldAuthenticated ? response.status !== 401 : response.status < 400;\n    plugin.setPluginState({\n      authenticated: authenticated\n    });\n    return response;\n  } // @todo(i.olarewaju) consider whether or not this method should be exposed\n  ;\n\n  _proto.setAuthToken = function setAuthToken(token) {\n    return this.uppy.getPlugin(this.pluginId).storage.setItem(this.tokenKey, token);\n  };\n\n  _proto.getAuthToken = function getAuthToken() {\n    return this.uppy.getPlugin(this.pluginId).storage.getItem(this.tokenKey);\n  };\n\n  _proto.authUrl = function authUrl(queries) {\n    if (queries === void 0) {\n      queries = {};\n    }\n\n    if (this.preAuthToken) {\n      queries.uppyPreAuthToken = this.preAuthToken;\n    }\n\n    var strigifiedQueries = qsStringify(queries);\n    strigifiedQueries = strigifiedQueries ? \"?\" + strigifiedQueries : strigifiedQueries;\n    return this.hostname + \"/\" + this.id + \"/connect\" + strigifiedQueries;\n  };\n\n  _proto.fileUrl = function fileUrl(id) {\n    return this.hostname + \"/\" + this.id + \"/get/\" + id;\n  };\n\n  _proto.fetchPreAuthToken = function fetchPreAuthToken() {\n    var _this3 = this;\n\n    if (!this.companionKeysParams) {\n      return Promise.resolve();\n    }\n\n    return this.post(this.id + \"/preauth/\", {\n      params: this.companionKeysParams\n    }).then(function (res) {\n      _this3.preAuthToken = res.token;\n    }).catch(function (err) {\n      _this3.uppy.log(\"[CompanionClient] unable to fetch preAuthToken \" + err, 'warning');\n    });\n  };\n\n  _proto.list = function list(directory) {\n    return this.get(this.id + \"/list/\" + (directory || ''));\n  };\n\n  _proto.logout = function logout() {\n    var _this4 = this;\n\n    return this.get(this.id + \"/logout\").then(function (response) {\n      return Promise.all([response, _this4.uppy.getPlugin(_this4.pluginId).storage.removeItem(_this4.tokenKey)]);\n    }).then(function (_ref2) {\n      var response = _ref2[0];\n      return response;\n    });\n  };\n\n  Provider.initPlugin = function initPlugin(plugin, opts, defaultOpts) {\n    plugin.type = 'acquirer';\n    plugin.files = [];\n\n    if (defaultOpts) {\n      plugin.opts = _extends({}, defaultOpts, opts);\n    }\n\n    if (opts.serverUrl || opts.serverPattern) {\n      throw new Error('`serverUrl` and `serverPattern` have been renamed to `companionUrl` and `companionAllowedHosts` respectively in the 0.30.5 release. Please consult the docs (for example, https://uppy.io/docs/instagram/ for the Instagram plugin) and use the updated options.`');\n    }\n\n    if (opts.companionAllowedHosts) {\n      var pattern = opts.companionAllowedHosts; // validate companionAllowedHosts param\n\n      if (typeof pattern !== 'string' && !Array.isArray(pattern) && !(pattern instanceof RegExp)) {\n        throw new TypeError(plugin.id + \": the option \\\"companionAllowedHosts\\\" must be one of string, Array, RegExp\");\n      }\n\n      plugin.opts.companionAllowedHosts = pattern;\n    } else {\n      // does not start with https://\n      if (/^(?!https?:\\/\\/).*$/i.test(opts.companionUrl)) {\n        plugin.opts.companionAllowedHosts = \"https://\" + opts.companionUrl.replace(/^\\/\\//, '');\n      } else {\n        plugin.opts.companionAllowedHosts = opts.companionUrl;\n      }\n    }\n\n    plugin.storage = plugin.opts.storage || tokenStorage;\n  };\n\n  return Provider;\n}(RequestClient);","'use strict';\n\nvar _class, _temp;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar AuthError = require('./AuthError');\n\nvar fetchWithNetworkError = require('@uppy/utils/lib/fetchWithNetworkError'); // Remove the trailing slash so we can always safely append /xyz.\n\n\nfunction stripSlash(url) {\n  return url.replace(/\\/$/, '');\n}\n\nmodule.exports = (_temp = _class = /*#__PURE__*/function () {\n  function RequestClient(uppy, opts) {\n    this.uppy = uppy;\n    this.opts = opts;\n    this.onReceiveResponse = this.onReceiveResponse.bind(this);\n    this.allowedHeaders = ['accept', 'content-type', 'uppy-auth-token'];\n    this.preflightDone = false;\n  }\n\n  var _proto = RequestClient.prototype;\n\n  _proto.headers = function headers() {\n    var userHeaders = this.opts.companionHeaders || this.opts.serverHeaders || {};\n    return Promise.resolve(_extends({}, this.defaultHeaders, userHeaders));\n  };\n\n  _proto._getPostResponseFunc = function _getPostResponseFunc(skip) {\n    var _this = this;\n\n    return function (response) {\n      if (!skip) {\n        return _this.onReceiveResponse(response);\n      }\n\n      return response;\n    };\n  };\n\n  _proto.onReceiveResponse = function onReceiveResponse(response) {\n    var state = this.uppy.getState();\n    var companion = state.companion || {};\n    var host = this.opts.companionUrl;\n    var headers = response.headers; // Store the self-identified domain name for the Companion instance we just hit.\n\n    if (headers.has('i-am') && headers.get('i-am') !== companion[host]) {\n      var _extends2;\n\n      this.uppy.setState({\n        companion: _extends({}, companion, (_extends2 = {}, _extends2[host] = headers.get('i-am'), _extends2))\n      });\n    }\n\n    return response;\n  };\n\n  _proto._getUrl = function _getUrl(url) {\n    if (/^(https?:|)\\/\\//.test(url)) {\n      return url;\n    }\n\n    return this.hostname + \"/\" + url;\n  };\n\n  _proto._json = function _json(res) {\n    if (res.status === 401) {\n      throw new AuthError();\n    }\n\n    if (res.status < 200 || res.status > 300) {\n      var errMsg = \"Failed request with status: \" + res.status + \". \" + res.statusText;\n      return res.json().then(function (errData) {\n        errMsg = errData.message ? errMsg + \" message: \" + errData.message : errMsg;\n        errMsg = errData.requestId ? errMsg + \" request-Id: \" + errData.requestId : errMsg;\n        throw new Error(errMsg);\n      }).catch(function () {\n        throw new Error(errMsg);\n      });\n    }\n\n    return res.json();\n  };\n\n  _proto.preflight = function preflight(path) {\n    var _this2 = this;\n\n    if (this.preflightDone) {\n      return Promise.resolve(this.allowedHeaders.slice());\n    }\n\n    return fetch(this._getUrl(path), {\n      method: 'OPTIONS'\n    }).then(function (response) {\n      if (response.headers.has('access-control-allow-headers')) {\n        _this2.allowedHeaders = response.headers.get('access-control-allow-headers').split(',').map(function (headerName) {\n          return headerName.trim().toLowerCase();\n        });\n      }\n\n      _this2.preflightDone = true;\n      return _this2.allowedHeaders.slice();\n    }).catch(function (err) {\n      _this2.uppy.log(\"[CompanionClient] unable to make preflight request \" + err, 'warning');\n\n      _this2.preflightDone = true;\n      return _this2.allowedHeaders.slice();\n    });\n  };\n\n  _proto.preflightAndHeaders = function preflightAndHeaders(path) {\n    var _this3 = this;\n\n    return Promise.all([this.preflight(path), this.headers()]).then(function (_ref) {\n      var allowedHeaders = _ref[0],\n          headers = _ref[1];\n      // filter to keep only allowed Headers\n      Object.keys(headers).forEach(function (header) {\n        if (allowedHeaders.indexOf(header.toLowerCase()) === -1) {\n          _this3.uppy.log(\"[CompanionClient] excluding unallowed header \" + header);\n\n          delete headers[header];\n        }\n      });\n      return headers;\n    });\n  };\n\n  _proto.get = function get(path, skipPostResponse) {\n    var _this4 = this;\n\n    return this.preflightAndHeaders(path).then(function (headers) {\n      return fetchWithNetworkError(_this4._getUrl(path), {\n        method: 'get',\n        headers: headers,\n        credentials: _this4.opts.companionCookiesRule || 'same-origin'\n      });\n    }).then(this._getPostResponseFunc(skipPostResponse)).then(function (res) {\n      return _this4._json(res);\n    }).catch(function (err) {\n      err = err.isAuthError ? err : new Error(\"Could not get \" + _this4._getUrl(path) + \". \" + err);\n      return Promise.reject(err);\n    });\n  };\n\n  _proto.post = function post(path, data, skipPostResponse) {\n    var _this5 = this;\n\n    return this.preflightAndHeaders(path).then(function (headers) {\n      return fetchWithNetworkError(_this5._getUrl(path), {\n        method: 'post',\n        headers: headers,\n        credentials: _this5.opts.companionCookiesRule || 'same-origin',\n        body: JSON.stringify(data)\n      });\n    }).then(this._getPostResponseFunc(skipPostResponse)).then(function (res) {\n      return _this5._json(res);\n    }).catch(function (err) {\n      err = err.isAuthError ? err : new Error(\"Could not post \" + _this5._getUrl(path) + \". \" + err);\n      return Promise.reject(err);\n    });\n  };\n\n  _proto.delete = function _delete(path, data, skipPostResponse) {\n    var _this6 = this;\n\n    return this.preflightAndHeaders(path).then(function (headers) {\n      return fetchWithNetworkError(_this6.hostname + \"/\" + path, {\n        method: 'delete',\n        headers: headers,\n        credentials: _this6.opts.companionCookiesRule || 'same-origin',\n        body: data ? JSON.stringify(data) : null\n      });\n    }).then(this._getPostResponseFunc(skipPostResponse)).then(function (res) {\n      return _this6._json(res);\n    }).catch(function (err) {\n      err = err.isAuthError ? err : new Error(\"Could not delete \" + _this6._getUrl(path) + \". \" + err);\n      return Promise.reject(err);\n    });\n  };\n\n  _createClass(RequestClient, [{\n    key: \"hostname\",\n    get: function get() {\n      var _this$uppy$getState = this.uppy.getState(),\n          companion = _this$uppy$getState.companion;\n\n      var host = this.opts.companionUrl;\n      return stripSlash(companion && companion[host] ? companion[host] : host);\n    }\n  }, {\n    key: \"defaultHeaders\",\n    get: function get() {\n      return {\n        Accept: 'application/json',\n        'Content-Type': 'application/json',\n        'Uppy-Versions': \"@uppy/companion-client=\" + RequestClient.VERSION\n      };\n    }\n  }]);\n\n  return RequestClient;\n}(), _class.VERSION = \"1.8.1\", _temp);","'use strict';\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nvar RequestClient = require('./RequestClient');\n\nvar _getName = function _getName(id) {\n  return id.split('-').map(function (s) {\n    return s.charAt(0).toUpperCase() + s.slice(1);\n  }).join(' ');\n};\n\nmodule.exports = /*#__PURE__*/function (_RequestClient) {\n  _inheritsLoose(SearchProvider, _RequestClient);\n\n  function SearchProvider(uppy, opts) {\n    var _this;\n\n    _this = _RequestClient.call(this, uppy, opts) || this;\n    _this.provider = opts.provider;\n    _this.id = _this.provider;\n    _this.name = _this.opts.name || _getName(_this.id);\n    _this.pluginId = _this.opts.pluginId;\n    return _this;\n  }\n\n  var _proto = SearchProvider.prototype;\n\n  _proto.fileUrl = function fileUrl(id) {\n    return this.hostname + \"/search/\" + this.id + \"/get/\" + id;\n  };\n\n  _proto.search = function search(text, queries) {\n    queries = queries ? \"&\" + queries : '';\n    return this.get(\"search/\" + this.id + \"/list?q=\" + encodeURIComponent(text) + queries);\n  };\n\n  return SearchProvider;\n}(RequestClient);","var ee = require('namespace-emitter');\n\nmodule.exports = /*#__PURE__*/function () {\n  function UppySocket(opts) {\n    this.opts = opts;\n    this._queued = [];\n    this.isOpen = false;\n    this.emitter = ee();\n    this._handleMessage = this._handleMessage.bind(this);\n    this.close = this.close.bind(this);\n    this.emit = this.emit.bind(this);\n    this.on = this.on.bind(this);\n    this.once = this.once.bind(this);\n    this.send = this.send.bind(this);\n\n    if (!opts || opts.autoOpen !== false) {\n      this.open();\n    }\n  }\n\n  var _proto = UppySocket.prototype;\n\n  _proto.open = function open() {\n    var _this = this;\n\n    this.socket = new WebSocket(this.opts.target);\n\n    this.socket.onopen = function (e) {\n      _this.isOpen = true;\n\n      while (_this._queued.length > 0 && _this.isOpen) {\n        var first = _this._queued[0];\n\n        _this.send(first.action, first.payload);\n\n        _this._queued = _this._queued.slice(1);\n      }\n    };\n\n    this.socket.onclose = function (e) {\n      _this.isOpen = false;\n    };\n\n    this.socket.onmessage = this._handleMessage;\n  };\n\n  _proto.close = function close() {\n    if (this.socket) {\n      this.socket.close();\n    }\n  };\n\n  _proto.send = function send(action, payload) {\n    // attach uuid\n    if (!this.isOpen) {\n      this._queued.push({\n        action: action,\n        payload: payload\n      });\n\n      return;\n    }\n\n    this.socket.send(JSON.stringify({\n      action: action,\n      payload: payload\n    }));\n  };\n\n  _proto.on = function on(action, handler) {\n    this.emitter.on(action, handler);\n  };\n\n  _proto.emit = function emit(action, payload) {\n    this.emitter.emit(action, payload);\n  };\n\n  _proto.once = function once(action, handler) {\n    this.emitter.once(action, handler);\n  };\n\n  _proto._handleMessage = function _handleMessage(e) {\n    try {\n      var message = JSON.parse(e.data);\n      this.emit(message.action, message.payload);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  return UppySocket;\n}();","'use strict';\n/**\n * Manages communications with Companion\n */\n\nvar RequestClient = require('./RequestClient');\n\nvar Provider = require('./Provider');\n\nvar SearchProvider = require('./SearchProvider');\n\nvar Socket = require('./Socket');\n\nmodule.exports = {\n  RequestClient: RequestClient,\n  Provider: Provider,\n  SearchProvider: SearchProvider,\n  Socket: Socket\n};","'use strict';\n/**\n * This module serves as an Async wrapper for LocalStorage\n */\n\nmodule.exports.setItem = function (key, value) {\n  return new Promise(function (resolve) {\n    localStorage.setItem(key, value);\n    resolve();\n  });\n};\n\nmodule.exports.getItem = function (key) {\n  return Promise.resolve(localStorage.getItem(key));\n};\n\nmodule.exports.removeItem = function (key) {\n  return new Promise(function (resolve) {\n    localStorage.removeItem(key);\n    resolve();\n  });\n};","function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nvar _require = require('@uppy/provider-views'),\n    ProviderViews = _require.ProviderViews;\n\nmodule.exports = /*#__PURE__*/function (_ProviderViews) {\n  _inheritsLoose(DriveProviderViews, _ProviderViews);\n\n  function DriveProviderViews() {\n    return _ProviderViews.apply(this, arguments) || this;\n  }\n\n  var _proto = DriveProviderViews.prototype;\n\n  _proto.toggleCheckbox = function toggleCheckbox(e, file) {\n    e.stopPropagation();\n    e.preventDefault(); // Shared Drives aren't selectable; for all else, defer to the base ProviderView.\n    // @todo isTeamDrive is left for backward compatibility. We should remove it in the next\n    // major release.\n\n    if (!file.custom.isTeamDrive && !file.custom.isSharedDrive) {\n      _ProviderViews.prototype.toggleCheckbox.call(this, e, file);\n    }\n  };\n\n  return DriveProviderViews;\n}(ProviderViews);","var _class, _temp;\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nvar _require = require('@uppy/core'),\n    Plugin = _require.Plugin;\n\nvar _require2 = require('@uppy/companion-client'),\n    Provider = _require2.Provider;\n\nvar DriveProviderViews = require('./DriveProviderViews');\n\nvar _require3 = require('preact'),\n    h = _require3.h;\n\nmodule.exports = (_temp = _class = /*#__PURE__*/function (_Plugin) {\n  _inheritsLoose(GoogleDrive, _Plugin);\n\n  function GoogleDrive(uppy, opts) {\n    var _this;\n\n    _this = _Plugin.call(this, uppy, opts) || this;\n    _this.id = _this.opts.id || 'GoogleDrive';\n    _this.title = _this.opts.title || 'Google Drive';\n    Provider.initPlugin(_assertThisInitialized(_this), opts);\n    _this.title = _this.opts.title || 'Google Drive';\n\n    _this.icon = function () {\n      return h(\"svg\", {\n        \"aria-hidden\": \"true\",\n        focusable: \"false\",\n        width: \"32\",\n        height: \"32\",\n        viewBox: \"0 0 32 32\"\n      }, h(\"g\", {\n        fill: \"none\",\n        \"fill-rule\": \"evenodd\"\n      }, h(\"rect\", {\n        fill: \"#4285F4\",\n        width: \"32\",\n        height: \"32\",\n        rx: \"16\"\n      }), h(\"path\", {\n        d: \"M10.324 23.3l3-5.1H25l-3 5.1H10.324zM13 18.2l-3 5.1-3-5.1 5.839-9.924 2.999 5.1L13 18.2zm11.838-.276h-6L13 8h6l5.84 9.924h-.002z\",\n        fill: \"#FFF\"\n      })));\n    };\n\n    _this.provider = new Provider(uppy, {\n      companionUrl: _this.opts.companionUrl,\n      companionHeaders: _this.opts.companionHeaders || _this.opts.serverHeaders,\n      companionKeysParams: _this.opts.companionKeysParams,\n      companionCookiesRule: _this.opts.companionCookiesRule,\n      provider: 'drive',\n      pluginId: _this.id\n    });\n    _this.onFirstRender = _this.onFirstRender.bind(_assertThisInitialized(_this));\n    _this.render = _this.render.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  var _proto = GoogleDrive.prototype;\n\n  _proto.install = function install() {\n    this.view = new DriveProviderViews(this, {\n      provider: this.provider\n    });\n    var target = this.opts.target;\n\n    if (target) {\n      this.mount(target, this);\n    }\n  };\n\n  _proto.uninstall = function uninstall() {\n    this.view.tearDown();\n    this.unmount();\n  };\n\n  _proto.onFirstRender = function onFirstRender() {\n    return Promise.all([this.provider.fetchPreAuthToken(), this.view.getFolder('root', '/')]);\n  };\n\n  _proto.render = function render(state) {\n    return this.view.render(state);\n  };\n\n  return GoogleDrive;\n}(Plugin), _class.VERSION = \"1.5.22\", _temp);","var _class, _temp;\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nvar _require = require('@uppy/core'),\n    Plugin = _require.Plugin;\n\nvar _require2 = require('@uppy/companion-client'),\n    Provider = _require2.Provider;\n\nvar _require3 = require('@uppy/provider-views'),\n    ProviderViews = _require3.ProviderViews;\n\nvar _require4 = require('preact'),\n    h = _require4.h;\n\nmodule.exports = (_temp = _class = /*#__PURE__*/function (_Plugin) {\n  _inheritsLoose(OneDrive, _Plugin);\n\n  function OneDrive(uppy, opts) {\n    var _this;\n\n    _this = _Plugin.call(this, uppy, opts) || this;\n    _this.id = _this.opts.id || 'OneDrive';\n    Provider.initPlugin(_assertThisInitialized(_this), opts);\n    _this.title = _this.opts.title || 'OneDrive';\n\n    _this.icon = function () {\n      return h(\"svg\", {\n        \"aria-hidden\": \"true\",\n        focusable: \"false\",\n        width: \"32\",\n        height: \"32\",\n        viewBox: \"0 0 32 32\"\n      }, h(\"g\", {\n        fill: \"none\",\n        \"fill-rule\": \"evenodd\"\n      }, h(\"rect\", {\n        width: \"32\",\n        height: \"32\",\n        rx: \"16\",\n        fill: \"#0262C0\"\n      }), h(\"g\", {\n        fill: \"#FFF\",\n        \"fill-rule\": \"nonzero\"\n      }, h(\"path\", {\n        d: \"M24.157 22s1.492-.205 1.79-1.655a2.624 2.624 0 0 0 .03-.878c-.22-1.64-1.988-2.01-1.988-2.01s.307-1.765-1.312-2.69c-1.62-.925-3.1 0-3.1 0S18.711 13 16.366 13c-3.016 0-3.519 3.448-3.519 3.448S10 16.618 10 19.14c0 2.523 2.597 2.86 2.597 2.86h11.56z\"\n      }), h(\"path\", {\n        d: \"M9.421 19.246c0-2.197 1.606-3.159 2.871-3.472.44-1.477 1.654-3.439 4.135-3.439H16.445c1.721 0 2.79.823 3.368 1.476a3.99 3.99 0 0 1 1.147-.171h.01l.03.002C21.017 13.5 20.691 10 16.757 10c-2.69 0-3.639 2.345-3.639 2.345s-1.95-1.482-3.955.567c-1.028 1.052-.79 2.669-.79 2.669S6 15.824 6 18.412C6 20.757 8.452 21 8.452 21h1.372a3.77 3.77 0 0 1-.403-1.754z\"\n      }))));\n    };\n\n    _this.provider = new Provider(uppy, {\n      companionUrl: _this.opts.companionUrl,\n      companionHeaders: _this.opts.companionHeaders || _this.opts.serverHeaders,\n      companionCookiesRule: _this.opts.companionCookiesRule,\n      provider: 'onedrive',\n      pluginId: _this.id\n    });\n    _this.onFirstRender = _this.onFirstRender.bind(_assertThisInitialized(_this));\n    _this.render = _this.render.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  var _proto = OneDrive.prototype;\n\n  _proto.install = function install() {\n    this.view = new ProviderViews(this, {\n      provider: this.provider\n    });\n    var target = this.opts.target;\n\n    if (target) {\n      this.mount(target, this);\n    }\n  };\n\n  _proto.uninstall = function uninstall() {\n    this.view.tearDown();\n    this.unmount();\n  };\n\n  _proto.onFirstRender = function onFirstRender() {\n    return Promise.all([this.provider.fetchPreAuthToken(), this.view.getFolder()]);\n  };\n\n  _proto.render = function render(state) {\n    return this.view.render(state);\n  };\n\n  return OneDrive;\n}(Plugin), _class.VERSION = \"1.1.22\", _temp);","var _require = require('preact'),\n    h = _require.h; // TODO use Fragment when upgrading to preact X\n\n\nvar Breadcrumb = function Breadcrumb(props) {\n  return h(\"span\", null, h(\"button\", {\n    type: \"button\",\n    class: \"uppy-u-reset\",\n    onclick: props.getFolder\n  }, props.title), !props.isLast ? ' / ' : '');\n};\n\nmodule.exports = function (props) {\n  return h(\"div\", {\n    class: \"uppy-Provider-breadcrumbs\"\n  }, h(\"div\", {\n    class: \"uppy-Provider-breadcrumbsIcon\"\n  }, props.breadcrumbsIcon), props.directories.map(function (directory, i) {\n    return h(Breadcrumb, {\n      key: directory.id,\n      getFolder: function getFolder() {\n        return props.getFolder(directory.id);\n      },\n      title: i === 0 ? props.title : directory.title,\n      isLast: i + 1 === props.directories.length\n    });\n  }));\n};","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nvar classNames = require('classnames');\n\nvar Filter = require('./Filter');\n\nvar ItemList = require('./ItemList');\n\nvar FooterActions = require('./FooterActions');\n\nvar _require = require('preact'),\n    h = _require.h;\n\nvar Browser = function Browser(props) {\n  var currentSelection = props.currentSelection,\n      folders = props.folders,\n      files = props.files,\n      uppyFiles = props.uppyFiles,\n      filterItems = props.filterItems,\n      filterInput = props.filterInput;\n  var filteredFolders = folders;\n  var filteredFiles = files;\n\n  if (filterInput !== '') {\n    filteredFolders = filterItems(folders);\n    filteredFiles = filterItems(files);\n  }\n\n  var selected = currentSelection.length;\n  return h(\"div\", {\n    class: classNames('uppy-ProviderBrowser', \"uppy-ProviderBrowser-viewType--\" + props.viewType)\n  }, h(\"div\", {\n    class: \"uppy-ProviderBrowser-header\"\n  }, h(\"div\", {\n    class: classNames('uppy-ProviderBrowser-headerBar', !props.showBreadcrumbs && 'uppy-ProviderBrowser-headerBar--simple')\n  }, props.headerComponent)), props.showFilter && h(Filter, props), h(ItemList, {\n    columns: [{\n      name: 'Name',\n      key: 'title'\n    }],\n    folders: filteredFolders,\n    files: filteredFiles,\n    sortByTitle: props.sortByTitle,\n    sortByDate: props.sortByDate,\n    isChecked: props.isChecked,\n    handleFolderClick: props.getNextFolder,\n    toggleCheckbox: props.toggleCheckbox,\n    handleScroll: props.handleScroll,\n    title: props.title,\n    showTitles: props.showTitles,\n    i18n: props.i18n,\n    viewType: props.viewType,\n    validateRestrictions: props.validateRestrictions,\n    uppyFiles: uppyFiles,\n    currentSelection: currentSelection\n  }), selected > 0 && h(FooterActions, _extends({\n    selected: selected\n  }, props)));\n};\n\nmodule.exports = Browser;","function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nvar _require = require('preact'),\n    Component = _require.Component;\n\nmodule.exports = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(CloseWrapper, _Component);\n\n  function CloseWrapper() {\n    return _Component.apply(this, arguments) || this;\n  }\n\n  var _proto = CloseWrapper.prototype;\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.props.onUnmount();\n  };\n\n  _proto.render = function render() {\n    return this.props.children[0];\n  };\n\n  return CloseWrapper;\n}(Component);","function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nvar _require = require('preact'),\n    h = _require.h,\n    Component = _require.Component;\n\nmodule.exports = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(Filter, _Component);\n\n  function Filter(props) {\n    var _this;\n\n    _this = _Component.call(this, props) || this;\n    _this.preventEnterPress = _this.preventEnterPress.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  var _proto = Filter.prototype;\n\n  _proto.preventEnterPress = function preventEnterPress(ev) {\n    if (ev.keyCode === 13) {\n      ev.stopPropagation();\n      ev.preventDefault();\n    }\n  };\n\n  _proto.render = function render() {\n    var _this2 = this;\n\n    return h(\"div\", {\n      class: \"uppy-ProviderBrowser-search\"\n    }, h(\"input\", {\n      class: \"uppy-u-reset uppy-ProviderBrowser-searchInput\",\n      type: \"text\",\n      placeholder: this.props.i18n('filter'),\n      \"aria-label\": this.props.i18n('filter'),\n      onkeyup: this.preventEnterPress,\n      onkeydown: this.preventEnterPress,\n      onkeypress: this.preventEnterPress,\n      oninput: function oninput(e) {\n        return _this2.props.filterQuery(e);\n      },\n      value: this.props.filterInput\n    }), h(\"svg\", {\n      \"aria-hidden\": \"true\",\n      focusable: \"false\",\n      class: \"uppy-c-icon uppy-ProviderBrowser-searchIcon\",\n      width: \"12\",\n      height: \"12\",\n      viewBox: \"0 0 12 12\"\n    }, h(\"path\", {\n      d: \"M8.638 7.99l3.172 3.172a.492.492 0 1 1-.697.697L7.91 8.656a4.977 4.977 0 0 1-2.983.983C2.206 9.639 0 7.481 0 4.819 0 2.158 2.206 0 4.927 0c2.721 0 4.927 2.158 4.927 4.82a4.74 4.74 0 0 1-1.216 3.17zm-3.71.685c2.176 0 3.94-1.726 3.94-3.856 0-2.129-1.764-3.855-3.94-3.855C2.75.964.984 2.69.984 4.819c0 2.13 1.765 3.856 3.942 3.856z\"\n    })), this.props.filterInput && h(\"button\", {\n      class: \"uppy-u-reset uppy-ProviderBrowser-searchClose\",\n      type: \"button\",\n      \"aria-label\": this.props.i18n('resetFilter'),\n      title: this.props.i18n('resetFilter'),\n      onclick: this.props.filterQuery\n    }, h(\"svg\", {\n      \"aria-hidden\": \"true\",\n      focusable: \"false\",\n      class: \"uppy-c-icon\",\n      viewBox: \"0 0 19 19\"\n    }, h(\"path\", {\n      d: \"M17.318 17.232L9.94 9.854 9.586 9.5l-.354.354-7.378 7.378h.707l-.62-.62v.706L9.318 9.94l.354-.354-.354-.354L1.94 1.854v.707l.62-.62h-.706l7.378 7.378.354.354.354-.354 7.378-7.378h-.707l.622.62v-.706L9.854 9.232l-.354.354.354.354 7.378 7.378.708-.707-7.38-7.378v.708l7.38-7.38.353-.353-.353-.353-.622-.622-.353-.353-.354.352-7.378 7.38h.708L2.56 1.23 2.208.88l-.353.353-.622.62-.353.355.352.353 7.38 7.38v-.708l-7.38 7.38-.353.353.352.353.622.622.353.353.354-.353 7.38-7.38h-.708l7.38 7.38z\"\n    }))));\n  };\n\n  return Filter;\n}(Component);","var _require = require('preact'),\n    h = _require.h;\n\nmodule.exports = function (props) {\n  return h(\"div\", {\n    class: \"uppy-ProviderBrowser-footer\"\n  }, h(\"button\", {\n    class: \"uppy-u-reset uppy-c-btn uppy-c-btn-primary\",\n    onclick: props.done\n  }, props.i18n('selectX', {\n    smart_count: props.selected\n  })), h(\"button\", {\n    class: \"uppy-u-reset uppy-c-btn uppy-c-btn-link\",\n    onclick: props.cancel\n  }, props.i18n('cancel')));\n};","var _require = require('preact'),\n    h = _require.h; // it could be a <li><button class=\"fake-checkbox\"/> <button/></li>\n\n\nmodule.exports = function (props) {\n  return h(\"li\", {\n    class: props.className,\n    title: props.isDisabled ? props.restrictionReason : null\n  }, h(\"div\", {\n    \"aria-hidden\": true,\n    class: \"uppy-ProviderBrowserItem-fakeCheckbox \" + (props.isChecked ? 'uppy-ProviderBrowserItem-fakeCheckbox--is-checked' : '')\n  }), h(\"button\", {\n    type: \"button\",\n    class: \"uppy-u-reset uppy-ProviderBrowserItem-inner\",\n    onclick: props.toggleCheckbox,\n    role: \"option\",\n    \"aria-label\": props.isChecked ? props.i18n('unselectFileNamed', {\n      name: props.title\n    }) : props.i18n('selectFileNamed', {\n      name: props.title\n    }),\n    \"aria-selected\": props.isChecked,\n    \"aria-disabled\": props.isDisabled,\n    disabled: props.isDisabled,\n    \"data-uppy-super-focusable\": true\n  }, props.itemIconEl, props.showTitles && props.title));\n};","var _require = require('preact'),\n    h = _require.h;\n\nfunction FileIcon() {\n  return h(\"svg\", {\n    \"aria-hidden\": \"true\",\n    focusable: \"false\",\n    class: \"uppy-c-icon\",\n    width: 11,\n    height: 14.5,\n    viewBox: \"0 0 44 58\"\n  }, h(\"path\", {\n    d: \"M27.437.517a1 1 0 0 0-.094.03H4.25C2.037.548.217 2.368.217 4.58v48.405c0 2.212 1.82 4.03 4.03 4.03H39.03c2.21 0 4.03-1.818 4.03-4.03V15.61a1 1 0 0 0-.03-.28 1 1 0 0 0 0-.093 1 1 0 0 0-.03-.032 1 1 0 0 0 0-.03 1 1 0 0 0-.032-.063 1 1 0 0 0-.03-.063 1 1 0 0 0-.032 0 1 1 0 0 0-.03-.063 1 1 0 0 0-.032-.03 1 1 0 0 0-.03-.063 1 1 0 0 0-.063-.062l-14.593-14a1 1 0 0 0-.062-.062A1 1 0 0 0 28 .708a1 1 0 0 0-.374-.157 1 1 0 0 0-.156 0 1 1 0 0 0-.03-.03l-.003-.003zM4.25 2.547h22.218v9.97c0 2.21 1.82 4.03 4.03 4.03h10.564v36.438a2.02 2.02 0 0 1-2.032 2.032H4.25c-1.13 0-2.032-.9-2.032-2.032V4.58c0-1.13.902-2.032 2.03-2.032zm24.218 1.345l10.375 9.937.75.718H30.5c-1.13 0-2.032-.9-2.032-2.03V3.89z\"\n  }));\n}\n\nfunction FolderIcon() {\n  return h(\"svg\", {\n    \"aria-hidden\": \"true\",\n    focusable: \"false\",\n    class: \"uppy-c-icon\",\n    style: {\n      minWidth: 16,\n      marginRight: 3\n    },\n    viewBox: \"0 0 276.157 276.157\"\n  }, h(\"path\", {\n    d: \"M273.08 101.378c-3.3-4.65-8.86-7.32-15.254-7.32h-24.34V67.59c0-10.2-8.3-18.5-18.5-18.5h-85.322c-3.63 0-9.295-2.875-11.436-5.805l-6.386-8.735c-4.982-6.814-15.104-11.954-23.546-11.954H58.73c-9.292 0-18.638 6.608-21.737 15.372l-2.033 5.752c-.958 2.71-4.72 5.37-7.596 5.37H18.5C8.3 49.09 0 57.39 0 67.59v167.07c0 .886.16 1.73.443 2.52.152 3.306 1.18 6.424 3.053 9.064 3.3 4.652 8.86 7.32 15.255 7.32h188.487c11.395 0 23.27-8.425 27.035-19.18l40.677-116.188c2.11-6.035 1.43-12.164-1.87-16.816zM18.5 64.088h8.864c9.295 0 18.64-6.607 21.738-15.37l2.032-5.75c.96-2.712 4.722-5.373 7.597-5.373h29.565c3.63 0 9.295 2.876 11.437 5.806l6.386 8.735c4.982 6.815 15.104 11.954 23.546 11.954h85.322c1.898 0 3.5 1.602 3.5 3.5v26.47H69.34c-11.395 0-23.27 8.423-27.035 19.178L15 191.23V67.59c0-1.898 1.603-3.5 3.5-3.5zm242.29 49.15l-40.676 116.188c-1.674 4.78-7.812 9.135-12.877 9.135H18.75c-1.447 0-2.576-.372-3.02-.997-.442-.625-.422-1.814.057-3.18l40.677-116.19c1.674-4.78 7.812-9.134 12.877-9.134h188.487c1.448 0 2.577.372 3.02.997.443.625.423 1.814-.056 3.18z\"\n  }));\n}\n\nfunction VideoIcon() {\n  return h(\"svg\", {\n    \"aria-hidden\": \"true\",\n    focusable: \"false\",\n    style: {\n      width: 16,\n      marginRight: 4\n    },\n    viewBox: \"0 0 58 58\"\n  }, h(\"path\", {\n    d: \"M36.537 28.156l-11-7a1.005 1.005 0 0 0-1.02-.033C24.2 21.3 24 21.635 24 22v14a1 1 0 0 0 1.537.844l11-7a1.002 1.002 0 0 0 0-1.688zM26 34.18V23.82L34.137 29 26 34.18z\"\n  }), h(\"path\", {\n    d: \"M57 6H1a1 1 0 0 0-1 1v44a1 1 0 0 0 1 1h56a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1zM10 28H2v-9h8v9zm-8 2h8v9H2v-9zm10 10V8h34v42H12V40zm44-12h-8v-9h8v9zm-8 2h8v9h-8v-9zm8-22v9h-8V8h8zM2 8h8v9H2V8zm0 42v-9h8v9H2zm54 0h-8v-9h8v9z\"\n  }));\n}\n\nmodule.exports = function (props) {\n  if (props.itemIconString === null) return;\n\n  switch (props.itemIconString) {\n    case 'file':\n      return h(FileIcon, null);\n\n    case 'folder':\n      return h(FolderIcon, null);\n\n    case 'video':\n      return h(VideoIcon, null);\n\n    default:\n      return h(\"img\", {\n        src: props.itemIconString\n      });\n  }\n};","var _require = require('preact'),\n    h = _require.h;\n\nvar getAriaLabelOfCheckbox = function getAriaLabelOfCheckbox(props) {\n  if (props.type === 'folder') {\n    if (props.isChecked) {\n      return props.i18n('unselectAllFilesFromFolderNamed', {\n        name: props.title\n      });\n    } else {\n      return props.i18n('selectAllFilesFromFolderNamed', {\n        name: props.title\n      });\n    }\n  } else {\n    if (props.isChecked) {\n      return props.i18n('unselectFileNamed', {\n        name: props.title\n      });\n    } else {\n      return props.i18n('selectFileNamed', {\n        name: props.title\n      });\n    }\n  }\n}; // if folder:\n//   + checkbox (selects all files from folder)\n//   + folder name (opens folder)\n// if file:\n//   + checkbox (selects file)\n//   + file name (selects file)\n\n\nmodule.exports = function (props) {\n  return h(\"li\", {\n    class: props.className,\n    title: props.isDisabled ? props.restrictionReason : null\n  }, h(\"button\", {\n    type: \"button\",\n    class: \"uppy-u-reset uppy-ProviderBrowserItem-fakeCheckbox \" + (props.isChecked ? 'uppy-ProviderBrowserItem-fakeCheckbox--is-checked' : ''),\n    onClick: props.toggleCheckbox // for the <label/>\n    ,\n    id: props.id,\n    role: \"option\",\n    \"aria-label\": getAriaLabelOfCheckbox(props),\n    \"aria-selected\": props.isChecked,\n    \"aria-disabled\": props.isDisabled,\n    disabled: props.isDisabled,\n    \"data-uppy-super-focusable\": true\n  }), props.type === 'file' ? // label for a checkbox\n  h(\"label\", {\n    for: props.id,\n    class: \"uppy-u-reset uppy-ProviderBrowserItem-inner\"\n  }, h(\"div\", {\n    class: \"uppy-ProviderBrowserItem-iconWrap\"\n  }, props.itemIconEl), props.showTitles && props.title) : // button to open a folder\n  h(\"button\", {\n    type: \"button\",\n    class: \"uppy-u-reset uppy-ProviderBrowserItem-inner\",\n    onclick: props.handleFolderClick,\n    \"aria-label\": props.i18n('openFolderNamed', {\n      name: props.title\n    })\n  }, h(\"div\", {\n    class: \"uppy-ProviderBrowserItem-iconWrap\"\n  }, props.itemIconEl), props.showTitles && h(\"span\", null, props.title)));\n};","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nvar _require = require('preact'),\n    h = _require.h;\n\nvar classNames = require('classnames');\n\nvar ItemIcon = require('./components/ItemIcon');\n\nvar GridLi = require('./components/GridLi');\n\nvar ListLi = require('./components/ListLi');\n\nmodule.exports = function (props) {\n  var itemIconString = props.getItemIcon();\n  var className = classNames('uppy-ProviderBrowserItem', {\n    'uppy-ProviderBrowserItem--selected': props.isChecked\n  }, {\n    'uppy-ProviderBrowserItem--disabled': props.isDisabled\n  }, {\n    'uppy-ProviderBrowserItem--noPreview': itemIconString === 'video'\n  });\n  var itemIconEl = h(ItemIcon, {\n    itemIconString: itemIconString\n  });\n\n  switch (props.viewType) {\n    case 'grid':\n      return h(GridLi, _extends({}, props, {\n        className: className,\n        itemIconEl: itemIconEl\n      }));\n\n    case 'list':\n      return h(ListLi, _extends({}, props, {\n        className: className,\n        itemIconEl: itemIconEl\n      }));\n\n    default:\n      throw new Error(\"There is no such type \" + props.viewType);\n  }\n};","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nvar _require = require('preact'),\n    h = _require.h;\n\nvar remoteFileObjToLocal = require('@uppy/utils/lib/remoteFileObjToLocal');\n\nvar Item = require('./Item/index');\n\nvar getSharedProps = function getSharedProps(fileOrFolder, props) {\n  return {\n    id: fileOrFolder.id,\n    title: fileOrFolder.name,\n    getItemIcon: function getItemIcon() {\n      return fileOrFolder.icon;\n    },\n    isChecked: props.isChecked(fileOrFolder),\n    toggleCheckbox: function toggleCheckbox(e) {\n      return props.toggleCheckbox(e, fileOrFolder);\n    },\n    columns: props.columns,\n    showTitles: props.showTitles,\n    viewType: props.viewType,\n    i18n: props.i18n\n  };\n};\n\nmodule.exports = function (props) {\n  if (!props.folders.length && !props.files.length) {\n    return h(\"div\", {\n      class: \"uppy-Provider-empty\"\n    }, props.i18n('noFilesFound'));\n  }\n\n  return h(\"div\", {\n    class: \"uppy-ProviderBrowser-body\"\n  }, h(\"ul\", {\n    class: \"uppy-ProviderBrowser-list\",\n    onscroll: props.handleScroll,\n    role: \"listbox\" // making <ul> not focusable for firefox\n    ,\n    tabindex: \"-1\"\n  }, props.folders.map(function (folder) {\n    return Item(_extends({}, getSharedProps(folder, props), {\n      type: 'folder',\n      isDisabled: props.isChecked(folder) ? props.isChecked(folder).loading : false,\n      handleFolderClick: function handleFolderClick() {\n        return props.handleFolderClick(folder);\n      }\n    }));\n  }), props.files.map(function (file) {\n    var validateRestrictions = props.validateRestrictions(remoteFileObjToLocal(file), [].concat(props.uppyFiles, props.currentSelection));\n    var sharedProps = getSharedProps(file, props);\n    var restrictionReason = validateRestrictions.reason;\n    return Item(_extends({}, sharedProps, {\n      type: 'file',\n      isDisabled: !validateRestrictions.result && !sharedProps.isChecked,\n      restrictionReason: restrictionReason\n    }));\n  })));\n};","var _require = require('preact'),\n    h = _require.h;\n\nmodule.exports = function (props) {\n  return h(\"div\", {\n    class: \"uppy-Provider-loading\"\n  }, h(\"span\", null, props.i18n('loading')));\n};","function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nvar _require = require('preact'),\n    h = _require.h,\n    Component = _require.Component;\n\nvar AuthView = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(AuthView, _Component);\n\n  function AuthView() {\n    return _Component.apply(this, arguments) || this;\n  }\n\n  var _proto = AuthView.prototype;\n\n  _proto.render = function render() {\n    var pluginNameComponent = h(\"span\", {\n      class: \"uppy-Provider-authTitleName\"\n    }, this.props.pluginName, h(\"br\", null));\n    return h(\"div\", {\n      class: \"uppy-Provider-auth\"\n    }, h(\"div\", {\n      class: \"uppy-Provider-authIcon\"\n    }, this.props.pluginIcon()), h(\"div\", {\n      class: \"uppy-Provider-authTitle\"\n    }, this.props.i18nArray('authenticateWithTitle', {\n      pluginName: pluginNameComponent\n    })), h(\"button\", {\n      type: \"button\",\n      class: \"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Provider-authBtn\",\n      onclick: this.props.handleAuth,\n      \"data-uppy-super-focusable\": true\n    }, this.props.i18nArray('authenticateWith', {\n      pluginName: this.props.pluginName\n    })));\n  };\n\n  return AuthView;\n}(Component);\n\nmodule.exports = AuthView;","var User = require('./User');\n\nvar Breadcrumbs = require('../Breadcrumbs');\n\nmodule.exports = function (props) {\n  var components = [];\n\n  if (props.showBreadcrumbs) {\n    components.push(Breadcrumbs({\n      getFolder: props.getFolder,\n      directories: props.directories,\n      breadcrumbsIcon: props.pluginIcon && props.pluginIcon(),\n      title: props.title\n    }));\n  }\n\n  components.push(User({\n    logout: props.logout,\n    username: props.username,\n    i18n: props.i18n\n  }));\n  return components;\n};","var _class, _temp;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nvar _require = require('preact'),\n    h = _require.h;\n\nvar AuthView = require('./AuthView');\n\nvar Header = require('./Header');\n\nvar Browser = require('../Browser');\n\nvar LoaderView = require('../Loader');\n\nvar generateFileID = require('@uppy/utils/lib/generateFileID');\n\nvar getFileType = require('@uppy/utils/lib/getFileType');\n\nvar isPreviewSupported = require('@uppy/utils/lib/isPreviewSupported');\n\nvar SharedHandler = require('../SharedHandler');\n\nvar CloseWrapper = require('../CloseWrapper');\n/**\n * Array.prototype.findIndex ponyfill for old browsers.\n */\n\n\nfunction findIndex(array, predicate) {\n  for (var i = 0; i < array.length; i++) {\n    if (predicate(array[i])) return i;\n  }\n\n  return -1;\n} // location.origin does not exist in IE\n\n\nfunction getOrigin() {\n  if ('origin' in location) {\n    return location.origin; // eslint-disable-line compat/compat\n  }\n\n  return location.protocol + \"//\" + location.hostname + (location.port ? \":\" + location.port : '');\n}\n/**\n * Class to easily generate generic views for Provider plugins\n */\n\n\nmodule.exports = (_temp = _class = /*#__PURE__*/function () {\n  /**\n   * @param {object} plugin instance of the plugin\n   * @param {object} opts\n   */\n  function ProviderView(plugin, opts) {\n    this.plugin = plugin;\n    this.provider = opts.provider;\n    this._sharedHandler = new SharedHandler(plugin); // set default options\n\n    var defaultOptions = {\n      viewType: 'list',\n      showTitles: true,\n      showFilter: true,\n      showBreadcrumbs: true\n    }; // merge default options with the ones set by user\n\n    this.opts = _extends({}, defaultOptions, opts); // Logic\n\n    this.addFile = this.addFile.bind(this);\n    this.filterQuery = this.filterQuery.bind(this);\n    this.getFolder = this.getFolder.bind(this);\n    this.getNextFolder = this.getNextFolder.bind(this);\n    this.logout = this.logout.bind(this);\n    this.preFirstRender = this.preFirstRender.bind(this);\n    this.handleAuth = this.handleAuth.bind(this);\n    this.sortByTitle = this.sortByTitle.bind(this);\n    this.sortByDate = this.sortByDate.bind(this);\n    this.handleError = this.handleError.bind(this);\n    this.handleScroll = this.handleScroll.bind(this);\n    this.listAllFiles = this.listAllFiles.bind(this);\n    this.donePicking = this.donePicking.bind(this);\n    this.cancelPicking = this.cancelPicking.bind(this);\n    this.clearSelection = this.clearSelection.bind(this); // Visual\n\n    this.render = this.render.bind(this);\n    this.clearSelection(); // Set default state for the plugin\n\n    this.plugin.setPluginState({\n      authenticated: false,\n      files: [],\n      folders: [],\n      directories: [],\n      filterInput: '',\n      isSearchVisible: false\n    });\n  }\n\n  var _proto = ProviderView.prototype;\n\n  _proto.tearDown = function tearDown() {// Nothing.\n  };\n\n  _proto._updateFilesAndFolders = function _updateFilesAndFolders(res, files, folders) {\n    this.nextPagePath = res.nextPagePath;\n    res.items.forEach(function (item) {\n      if (item.isFolder) {\n        folders.push(item);\n      } else {\n        files.push(item);\n      }\n    });\n    this.plugin.setPluginState({\n      folders: folders,\n      files: files\n    });\n  }\n  /**\n   * Called only the first time the provider view is rendered.\n   * Kind of like an init function.\n   */\n  ;\n\n  _proto.preFirstRender = function preFirstRender() {\n    this.plugin.setPluginState({\n      didFirstRender: true\n    });\n    this.plugin.onFirstRender();\n  }\n  /**\n   * Based on folder ID, fetch a new folder and update it to state\n   *\n   * @param  {string} id Folder id\n   * @returns {Promise}   Folders/files in folder\n   */\n  ;\n\n  _proto.getFolder = function getFolder(id, name) {\n    var _this = this;\n\n    return this._sharedHandler.loaderWrapper(this.provider.list(id), function (res) {\n      var folders = [];\n      var files = [];\n      var updatedDirectories;\n\n      var state = _this.plugin.getPluginState();\n\n      var index = findIndex(state.directories, function (dir) {\n        return id === dir.id;\n      });\n\n      if (index !== -1) {\n        updatedDirectories = state.directories.slice(0, index + 1);\n      } else {\n        updatedDirectories = state.directories.concat([{\n          id: id,\n          title: name\n        }]);\n      }\n\n      _this.username = res.username || _this.username;\n\n      _this._updateFilesAndFolders(res, files, folders);\n\n      _this.plugin.setPluginState({\n        directories: updatedDirectories\n      });\n    }, this.handleError);\n  }\n  /**\n   * Fetches new folder\n   *\n   * @param  {object} folder\n   */\n  ;\n\n  _proto.getNextFolder = function getNextFolder(folder) {\n    this.getFolder(folder.requestPath, folder.name);\n    this.lastCheckbox = undefined;\n  };\n\n  _proto.addFile = function addFile(file) {\n    var tagFile = {\n      id: this.providerFileToId(file),\n      source: this.plugin.id,\n      data: file,\n      name: file.name || file.id,\n      type: file.mimeType,\n      isRemote: true,\n      body: {\n        fileId: file.id\n      },\n      remote: {\n        companionUrl: this.plugin.opts.companionUrl,\n        url: \"\" + this.provider.fileUrl(file.requestPath),\n        body: {\n          fileId: file.id\n        },\n        providerOptions: this.provider.opts\n      }\n    };\n    var fileType = getFileType(tagFile); // TODO Should we just always use the thumbnail URL if it exists?\n\n    if (fileType && isPreviewSupported(fileType)) {\n      tagFile.preview = file.thumbnail;\n    }\n\n    this.plugin.uppy.log('Adding remote file');\n\n    try {\n      this.plugin.uppy.addFile(tagFile);\n      return true;\n    } catch (err) {\n      if (!err.isRestriction) {\n        this.plugin.uppy.log(err);\n      }\n\n      return false;\n    }\n  }\n  /**\n   * Removes session token on client side.\n   */\n  ;\n\n  _proto.logout = function logout() {\n    var _this2 = this;\n\n    this.provider.logout().then(function (res) {\n      if (res.ok) {\n        if (!res.revoked) {\n          var message = _this2.plugin.uppy.i18n('companionUnauthorizeHint', {\n            provider: _this2.plugin.title,\n            url: res.manual_revoke_url\n          });\n\n          _this2.plugin.uppy.info(message, 'info', 7000);\n        }\n\n        var newState = {\n          authenticated: false,\n          files: [],\n          folders: [],\n          directories: []\n        };\n\n        _this2.plugin.setPluginState(newState);\n      }\n    }).catch(this.handleError);\n  };\n\n  _proto.filterQuery = function filterQuery(e) {\n    var state = this.plugin.getPluginState();\n    this.plugin.setPluginState(_extends({}, state, {\n      filterInput: e ? e.target.value : ''\n    }));\n  };\n\n  _proto.sortByTitle = function sortByTitle() {\n    var state = _extends({}, this.plugin.getPluginState());\n\n    var files = state.files,\n        folders = state.folders,\n        sorting = state.sorting;\n    var sortedFiles = files.sort(function (fileA, fileB) {\n      if (sorting === 'titleDescending') {\n        return fileB.name.localeCompare(fileA.name);\n      }\n\n      return fileA.name.localeCompare(fileB.name);\n    });\n    var sortedFolders = folders.sort(function (folderA, folderB) {\n      if (sorting === 'titleDescending') {\n        return folderB.name.localeCompare(folderA.name);\n      }\n\n      return folderA.name.localeCompare(folderB.name);\n    });\n    this.plugin.setPluginState(_extends({}, state, {\n      files: sortedFiles,\n      folders: sortedFolders,\n      sorting: sorting === 'titleDescending' ? 'titleAscending' : 'titleDescending'\n    }));\n  };\n\n  _proto.sortByDate = function sortByDate() {\n    var state = _extends({}, this.plugin.getPluginState());\n\n    var files = state.files,\n        folders = state.folders,\n        sorting = state.sorting;\n    var sortedFiles = files.sort(function (fileA, fileB) {\n      var a = new Date(fileA.modifiedDate);\n      var b = new Date(fileB.modifiedDate);\n\n      if (sorting === 'dateDescending') {\n        return a > b ? -1 : a < b ? 1 : 0;\n      }\n\n      return a > b ? 1 : a < b ? -1 : 0;\n    });\n    var sortedFolders = folders.sort(function (folderA, folderB) {\n      var a = new Date(folderA.modifiedDate);\n      var b = new Date(folderB.modifiedDate);\n\n      if (sorting === 'dateDescending') {\n        return a > b ? -1 : a < b ? 1 : 0;\n      }\n\n      return a > b ? 1 : a < b ? -1 : 0;\n    });\n    this.plugin.setPluginState(_extends({}, state, {\n      files: sortedFiles,\n      folders: sortedFolders,\n      sorting: sorting === 'dateDescending' ? 'dateAscending' : 'dateDescending'\n    }));\n  };\n\n  _proto.sortBySize = function sortBySize() {\n    var state = _extends({}, this.plugin.getPluginState());\n\n    var files = state.files,\n        sorting = state.sorting; // check that plugin supports file sizes\n\n    if (!files.length || !this.plugin.getItemData(files[0]).size) {\n      return;\n    }\n\n    var sortedFiles = files.sort(function (fileA, fileB) {\n      var a = fileA.size;\n      var b = fileB.size;\n\n      if (sorting === 'sizeDescending') {\n        return a > b ? -1 : a < b ? 1 : 0;\n      }\n\n      return a > b ? 1 : a < b ? -1 : 0;\n    });\n    this.plugin.setPluginState(_extends({}, state, {\n      files: sortedFiles,\n      sorting: sorting === 'sizeDescending' ? 'sizeAscending' : 'sizeDescending'\n    }));\n  }\n  /**\n   * Adds all files found inside of specified folder.\n   *\n   * Uses separated state while folder contents are being fetched and\n   * mantains list of selected folders, which are separated from files.\n   */\n  ;\n\n  _proto.addFolder = function addFolder(folder) {\n    var _this3 = this;\n\n    var folderId = this.providerFileToId(folder);\n    var state = this.plugin.getPluginState();\n\n    var folders = _extends({}, state.selectedFolders);\n\n    if (folderId in folders && folders[folderId].loading) {\n      return;\n    }\n\n    folders[folderId] = {\n      loading: true,\n      files: []\n    };\n    this.plugin.setPluginState({\n      selectedFolders: _extends({}, folders)\n    });\n    return this.listAllFiles(folder.requestPath).then(function (files) {\n      var count = 0;\n      files.forEach(function (file) {\n        var success = _this3.addFile(file);\n\n        if (success) count++;\n      });\n      var ids = files.map(_this3.providerFileToId);\n      folders[folderId] = {\n        loading: false,\n        files: ids\n      };\n\n      _this3.plugin.setPluginState({\n        selectedFolders: folders\n      });\n\n      var message;\n\n      if (files.length) {\n        message = _this3.plugin.uppy.i18n('folderAdded', {\n          smart_count: count,\n          folder: folder.name\n        });\n      } else {\n        message = _this3.plugin.uppy.i18n('emptyFolderAdded');\n      }\n\n      _this3.plugin.uppy.info(message);\n    }).catch(function (e) {\n      var state = _this3.plugin.getPluginState();\n\n      var selectedFolders = _extends({}, state.selectedFolders);\n\n      delete selectedFolders[folderId];\n\n      _this3.plugin.setPluginState({\n        selectedFolders: selectedFolders\n      });\n\n      _this3.handleError(e);\n    });\n  };\n\n  _proto.providerFileToId = function providerFileToId(file) {\n    return generateFileID({\n      data: file,\n      name: file.name || file.id,\n      type: file.mimeType\n    });\n  };\n\n  _proto.handleAuth = function handleAuth() {\n    var _this4 = this;\n\n    var authState = btoa(JSON.stringify({\n      origin: getOrigin()\n    }));\n    var clientVersion = \"@uppy/provider-views=\" + ProviderView.VERSION;\n    var link = this.provider.authUrl({\n      state: authState,\n      uppyVersions: clientVersion\n    });\n    var authWindow = window.open(link, '_blank');\n\n    var handleToken = function handleToken(e) {\n      if (!_this4._isOriginAllowed(e.origin, _this4.plugin.opts.companionAllowedHosts) || e.source !== authWindow) {\n        _this4.plugin.uppy.log(\"rejecting event from \" + e.origin + \" vs allowed pattern \" + _this4.plugin.opts.companionAllowedHosts);\n\n        return;\n      } // Check if it's a string before doing the JSON.parse to maintain support\n      // for older Companion versions that used object references\n\n\n      var data = typeof e.data === 'string' ? JSON.parse(e.data) : e.data;\n\n      if (!data.token) {\n        _this4.plugin.uppy.log('did not receive token from auth window');\n\n        return;\n      }\n\n      authWindow.close();\n      window.removeEventListener('message', handleToken);\n\n      _this4.provider.setAuthToken(data.token);\n\n      _this4.preFirstRender();\n    };\n\n    window.addEventListener('message', handleToken);\n  };\n\n  _proto._isOriginAllowed = function _isOriginAllowed(origin, allowedOrigin) {\n    var getRegex = function getRegex(value) {\n      if (typeof value === 'string') {\n        return new RegExp(\"^\" + value + \"$\");\n      } else if (value instanceof RegExp) {\n        return value;\n      }\n    };\n\n    var patterns = Array.isArray(allowedOrigin) ? allowedOrigin.map(getRegex) : [getRegex(allowedOrigin)];\n    return patterns.filter(function (pattern) {\n      return pattern != null;\n    }) // loose comparison to catch undefined\n    .some(function (pattern) {\n      return pattern.test(origin) || pattern.test(origin + \"/\");\n    }); // allowing for trailing '/'\n  };\n\n  _proto.handleError = function handleError(error) {\n    var uppy = this.plugin.uppy;\n    uppy.log(error.toString());\n\n    if (error.isAuthError) {\n      return;\n    }\n\n    var message = uppy.i18n('companionError');\n    uppy.info({\n      message: message,\n      details: error.toString()\n    }, 'error', 5000);\n  };\n\n  _proto.handleScroll = function handleScroll(e) {\n    var _this5 = this;\n\n    var scrollPos = e.target.scrollHeight - (e.target.scrollTop + e.target.offsetHeight);\n    var path = this.nextPagePath || null;\n\n    if (scrollPos < 50 && path && !this._isHandlingScroll) {\n      this.provider.list(path).then(function (res) {\n        var _this5$plugin$getPlug = _this5.plugin.getPluginState(),\n            files = _this5$plugin$getPlug.files,\n            folders = _this5$plugin$getPlug.folders;\n\n        _this5._updateFilesAndFolders(res, files, folders);\n      }).catch(this.handleError).then(function () {\n        _this5._isHandlingScroll = false;\n      }); // always called\n\n      this._isHandlingScroll = true;\n    }\n  };\n\n  _proto.listAllFiles = function listAllFiles(path, files) {\n    var _this6 = this;\n\n    if (files === void 0) {\n      files = null;\n    }\n\n    files = files || [];\n    return new Promise(function (resolve, reject) {\n      _this6.provider.list(path).then(function (res) {\n        res.items.forEach(function (item) {\n          if (!item.isFolder) {\n            files.push(item);\n          } else {\n            _this6.addFolder(item);\n          }\n        });\n        var moreFiles = res.nextPagePath || null;\n\n        if (moreFiles) {\n          return _this6.listAllFiles(moreFiles, files).then(function (files) {\n            return resolve(files);\n          }).catch(function (e) {\n            return reject(e);\n          });\n        } else {\n          return resolve(files);\n        }\n      }).catch(function (e) {\n        return reject(e);\n      });\n    });\n  };\n\n  _proto.donePicking = function donePicking() {\n    var _this7 = this;\n\n    var _this$plugin$getPlugi = this.plugin.getPluginState(),\n        currentSelection = _this$plugin$getPlugi.currentSelection;\n\n    var promises = currentSelection.map(function (file) {\n      if (file.isFolder) {\n        return _this7.addFolder(file);\n      } else {\n        return _this7.addFile(file);\n      }\n    });\n\n    this._sharedHandler.loaderWrapper(Promise.all(promises), function () {\n      _this7.clearSelection();\n    }, function () {});\n  };\n\n  _proto.cancelPicking = function cancelPicking() {\n    this.clearSelection();\n    var dashboard = this.plugin.uppy.getPlugin('Dashboard');\n    if (dashboard) dashboard.hideAllPanels();\n  };\n\n  _proto.clearSelection = function clearSelection() {\n    this.plugin.setPluginState({\n      currentSelection: []\n    });\n  };\n\n  _proto.render = function render(state, viewOptions) {\n    if (viewOptions === void 0) {\n      viewOptions = {};\n    }\n\n    var _this$plugin$getPlugi2 = this.plugin.getPluginState(),\n        authenticated = _this$plugin$getPlugi2.authenticated,\n        didFirstRender = _this$plugin$getPlugi2.didFirstRender;\n\n    if (!didFirstRender) {\n      this.preFirstRender();\n    } // reload pluginState for \"loading\" attribute because it might\n    // have changed above.\n\n\n    if (this.plugin.getPluginState().loading) {\n      return h(CloseWrapper, {\n        onUnmount: this.clearSelection\n      }, h(LoaderView, {\n        i18n: this.plugin.uppy.i18n\n      }));\n    }\n\n    if (!authenticated) {\n      return h(CloseWrapper, {\n        onUnmount: this.clearSelection\n      }, h(AuthView, {\n        pluginName: this.plugin.title,\n        pluginIcon: this.plugin.icon,\n        handleAuth: this.handleAuth,\n        i18n: this.plugin.uppy.i18n,\n        i18nArray: this.plugin.uppy.i18nArray\n      }));\n    }\n\n    var targetViewOptions = _extends({}, this.opts, viewOptions);\n\n    var headerProps = {\n      showBreadcrumbs: targetViewOptions.showBreadcrumbs,\n      getFolder: this.getFolder,\n      directories: this.plugin.getPluginState().directories,\n      pluginIcon: this.plugin.icon,\n      title: this.plugin.title,\n      logout: this.logout,\n      username: this.username,\n      i18n: this.plugin.uppy.i18n\n    };\n\n    var browserProps = _extends({}, this.plugin.getPluginState(), {\n      username: this.username,\n      getNextFolder: this.getNextFolder,\n      getFolder: this.getFolder,\n      filterItems: this._sharedHandler.filterItems,\n      filterQuery: this.filterQuery,\n      sortByTitle: this.sortByTitle,\n      sortByDate: this.sortByDate,\n      logout: this.logout,\n      isChecked: this._sharedHandler.isChecked,\n      toggleCheckbox: this._sharedHandler.toggleCheckbox,\n      handleScroll: this.handleScroll,\n      listAllFiles: this.listAllFiles,\n      done: this.donePicking,\n      cancel: this.cancelPicking,\n      headerComponent: Header(headerProps),\n      title: this.plugin.title,\n      viewType: targetViewOptions.viewType,\n      showTitles: targetViewOptions.showTitles,\n      showFilter: targetViewOptions.showFilter,\n      showBreadcrumbs: targetViewOptions.showBreadcrumbs,\n      pluginIcon: this.plugin.icon,\n      i18n: this.plugin.uppy.i18n,\n      uppyFiles: this.plugin.uppy.getFiles(),\n      validateRestrictions: this.plugin.uppy.validateRestrictions\n    });\n\n    return h(CloseWrapper, {\n      onUnmount: this.clearSelection\n    }, h(Browser, browserProps));\n  };\n\n  return ProviderView;\n}(), _class.VERSION = \"1.11.0\", _temp);","var _require = require('preact'),\n    h = _require.h;\n\nmodule.exports = function (props) {\n  return [h(\"span\", {\n    class: \"uppy-ProviderBrowser-user\",\n    key: \"username\"\n  }, props.username), h(\"button\", {\n    type: \"button\",\n    onclick: props.logout,\n    class: \"uppy-u-reset uppy-ProviderBrowser-userLogout\",\n    key: \"logout\"\n  }, props.i18n('logOut'))];\n};","module.exports = require('./ProviderView');","var _require = require('preact'),\n    h = _require.h;\n\nmodule.exports = function (props) {\n  return h(\"button\", {\n    type: \"button\",\n    onclick: props.triggerSearchInput,\n    class: \"uppy-u-reset uppy-ProviderBrowser-userLogout\"\n  }, props.i18n('backToSearch'));\n};","var _require = require('preact'),\n    h = _require.h;\n\nmodule.exports = function (props) {\n  var input;\n\n  var handleKeyPress = function handleKeyPress(ev) {\n    if (ev.keyCode === 13) {\n      validateAndSearch();\n    }\n  };\n\n  var validateAndSearch = function validateAndSearch() {\n    if (input.value) {\n      props.search(input.value);\n    }\n  };\n\n  return h(\"div\", {\n    class: \"uppy-SearchProvider\"\n  }, h(\"input\", {\n    class: \"uppy-u-reset uppy-c-textInput uppy-SearchProvider-input\",\n    type: \"text\",\n    \"aria-label\": props.i18n('enterTextToSearch'),\n    placeholder: props.i18n('enterTextToSearch'),\n    onkeyup: handleKeyPress,\n    ref: function ref(input_) {\n      input = input_;\n    },\n    \"data-uppy-super-focusable\": true\n  }), h(\"button\", {\n    class: \"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-SearchProvider-searchButton\",\n    type: \"button\",\n    onclick: validateAndSearch\n  }, props.i18n('searchImages')));\n};","var _class, _temp;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nvar _require = require('preact'),\n    h = _require.h;\n\nvar SearchInput = require('./InputView');\n\nvar Browser = require('../Browser');\n\nvar LoaderView = require('../Loader');\n\nvar generateFileID = require('@uppy/utils/lib/generateFileID');\n\nvar getFileType = require('@uppy/utils/lib/getFileType');\n\nvar isPreviewSupported = require('@uppy/utils/lib/isPreviewSupported');\n\nvar Header = require('./Header');\n\nvar SharedHandler = require('../SharedHandler');\n\nvar CloseWrapper = require('../CloseWrapper');\n/**\n * Class to easily generate generic views for Provider plugins\n */\n\n\nmodule.exports = (_temp = _class = /*#__PURE__*/function () {\n  /**\n   * @param {object} plugin instance of the plugin\n   * @param {object} opts\n   */\n  function ProviderView(plugin, opts) {\n    this.plugin = plugin;\n    this.provider = opts.provider;\n    this._sharedHandler = new SharedHandler(plugin); // set default options\n\n    var defaultOptions = {\n      viewType: 'grid',\n      showTitles: false,\n      showFilter: false,\n      showBreadcrumbs: false\n    }; // merge default options with the ones set by user\n\n    this.opts = _extends({}, defaultOptions, opts); // Logic\n\n    this.search = this.search.bind(this);\n    this.triggerSearchInput = this.triggerSearchInput.bind(this);\n    this.addFile = this.addFile.bind(this);\n    this.preFirstRender = this.preFirstRender.bind(this);\n    this.handleError = this.handleError.bind(this);\n    this.handleScroll = this.handleScroll.bind(this);\n    this.donePicking = this.donePicking.bind(this);\n    this.cancelPicking = this.cancelPicking.bind(this);\n    this.clearSelection = this.clearSelection.bind(this); // Visual\n\n    this.render = this.render.bind(this);\n    this.clearSelection(); // Set default state for the plugin\n\n    this.plugin.setPluginState({\n      isInputMode: true,\n      files: [],\n      folders: [],\n      directories: [],\n      filterInput: '',\n      isSearchVisible: false\n    });\n  }\n\n  var _proto = ProviderView.prototype;\n\n  _proto.tearDown = function tearDown() {// Nothing.\n  };\n\n  _proto._updateFilesAndInputMode = function _updateFilesAndInputMode(res, files) {\n    this.nextPageQuery = res.nextPageQuery;\n    this._searchTerm = res.searchedFor;\n    res.items.forEach(function (item) {\n      files.push(item);\n    });\n    this.plugin.setPluginState({\n      isInputMode: false,\n      files: files\n    });\n  }\n  /**\n   * Called only the first time the provider view is rendered.\n   * Kind of like an init function.\n   */\n  ;\n\n  _proto.preFirstRender = function preFirstRender() {\n    this.plugin.setPluginState({\n      didFirstRender: true\n    });\n    this.plugin.onFirstRender();\n  };\n\n  _proto.search = function search(query) {\n    var _this = this;\n\n    if (query && query === this._searchTerm) {\n      // no need to search again as this is the same as the previous search\n      this.plugin.setPluginState({\n        isInputMode: false\n      });\n      return;\n    }\n\n    return this._sharedHandler.loaderWrapper(this.provider.search(query), function (res) {\n      _this._updateFilesAndInputMode(res, []);\n    }, this.handleError);\n  };\n\n  _proto.triggerSearchInput = function triggerSearchInput() {\n    this.plugin.setPluginState({\n      isInputMode: true\n    });\n  } // @todo this function should really be a function of the plugin and not the view.\n  // maybe we should consider creating a base ProviderPlugin class that has this method\n  ;\n\n  _proto.addFile = function addFile(file) {\n    var tagFile = {\n      id: this.providerFileToId(file),\n      source: this.plugin.id,\n      data: file,\n      name: file.name || file.id,\n      type: file.mimeType,\n      isRemote: true,\n      body: {\n        fileId: file.id\n      },\n      remote: {\n        companionUrl: this.plugin.opts.companionUrl,\n        url: \"\" + this.provider.fileUrl(file.requestPath),\n        body: {\n          fileId: file.id\n        },\n        providerOptions: _extends({}, this.provider.opts, {\n          provider: null\n        })\n      }\n    };\n    var fileType = getFileType(tagFile); // TODO Should we just always use the thumbnail URL if it exists?\n\n    if (fileType && isPreviewSupported(fileType)) {\n      tagFile.preview = file.thumbnail;\n    }\n\n    this.plugin.uppy.log('Adding remote file');\n\n    try {\n      this.plugin.uppy.addFile(tagFile);\n    } catch (err) {\n      if (!err.isRestriction) {\n        this.plugin.uppy.log(err);\n      }\n    }\n  };\n\n  _proto.providerFileToId = function providerFileToId(file) {\n    return generateFileID({\n      data: file,\n      name: file.name || file.id,\n      type: file.mimeType\n    });\n  };\n\n  _proto.handleError = function handleError(error) {\n    var uppy = this.plugin.uppy;\n    uppy.log(error.toString());\n    var message = uppy.i18n('companionError');\n    uppy.info({\n      message: message,\n      details: error.toString()\n    }, 'error', 5000);\n  };\n\n  _proto.handleScroll = function handleScroll(e) {\n    var _this2 = this;\n\n    var scrollPos = e.target.scrollHeight - (e.target.scrollTop + e.target.offsetHeight);\n    var query = this.nextPageQuery || null;\n\n    if (scrollPos < 50 && query && !this._isHandlingScroll) {\n      this.provider.search(this._searchTerm, query).then(function (res) {\n        var _this2$plugin$getPlug = _this2.plugin.getPluginState(),\n            files = _this2$plugin$getPlug.files;\n\n        _this2._updateFilesAndInputMode(res, files);\n      }).catch(this.handleError).then(function () {\n        _this2._isHandlingScroll = false;\n      }); // always called\n\n      this._isHandlingScroll = true;\n    }\n  };\n\n  _proto.donePicking = function donePicking() {\n    var _this3 = this;\n\n    var _this$plugin$getPlugi = this.plugin.getPluginState(),\n        currentSelection = _this$plugin$getPlugi.currentSelection;\n\n    var promises = currentSelection.map(function (file) {\n      return _this3.addFile(file);\n    });\n\n    this._sharedHandler.loaderWrapper(Promise.all(promises), function () {\n      _this3.clearSelection();\n    }, function () {});\n  };\n\n  _proto.cancelPicking = function cancelPicking() {\n    this.clearSelection();\n    var dashboard = this.plugin.uppy.getPlugin('Dashboard');\n    if (dashboard) dashboard.hideAllPanels();\n  };\n\n  _proto.clearSelection = function clearSelection() {\n    this.plugin.setPluginState({\n      currentSelection: []\n    });\n  };\n\n  _proto.render = function render(state, viewOptions) {\n    if (viewOptions === void 0) {\n      viewOptions = {};\n    }\n\n    var _this$plugin$getPlugi2 = this.plugin.getPluginState(),\n        didFirstRender = _this$plugin$getPlugi2.didFirstRender,\n        isInputMode = _this$plugin$getPlugi2.isInputMode;\n\n    if (!didFirstRender) {\n      this.preFirstRender();\n    } // reload pluginState for \"loading\" attribute because it might\n    // have changed above.\n\n\n    if (this.plugin.getPluginState().loading) {\n      return h(CloseWrapper, {\n        onUnmount: this.clearSelection\n      }, h(LoaderView, {\n        i18n: this.plugin.uppy.i18n\n      }));\n    }\n\n    if (isInputMode) {\n      return h(CloseWrapper, {\n        onUnmount: this.clearSelection\n      }, h(SearchInput, {\n        search: this.search,\n        i18n: this.plugin.uppy.i18n\n      }));\n    }\n\n    var targetViewOptions = _extends({}, this.opts, viewOptions);\n\n    var browserProps = _extends({}, this.plugin.getPluginState(), {\n      isChecked: this._sharedHandler.isChecked,\n      toggleCheckbox: this._sharedHandler.toggleCheckbox,\n      handleScroll: this.handleScroll,\n      done: this.donePicking,\n      cancel: this.cancelPicking,\n      headerComponent: Header({\n        triggerSearchInput: this.triggerSearchInput,\n        i18n: this.plugin.uppy.i18n\n      }),\n      title: this.plugin.title,\n      viewType: targetViewOptions.viewType,\n      showTitles: targetViewOptions.showTitles,\n      showFilter: targetViewOptions.showFilter,\n      showBreadcrumbs: targetViewOptions.showBreadcrumbs,\n      pluginIcon: this.plugin.icon,\n      i18n: this.plugin.uppy.i18n,\n      uppyFiles: this.plugin.uppy.getFiles(),\n      validateRestrictions: this.plugin.uppy.validateRestrictions\n    });\n\n    return h(CloseWrapper, {\n      onUnmount: this.clearSelection\n    }, h(Browser, browserProps));\n  };\n\n  return ProviderView;\n}(), _class.VERSION = \"1.11.0\", _temp);","module.exports = require('./SearchProviderView');","var remoteFileObjToLocal = require('@uppy/utils/lib/remoteFileObjToLocal');\n\nmodule.exports = /*#__PURE__*/function () {\n  function SharedHandler(plugin) {\n    this.plugin = plugin;\n    this.filterItems = this.filterItems.bind(this);\n    this.toggleCheckbox = this.toggleCheckbox.bind(this);\n    this.isChecked = this.isChecked.bind(this);\n    this.loaderWrapper = this.loaderWrapper.bind(this);\n  }\n\n  var _proto = SharedHandler.prototype;\n\n  _proto.filterItems = function filterItems(items) {\n    var state = this.plugin.getPluginState();\n\n    if (!state.filterInput || state.filterInput === '') {\n      return items;\n    }\n\n    return items.filter(function (folder) {\n      return folder.name.toLowerCase().indexOf(state.filterInput.toLowerCase()) !== -1;\n    });\n  }\n  /**\n   * Toggles file/folder checkbox to on/off state while updating files list.\n   *\n   * Note that some extra complexity comes from supporting shift+click to\n   * toggle multiple checkboxes at once, which is done by getting all files\n   * in between last checked file and current one.\n   */\n  ;\n\n  _proto.toggleCheckbox = function toggleCheckbox(e, file) {\n    var _this = this;\n\n    e.stopPropagation();\n    e.preventDefault();\n    e.currentTarget.focus();\n\n    var _this$plugin$getPlugi = this.plugin.getPluginState(),\n        folders = _this$plugin$getPlugi.folders,\n        files = _this$plugin$getPlugi.files;\n\n    var items = this.filterItems(folders.concat(files)); // Shift-clicking selects a single consecutive list of items\n    // starting at the previous click and deselects everything else.\n\n    if (this.lastCheckbox && e.shiftKey) {\n      var _currentSelection;\n\n      var prevIndex = items.indexOf(this.lastCheckbox);\n      var currentIndex = items.indexOf(file);\n\n      if (prevIndex < currentIndex) {\n        _currentSelection = items.slice(prevIndex, currentIndex + 1);\n      } else {\n        _currentSelection = items.slice(currentIndex, prevIndex + 1);\n      } // Check restrictions on each file in currentSelection,\n      // reduce it to only contain files that pass restrictions\n\n\n      _currentSelection = _currentSelection.reduce(function (reducedCurrentSelection, item) {\n        var uppy = _this.plugin.uppy;\n        var validatedRestrictions = uppy.validateRestrictions(remoteFileObjToLocal(item), [].concat(uppy.getFiles(), reducedCurrentSelection));\n\n        if (!validatedRestrictions.result) {\n          uppy.info({\n            message: validatedRestrictions.reason\n          }, 'error', uppy.opts.infoTimeout);\n          return reducedCurrentSelection;\n        }\n\n        return [].concat(reducedCurrentSelection, [item]);\n      });\n      this.plugin.setPluginState({\n        currentSelection: _currentSelection\n      });\n      return;\n    }\n\n    this.lastCheckbox = file;\n\n    var _this$plugin$getPlugi2 = this.plugin.getPluginState(),\n        currentSelection = _this$plugin$getPlugi2.currentSelection;\n\n    if (this.isChecked(file)) {\n      this.plugin.setPluginState({\n        currentSelection: currentSelection.filter(function (item) {\n          return item.id !== file.id;\n        })\n      });\n    } else {\n      this.plugin.setPluginState({\n        currentSelection: currentSelection.concat([file])\n      });\n    }\n  };\n\n  _proto.isChecked = function isChecked(file) {\n    var _this$plugin$getPlugi3 = this.plugin.getPluginState(),\n        currentSelection = _this$plugin$getPlugi3.currentSelection; // comparing id instead of the file object, because the reference to the object\n    // changes when we switch folders, and the file list is updated\n\n\n    return currentSelection.some(function (item) {\n      return item.id === file.id;\n    });\n  };\n\n  _proto.loaderWrapper = function loaderWrapper(promise, then, catch_) {\n    var _this2 = this;\n\n    promise.then(function (result) {\n      _this2.plugin.setPluginState({\n        loading: false\n      });\n\n      then(result);\n    }).catch(function (err) {\n      _this2.plugin.setPluginState({\n        loading: false\n      });\n\n      catch_(err);\n    });\n    this.plugin.setPluginState({\n      loading: true\n    });\n  };\n\n  return SharedHandler;\n}();","var ProviderViews = require('./ProviderView');\n\nvar SearchProviderViews = require('./SearchProviderView');\n\nmodule.exports = {\n  ProviderViews: ProviderViews,\n  SearchProviderViews: SearchProviderViews\n};","function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nvar _require = require('preact'),\n    h = _require.h,\n    Component = _require.Component;\n\nvar UrlUI = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(UrlUI, _Component);\n\n  function UrlUI(props) {\n    var _this;\n\n    _this = _Component.call(this, props) || this;\n    _this.handleKeyPress = _this.handleKeyPress.bind(_assertThisInitialized(_this));\n    _this.handleClick = _this.handleClick.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  var _proto = UrlUI.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.input.value = '';\n  };\n\n  _proto.handleKeyPress = function handleKeyPress(ev) {\n    if (ev.keyCode === 13) {\n      this.props.addFile(this.input.value);\n    }\n  };\n\n  _proto.handleClick = function handleClick() {\n    this.props.addFile(this.input.value);\n  };\n\n  _proto.render = function render() {\n    var _this2 = this;\n\n    return h(\"div\", {\n      class: \"uppy-Url\"\n    }, h(\"input\", {\n      class: \"uppy-u-reset uppy-c-textInput uppy-Url-input\",\n      type: \"text\",\n      \"aria-label\": this.props.i18n('enterUrlToImport'),\n      placeholder: this.props.i18n('enterUrlToImport'),\n      onkeyup: this.handleKeyPress,\n      ref: function ref(input) {\n        _this2.input = input;\n      },\n      \"data-uppy-super-focusable\": true\n    }), h(\"button\", {\n      class: \"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Url-importButton\",\n      type: \"button\",\n      onclick: this.handleClick\n    }, this.props.i18n('import')));\n  };\n\n  return UrlUI;\n}(Component);\n\nmodule.exports = UrlUI;","var _class, _temp;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nvar _require = require('@uppy/core'),\n    Plugin = _require.Plugin;\n\nvar Translator = require('@uppy/utils/lib/Translator');\n\nvar _require2 = require('preact'),\n    h = _require2.h;\n\nvar _require3 = require('@uppy/companion-client'),\n    RequestClient = _require3.RequestClient;\n\nvar UrlUI = require('./UrlUI.js');\n\nvar forEachDroppedOrPastedUrl = require('./utils/forEachDroppedOrPastedUrl');\n\nfunction UrlIcon() {\n  return h(\"svg\", {\n    \"aria-hidden\": \"true\",\n    focusable: \"false\",\n    width: \"32\",\n    height: \"32\",\n    viewBox: \"0 0 32 32\"\n  }, h(\"g\", {\n    fill: \"none\",\n    \"fill-rule\": \"evenodd\"\n  }, h(\"rect\", {\n    fill: \"#FF753E\",\n    width: \"32\",\n    height: \"32\",\n    rx: \"16\"\n  }), h(\"path\", {\n    d: \"M22.788 15.389l-2.199 2.19a3.184 3.184 0 0 1-.513.437c-.806.584-1.686.876-2.638.876a4.378 4.378 0 0 1-3.519-1.752c-.22-.292-.146-.802.147-1.021.293-.22.806-.146 1.026.146.953 1.313 2.785 1.532 4.105.583a.571.571 0 0 0 .293-.292l2.199-2.189c1.1-1.167 1.1-2.992-.073-4.086a2.976 2.976 0 0 0-4.105 0l-1.246 1.24a.71.71 0 0 1-1.026 0 .703.703 0 0 1 0-1.022l1.246-1.24a4.305 4.305 0 0 1 6.083 0c1.833 1.605 1.906 4.451.22 6.13zm-7.183 5.035l-1.246 1.24a2.976 2.976 0 0 1-4.105 0c-1.172-1.094-1.172-2.991-.073-4.086l2.2-2.19.292-.291c.66-.438 1.393-.657 2.2-.584.805.146 1.465.51 1.905 1.168.22.292.733.365 1.026.146.293-.22.367-.73.147-1.022-.733-.949-1.76-1.532-2.859-1.678-1.1-.22-2.272.073-3.225.802l-.44.438-2.199 2.19c-1.686 1.75-1.612 4.524.074 6.202.88.803 1.979 1.241 3.078 1.241 1.1 0 2.199-.438 3.079-1.24l1.246-1.241a.703.703 0 0 0 0-1.022c-.294-.292-.807-.365-1.1-.073z\",\n    fill: \"#FFF\",\n    \"fill-rule\": \"nonzero\"\n  })));\n}\n/**\n * Url\n *\n */\n\n\nmodule.exports = (_temp = _class = /*#__PURE__*/function (_Plugin) {\n  _inheritsLoose(Url, _Plugin);\n\n  function Url(uppy, opts) {\n    var _this;\n\n    _this = _Plugin.call(this, uppy, opts) || this;\n    _this.id = _this.opts.id || 'Url';\n    _this.title = _this.opts.title || 'Link';\n    _this.type = 'acquirer';\n\n    _this.icon = function () {\n      return h(UrlIcon, null);\n    }; // Set default options and locale\n\n\n    _this.defaultLocale = {\n      strings: {\n        import: 'Import',\n        enterUrlToImport: 'Enter URL to import a file',\n        failedToFetch: 'Companion failed to fetch this URL, please make sure its correct',\n        enterCorrectUrl: 'Incorrect URL: Please make sure you are entering a direct link to a file'\n      }\n    };\n    var defaultOptions = {};\n    _this.opts = _extends({}, defaultOptions, opts);\n\n    _this.i18nInit();\n\n    _this.hostname = _this.opts.companionUrl;\n\n    if (!_this.hostname) {\n      throw new Error('Companion hostname is required, please consult https://uppy.io/docs/companion');\n    } // Bind all event handlers for referencability\n\n\n    _this.getMeta = _this.getMeta.bind(_assertThisInitialized(_this));\n    _this.addFile = _this.addFile.bind(_assertThisInitialized(_this));\n    _this.handleRootDrop = _this.handleRootDrop.bind(_assertThisInitialized(_this));\n    _this.handleRootPaste = _this.handleRootPaste.bind(_assertThisInitialized(_this));\n    _this.client = new RequestClient(uppy, {\n      companionUrl: _this.opts.companionUrl,\n      companionHeaders: _this.opts.companionHeaders || _this.opts.serverHeaders\n    });\n    return _this;\n  }\n\n  var _proto = Url.prototype;\n\n  _proto.setOptions = function setOptions(newOpts) {\n    _Plugin.prototype.setOptions.call(this, newOpts);\n\n    this.i18nInit();\n  };\n\n  _proto.i18nInit = function i18nInit() {\n    this.translator = new Translator([this.defaultLocale, this.uppy.locale, this.opts.locale]);\n    this.i18n = this.translator.translate.bind(this.translator);\n    this.i18nArray = this.translator.translateArray.bind(this.translator);\n    this.setPluginState(); // so that UI re-renders and we see the updated locale\n  };\n\n  _proto.getFileNameFromUrl = function getFileNameFromUrl(url) {\n    return url.substring(url.lastIndexOf('/') + 1);\n  };\n\n  _proto.checkIfCorrectURL = function checkIfCorrectURL(url) {\n    if (!url) return false;\n    var protocol = url.match(/^([a-z0-9]+):\\/\\//)[1];\n\n    if (protocol !== 'http' && protocol !== 'https') {\n      return false;\n    }\n\n    return true;\n  };\n\n  _proto.addProtocolToURL = function addProtocolToURL(url) {\n    var protocolRegex = /^[a-z0-9]+:\\/\\//;\n    var defaultProtocol = 'http://';\n\n    if (protocolRegex.test(url)) {\n      return url;\n    }\n\n    return defaultProtocol + url;\n  };\n\n  _proto.getMeta = function getMeta(url) {\n    var _this2 = this;\n\n    return this.client.post('url/meta', {\n      url: url\n    }).then(function (res) {\n      if (res.error) {\n        _this2.uppy.log('[URL] Error:');\n\n        _this2.uppy.log(res.error);\n\n        throw new Error('Failed to fetch the file');\n      }\n\n      return res;\n    });\n  };\n\n  _proto.addFile = function addFile(url) {\n    var _this3 = this;\n\n    url = this.addProtocolToURL(url);\n\n    if (!this.checkIfCorrectURL(url)) {\n      this.uppy.log(\"[URL] Incorrect URL entered: \" + url);\n      this.uppy.info(this.i18n('enterCorrectUrl'), 'error', 4000);\n      return;\n    }\n\n    return this.getMeta(url).then(function (meta) {\n      var tagFile = {\n        source: _this3.id,\n        name: _this3.getFileNameFromUrl(url),\n        type: meta.type,\n        data: {\n          size: meta.size\n        },\n        isRemote: true,\n        body: {\n          url: url\n        },\n        remote: {\n          companionUrl: _this3.opts.companionUrl,\n          url: _this3.hostname + \"/url/get\",\n          body: {\n            fileId: url,\n            url: url\n          },\n          providerOptions: _this3.client.opts\n        }\n      };\n      return tagFile;\n    }).then(function (tagFile) {\n      _this3.uppy.log('[Url] Adding remote file');\n\n      try {\n        _this3.uppy.addFile(tagFile);\n      } catch (err) {\n        if (!err.isRestriction) {\n          _this3.uppy.log(err);\n        }\n      }\n    }).catch(function (err) {\n      _this3.uppy.log(err);\n\n      _this3.uppy.info({\n        message: _this3.i18n('failedToFetch'),\n        details: err\n      }, 'error', 4000);\n    });\n  };\n\n  _proto.handleRootDrop = function handleRootDrop(e) {\n    var _this4 = this;\n\n    forEachDroppedOrPastedUrl(e.dataTransfer, 'drop', function (url) {\n      _this4.uppy.log(\"[URL] Adding file from dropped url: \" + url);\n\n      _this4.addFile(url);\n    });\n  };\n\n  _proto.handleRootPaste = function handleRootPaste(e) {\n    var _this5 = this;\n\n    forEachDroppedOrPastedUrl(e.clipboardData, 'paste', function (url) {\n      _this5.uppy.log(\"[URL] Adding file from pasted url: \" + url);\n\n      _this5.addFile(url);\n    });\n  };\n\n  _proto.render = function render(state) {\n    return h(UrlUI, {\n      i18n: this.i18n,\n      addFile: this.addFile\n    });\n  };\n\n  _proto.install = function install() {\n    var target = this.opts.target;\n\n    if (target) {\n      this.mount(target, this);\n    }\n  };\n\n  _proto.uninstall = function uninstall() {\n    this.unmount();\n  };\n\n  return Url;\n}(Plugin), _class.VERSION = \"1.5.16\", _temp);","var toArray = require('@uppy/utils/lib/toArray');\n/*\n  SITUATION\n\n    1. Cross-browser dataTransfer.items\n\n      paste in chrome [Copy Image]:\n      0: {kind: \"file\", type: \"image/png\"}\n      1: {kind: \"string\", type: \"text/html\"}\n      paste in safari [Copy Image]:\n      0: {kind: \"file\", type: \"image/png\"}\n      1: {kind: \"string\", type: \"text/html\"}\n      2: {kind: \"string\", type: \"text/plain\"}\n      3: {kind: \"string\", type: \"text/uri-list\"}\n      paste in firefox [Copy Image]:\n      0: {kind: \"file\", type: \"image/png\"}\n      1: {kind: \"string\", type: \"text/html\"}\n\n      paste in chrome [Copy Image Address]:\n      0: {kind: \"string\", type: \"text/plain\"}\n      paste in safari [Copy Image Address]:\n      0: {kind: \"string\", type: \"text/plain\"}\n      1: {kind: \"string\", type: \"text/uri-list\"}\n      paste in firefox [Copy Image Address]:\n      0: {kind: \"string\", type: \"text/plain\"}\n\n      drop in chrome [from browser]:\n      0: {kind: \"string\", type: \"text/uri-list\"}\n      1: {kind: \"string\", type: \"text/html\"}\n      drop in safari [from browser]:\n      0: {kind: \"string\", type: \"text/uri-list\"}\n      1: {kind: \"string\", type: \"text/html\"}\n      2: {kind: \"file\", type: \"image/png\"}\n      drop in firefox [from browser]:\n      0: {kind: \"string\", type: \"text/uri-list\"}\n      1: {kind: \"string\", type: \"text/x-moz-url\"}\n      2: {kind: \"string\", type: \"text/plain\"}\n\n    2. We can determine if it's a 'copypaste' or a 'drop', but we can't discern between [Copy Image] and [Copy Image Address].\n\n  CONCLUSION\n\n    1. 'paste' ([Copy Image] or [Copy Image Address], we can't discern between these two)\n      Don't do anything if there is 'file' item. .handlePaste in the DashboardPlugin will deal with all 'file' items.\n      If there are no 'file' items - handle 'text/plain' items.\n\n    2. 'drop'\n      Take 'text/uri-list' items. Safari has an additional item of .kind === 'file', and you may worry about the item being duplicated (first by DashboardPlugin, and then by UrlPlugin, now), but don't. Directory handling code won't pay attention to this particular item of kind 'file'.\n*/\n\n/**\n * Finds all links dropped/pasted from one browser window to another.\n *\n * @param {object} dataTransfer - DataTransfer instance, e.g. e.clipboardData, or e.dataTransfer\n * @param {string} isDropOrPaste - either 'drop' or 'paste'\n * @param {Function} callback - (urlString) => {}\n */\n\n\nmodule.exports = function forEachDroppedOrPastedUrl(dataTransfer, isDropOrPaste, callback) {\n  var items = toArray(dataTransfer.items);\n  var urlItems;\n\n  switch (isDropOrPaste) {\n    case 'paste':\n      {\n        var atLeastOneFileIsDragged = items.some(function (item) {\n          return item.kind === 'file';\n        });\n\n        if (atLeastOneFileIsDragged) {\n          return;\n        } else {\n          urlItems = items.filter(function (item) {\n            return item.kind === 'string' && item.type === 'text/plain';\n          });\n        }\n\n        break;\n      }\n\n    case 'drop':\n      {\n        urlItems = items.filter(function (item) {\n          return item.kind === 'string' && item.type === 'text/uri-list';\n        });\n        break;\n      }\n\n    default:\n      {\n        throw new Error(\"isDropOrPaste must be either 'drop' or 'paste', but it's \" + isDropOrPaste);\n      }\n  }\n\n  urlItems.forEach(function (item) {\n    item.getAsString(function (urlString) {\n      return callback(urlString);\n    });\n  });\n};","function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\n\nfunction _wrapNativeSuper(Class) { var _cache = typeof Map === \"function\" ? new Map() : undefined; _wrapNativeSuper = function _wrapNativeSuper(Class) { if (Class === null || !_isNativeFunction(Class)) return Class; if (typeof Class !== \"function\") { throw new TypeError(\"Super expression must either be null or a function\"); } if (typeof _cache !== \"undefined\") { if (_cache.has(Class)) return _cache.get(Class); _cache.set(Class, Wrapper); } function Wrapper() { return _construct(Class, arguments, _getPrototypeOf(this).constructor); } Wrapper.prototype = Object.create(Class.prototype, { constructor: { value: Wrapper, enumerable: false, writable: true, configurable: true } }); return _setPrototypeOf(Wrapper, Class); }; return _wrapNativeSuper(Class); }\n\nfunction _construct(Parent, args, Class) { if (_isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _isNativeFunction(fn) { return Function.toString.call(fn).indexOf(\"[native code]\") !== -1; }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nvar NetworkError = /*#__PURE__*/function (_Error) {\n  _inheritsLoose(NetworkError, _Error);\n\n  function NetworkError(error, xhr) {\n    var _this;\n\n    if (xhr === void 0) {\n      xhr = null;\n    }\n\n    _this = _Error.call(this, \"This looks like a network error, the endpoint might be blocked by an internet provider or a firewall.\\n\\nSource error: [\" + error + \"]\") || this;\n    _this.isNetworkError = true;\n    _this.request = xhr;\n    return _this;\n  }\n\n  return NetworkError;\n}( /*#__PURE__*/_wrapNativeSuper(Error));\n\nmodule.exports = NetworkError;","var dataURItoBlob = require('./dataURItoBlob');\n/**\n * Save a <canvas> element's content to a Blob object.\n *\n * @param {HTMLCanvasElement} canvas\n * @returns {Promise}\n */\n\n\nmodule.exports = function canvasToBlob(canvas, type, quality) {\n  if (canvas.toBlob) {\n    return new Promise(function (resolve) {\n      canvas.toBlob(resolve, type, quality);\n    });\n  }\n\n  return Promise.resolve().then(function () {\n    return dataURItoBlob(canvas.toDataURL(type, quality), {});\n  });\n};","var NetworkError = require('./NetworkError');\n/**\n * Wrapper around window.fetch that throws a NetworkError when appropriate\n */\n\n\nmodule.exports = function fetchWithNetworkError() {\n  return fetch.apply(void 0, arguments).catch(function (err) {\n    if (err.name === 'AbortError') {\n      throw err;\n    } else {\n      throw new NetworkError(err);\n    }\n  });\n};","// TODO Check which types are actually supported in browsers. Chrome likes webm\n// from my testing, but we may need more.\n// We could use a library but they tend to contain dozens of KBs of mappings,\n// most of which will go unused, so not sure if that's worth it.\nvar mimeToExtensions = {\n  'audio/mp3': 'mp3',\n  'audio/mp4': 'mp4',\n  'audio/ogg': 'ogg',\n  'audio/webm': 'webm',\n  'image/gif': 'gif',\n  'image/heic': 'heic',\n  'image/heif': 'heif',\n  'image/jpeg': 'jpg',\n  'image/png': 'png',\n  'image/svg+xml': 'svg',\n  'video/mp4': 'mp4',\n  'video/ogg': 'ogv',\n  'video/quicktime': 'mov',\n  'video/webm': 'webm',\n  'video/x-matroska': 'mkv',\n  'video/x-msvideo': 'avi'\n};\n\nmodule.exports = function getFileTypeExtension(mimeType) {\n  // Remove the ; bit in 'video/x-matroska;codecs=avc1'\n  mimeType = mimeType.replace(/;.*$/, '');\n  return mimeToExtensions[mimeType] || null;\n};","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nvar getFileNameAndExtension = require('./getFileNameAndExtension');\n\nmodule.exports = function remoteFileObjToLocal(file) {\n  return _extends({}, file, {\n    type: file.mimeType,\n    extension: file.name ? getFileNameAndExtension(file.name).extension : null\n  });\n};","var _require = require('preact'),\n    h = _require.h;\n\nmodule.exports = function (props) {\n  return h(\"svg\", {\n    \"aria-hidden\": \"true\",\n    focusable: \"false\",\n    fill: \"#0097DC\",\n    width: \"66\",\n    height: \"55\",\n    viewBox: \"0 0 66 55\"\n  }, h(\"path\", {\n    d: \"M57.3 8.433c4.59 0 8.1 3.51 8.1 8.1v29.7c0 4.59-3.51 8.1-8.1 8.1H8.7c-4.59 0-8.1-3.51-8.1-8.1v-29.7c0-4.59 3.51-8.1 8.1-8.1h9.45l4.59-7.02c.54-.54 1.35-1.08 2.16-1.08h16.2c.81 0 1.62.54 2.16 1.08l4.59 7.02h9.45zM33 14.64c-8.62 0-15.393 6.773-15.393 15.393 0 8.62 6.773 15.393 15.393 15.393 8.62 0 15.393-6.773 15.393-15.393 0-8.62-6.773-15.393-15.393-15.393zM33 40c-5.648 0-9.966-4.319-9.966-9.967 0-5.647 4.318-9.966 9.966-9.966s9.966 4.319 9.966 9.966C42.966 35.681 38.648 40 33 40z\",\n    \"fill-rule\": \"evenodd\"\n  }));\n};","function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nvar _require = require('preact'),\n    h = _require.h,\n    Component = _require.Component;\n\nvar SnapshotButton = require('./SnapshotButton');\n\nvar RecordButton = require('./RecordButton');\n\nvar RecordingLength = require('./RecordingLength');\n\nvar VideoSourceSelect = require('./VideoSourceSelect');\n\nfunction isModeAvailable(modes, mode) {\n  return modes.indexOf(mode) !== -1;\n}\n\nvar CameraScreen = /*#__PURE__*/function (_Component) {\n  _inheritsLoose(CameraScreen, _Component);\n\n  function CameraScreen() {\n    return _Component.apply(this, arguments) || this;\n  }\n\n  var _proto = CameraScreen.prototype;\n\n  _proto.componentDidMount = function componentDidMount() {\n    this.props.onFocus();\n  };\n\n  _proto.componentWillUnmount = function componentWillUnmount() {\n    this.props.onStop();\n  };\n\n  _proto.render = function render() {\n    var shouldShowRecordButton = this.props.supportsRecording && (isModeAvailable(this.props.modes, 'video-only') || isModeAvailable(this.props.modes, 'audio-only') || isModeAvailable(this.props.modes, 'video-audio'));\n    var shouldShowSnapshotButton = isModeAvailable(this.props.modes, 'picture');\n    var shouldShowRecordingLength = this.props.supportsRecording && this.props.showRecordingLength;\n    var shouldShowVideoSourceDropdown = this.props.showVideoSourceDropdown && this.props.videoSources && this.props.videoSources.length > 1;\n    return h(\"div\", {\n      class: \"uppy uppy-Webcam-container\"\n    }, h(\"div\", {\n      class: \"uppy-Webcam-videoContainer\"\n    }, h(\"video\", {\n      class: \"uppy-Webcam-video  \" + (this.props.mirror ? 'uppy-Webcam-video--mirrored' : ''),\n      autoplay: true,\n      muted: true,\n      playsinline: true,\n      srcObject: this.props.src || ''\n    })), h(\"div\", {\n      class: \"uppy-Webcam-footer\"\n    }, h(\"div\", {\n      class: \"uppy-Webcam-videoSourceContainer\"\n    }, shouldShowVideoSourceDropdown ? VideoSourceSelect(this.props) : null), h(\"div\", {\n      class: \"uppy-Webcam-buttonContainer\"\n    }, shouldShowSnapshotButton ? SnapshotButton(this.props) : null, ' ', shouldShowRecordButton ? RecordButton(this.props) : null), h(\"div\", {\n      class: \"uppy-Webcam-recordingLength\"\n    }, shouldShowRecordingLength ? RecordingLength(this.props) : null)));\n  };\n\n  return CameraScreen;\n}(Component);\n\nmodule.exports = CameraScreen;","var _require = require('preact'),\n    h = _require.h;\n\nmodule.exports = function (props) {\n  return h(\"div\", {\n    class: \"uppy-Webcam-permissons\"\n  }, h(\"div\", {\n    class: \"uppy-Webcam-permissonsIcon\"\n  }, props.icon()), h(\"h1\", {\n    class: \"uppy-Webcam-title\"\n  }, props.hasCamera ? props.i18n('allowAccessTitle') : props.i18n('noCameraTitle')), h(\"p\", null, props.hasCamera ? props.i18n('allowAccessDescription') : props.i18n('noCameraDescription')));\n};","var _require = require('preact'),\n    h = _require.h;\n\nmodule.exports = function RecordButton(_ref) {\n  var recording = _ref.recording,\n      onStartRecording = _ref.onStartRecording,\n      onStopRecording = _ref.onStopRecording,\n      i18n = _ref.i18n;\n\n  if (recording) {\n    return h(\"button\", {\n      class: \"uppy-u-reset uppy-c-btn uppy-Webcam-button uppy-Webcam-button--video\",\n      type: \"button\",\n      title: i18n('stopRecording'),\n      \"aria-label\": i18n('stopRecording'),\n      onclick: onStopRecording,\n      \"data-uppy-super-focusable\": true\n    }, h(\"svg\", {\n      \"aria-hidden\": \"true\",\n      focusable: \"false\",\n      class: \"uppy-c-icon\",\n      width: \"100\",\n      height: \"100\",\n      viewBox: \"0 0 100 100\"\n    }, h(\"rect\", {\n      x: \"15\",\n      y: \"15\",\n      width: \"70\",\n      height: \"70\"\n    })));\n  }\n\n  return h(\"button\", {\n    class: \"uppy-u-reset uppy-c-btn uppy-Webcam-button uppy-Webcam-button--video\",\n    type: \"button\",\n    title: i18n('startRecording'),\n    \"aria-label\": i18n('startRecording'),\n    onclick: onStartRecording,\n    \"data-uppy-super-focusable\": true\n  }, h(\"svg\", {\n    \"aria-hidden\": \"true\",\n    focusable: \"false\",\n    class: \"uppy-c-icon\",\n    width: \"100\",\n    height: \"100\",\n    viewBox: \"0 0 100 100\"\n  }, h(\"circle\", {\n    cx: \"50\",\n    cy: \"50\",\n    r: \"40\"\n  })));\n};","var _require = require('preact'),\n    h = _require.h;\n\nvar formatSeconds = require('./formatSeconds');\n\nmodule.exports = function RecordingLength(_ref) {\n  var recordingLengthSeconds = _ref.recordingLengthSeconds,\n      i18n = _ref.i18n;\n  var formattedRecordingLengthSeconds = formatSeconds(recordingLengthSeconds);\n  return h(\"span\", {\n    \"aria-label\": i18n('recordingLength', {\n      recording_length: formattedRecordingLengthSeconds\n    })\n  }, formattedRecordingLengthSeconds);\n};","var _require = require('preact'),\n    h = _require.h;\n\nvar CameraIcon = require('./CameraIcon');\n\nmodule.exports = function (_ref) {\n  var onSnapshot = _ref.onSnapshot,\n      i18n = _ref.i18n;\n  return h(\"button\", {\n    class: \"uppy-u-reset uppy-c-btn uppy-Webcam-button uppy-Webcam-button--picture\",\n    type: \"button\",\n    title: i18n('takePicture'),\n    \"aria-label\": i18n('takePicture'),\n    onclick: onSnapshot,\n    \"data-uppy-super-focusable\": true\n  }, CameraIcon());\n};","var _require = require('preact'),\n    h = _require.h;\n\nmodule.exports = function (_ref) {\n  var currentDeviceId = _ref.currentDeviceId,\n      videoSources = _ref.videoSources,\n      onChangeVideoSource = _ref.onChangeVideoSource;\n  return h(\"div\", {\n    className: \"uppy-Webcam-videoSource\"\n  }, h(\"select\", {\n    className: \"uppy-u-reset uppy-Webcam-videoSource-select\",\n    onchange: function onchange(event) {\n      onChangeVideoSource(event.target.value);\n    }\n  }, videoSources.map(function (videoSource) {\n    return h(\"option\", {\n      key: videoSource.deviceId,\n      value: videoSource.deviceId,\n      selected: videoSource.deviceId === currentDeviceId\n    }, videoSource.label);\n  })));\n};","/**\n * Takes an Integer value of seconds (e.g. 83) and converts it into a human-readable formatted string (e.g. '1:23').\n *\n * @param {Integer} seconds\n * @returns {string} the formatted seconds (e.g. '1:23' for 1 minute and 23 seconds)\n *\n */\nmodule.exports = function formatSeconds(seconds) {\n  return Math.floor(seconds / 60) + \":\" + String(seconds % 60).padStart(2, 0);\n};","var _class, _temp;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; subClass.__proto__ = superClass; }\n\nvar _require = require('preact'),\n    h = _require.h;\n\nvar _require2 = require('@uppy/core'),\n    Plugin = _require2.Plugin;\n\nvar Translator = require('@uppy/utils/lib/Translator');\n\nvar getFileTypeExtension = require('@uppy/utils/lib/getFileTypeExtension');\n\nvar mimeTypes = require('@uppy/utils/lib/mimeTypes');\n\nvar canvasToBlob = require('@uppy/utils/lib/canvasToBlob');\n\nvar supportsMediaRecorder = require('./supportsMediaRecorder');\n\nvar CameraIcon = require('./CameraIcon');\n\nvar CameraScreen = require('./CameraScreen');\n\nvar PermissionsScreen = require('./PermissionsScreen');\n/**\n * Normalize a MIME type or file extension into a MIME type.\n *\n * @param {string} fileType - MIME type or a file extension prefixed with `.`.\n * @returns {string|undefined} The MIME type or `undefined` if the fileType is an extension and is not known.\n */\n\n\nfunction toMimeType(fileType) {\n  if (fileType[0] === '.') {\n    return mimeTypes[fileType.slice(1)];\n  }\n\n  return fileType;\n}\n/**\n * Is this MIME type a video?\n *\n * @param {string} mimeType - MIME type.\n * @returns {boolean}\n */\n\n\nfunction isVideoMimeType(mimeType) {\n  return /^video\\/[^*]+$/.test(mimeType);\n}\n/**\n * Is this MIME type an image?\n *\n * @param {string} mimeType - MIME type.\n * @returns {boolean}\n */\n\n\nfunction isImageMimeType(mimeType) {\n  return /^image\\/[^*]+$/.test(mimeType);\n}\n/**\n * Setup getUserMedia, with polyfill for older browsers\n * Adapted from: https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia\n */\n\n\nfunction getMediaDevices() {\n  // eslint-disable-next-line compat/compat\n  if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n    // eslint-disable-next-line compat/compat\n    return navigator.mediaDevices;\n  }\n\n  var _getUserMedia = navigator.mozGetUserMedia || navigator.webkitGetUserMedia;\n\n  if (!_getUserMedia) {\n    return null;\n  }\n\n  return {\n    getUserMedia: function getUserMedia(opts) {\n      return new Promise(function (resolve, reject) {\n        _getUserMedia.call(navigator, opts, resolve, reject);\n      });\n    }\n  };\n}\n/**\n * Webcam\n */\n\n\nmodule.exports = (_temp = _class = /*#__PURE__*/function (_Plugin) {\n  _inheritsLoose(Webcam, _Plugin);\n\n  function Webcam(uppy, opts) {\n    var _this;\n\n    _this = _Plugin.call(this, uppy, opts) || this;\n    _this.mediaDevices = getMediaDevices();\n    _this.supportsUserMedia = !!_this.mediaDevices;\n    _this.protocol = location.protocol.match(/https/i) ? 'https' : 'http';\n    _this.id = _this.opts.id || 'Webcam';\n    _this.title = _this.opts.title || 'Camera';\n    _this.type = 'acquirer';\n\n    _this.icon = function () {\n      return h(\"svg\", {\n        \"aria-hidden\": \"true\",\n        focusable: \"false\",\n        width: \"32\",\n        height: \"32\",\n        viewBox: \"0 0 32 32\"\n      }, h(\"g\", {\n        fill: \"none\",\n        \"fill-rule\": \"evenodd\"\n      }, h(\"rect\", {\n        fill: \"#03BFEF\",\n        width: \"32\",\n        height: \"32\",\n        rx: \"16\"\n      }), h(\"path\", {\n        d: \"M22 11c1.133 0 2 .867 2 2v7.333c0 1.134-.867 2-2 2H10c-1.133 0-2-.866-2-2V13c0-1.133.867-2 2-2h2.333l1.134-1.733C13.6 9.133 13.8 9 14 9h4c.2 0 .4.133.533.267L19.667 11H22zm-6 1.533a3.764 3.764 0 0 0-3.8 3.8c0 2.129 1.672 3.801 3.8 3.801s3.8-1.672 3.8-3.8c0-2.13-1.672-3.801-3.8-3.801zm0 6.261c-1.395 0-2.46-1.066-2.46-2.46 0-1.395 1.065-2.461 2.46-2.461s2.46 1.066 2.46 2.46c0 1.395-1.065 2.461-2.46 2.461z\",\n        fill: \"#FFF\",\n        \"fill-rule\": \"nonzero\"\n      })));\n    };\n\n    _this.defaultLocale = {\n      strings: {\n        smile: 'Smile!',\n        takePicture: 'Take a picture',\n        startRecording: 'Begin video recording',\n        stopRecording: 'Stop video recording',\n        allowAccessTitle: 'Please allow access to your camera',\n        allowAccessDescription: 'In order to take pictures or record video with your camera, please allow camera access for this site.',\n        noCameraTitle: 'Camera Not Available',\n        noCameraDescription: 'In order to take pictures or record video, please connect a camera device',\n        recordingStoppedMaxSize: 'Recording stopped because the file size is about to exceed the limit',\n        recordingLength: 'Recording length %{recording_length}'\n      }\n    }; // set default options\n\n    var defaultOptions = {\n      onBeforeSnapshot: function onBeforeSnapshot() {\n        return Promise.resolve();\n      },\n      countdown: false,\n      modes: ['video-audio', 'video-only', 'audio-only', 'picture'],\n      mirror: true,\n      showVideoSourceDropdown: false,\n      facingMode: 'user',\n      preferredImageMimeType: null,\n      preferredVideoMimeType: null,\n      showRecordingLength: false\n    };\n    _this.opts = _extends({}, defaultOptions, opts);\n\n    _this.i18nInit();\n\n    _this.install = _this.install.bind(_assertThisInitialized(_this));\n    _this.setPluginState = _this.setPluginState.bind(_assertThisInitialized(_this));\n    _this.render = _this.render.bind(_assertThisInitialized(_this)); // Camera controls\n\n    _this._start = _this._start.bind(_assertThisInitialized(_this));\n    _this._stop = _this._stop.bind(_assertThisInitialized(_this));\n    _this._takeSnapshot = _this._takeSnapshot.bind(_assertThisInitialized(_this));\n    _this._startRecording = _this._startRecording.bind(_assertThisInitialized(_this));\n    _this._stopRecording = _this._stopRecording.bind(_assertThisInitialized(_this));\n    _this._oneTwoThreeSmile = _this._oneTwoThreeSmile.bind(_assertThisInitialized(_this));\n    _this._focus = _this._focus.bind(_assertThisInitialized(_this));\n    _this._changeVideoSource = _this._changeVideoSource.bind(_assertThisInitialized(_this));\n    _this.webcamActive = false;\n\n    if (_this.opts.countdown) {\n      _this.opts.onBeforeSnapshot = _this._oneTwoThreeSmile;\n    }\n\n    _this.setPluginState({\n      hasCamera: false,\n      cameraReady: false,\n      cameraError: null,\n      recordingLengthSeconds: 0,\n      videoSources: [],\n      currentDeviceId: null\n    });\n\n    return _this;\n  }\n\n  var _proto = Webcam.prototype;\n\n  _proto.setOptions = function setOptions(newOpts) {\n    _Plugin.prototype.setOptions.call(this, _extends({}, newOpts, {\n      videoConstraints: _extends({}, this.opts.videoConstraints, newOpts == null ? void 0 : newOpts.videoConstraints)\n    }));\n\n    this.i18nInit();\n  };\n\n  _proto.i18nInit = function i18nInit() {\n    this.translator = new Translator([this.defaultLocale, this.uppy.locale, this.opts.locale]);\n    this.i18n = this.translator.translate.bind(this.translator);\n    this.i18nArray = this.translator.translateArray.bind(this.translator);\n    this.setPluginState(); // so that UI re-renders and we see the updated locale\n  };\n\n  _proto.hasCameraCheck = function hasCameraCheck() {\n    if (!this.mediaDevices) {\n      return Promise.resolve(false);\n    }\n\n    return this.mediaDevices.enumerateDevices().then(function (devices) {\n      return devices.some(function (device) {\n        return device.kind === 'videoinput';\n      });\n    });\n  };\n\n  _proto.getConstraints = function getConstraints(deviceId) {\n    var _this$opts$videoConst;\n\n    if (deviceId === void 0) {\n      deviceId = null;\n    }\n\n    var acceptsAudio = this.opts.modes.indexOf('video-audio') !== -1 || this.opts.modes.indexOf('audio-only') !== -1;\n    var acceptsVideo = this.opts.modes.indexOf('video-audio') !== -1 || this.opts.modes.indexOf('video-only') !== -1 || this.opts.modes.indexOf('picture') !== -1;\n\n    var videoConstraints = _extends({}, (_this$opts$videoConst = this.opts.videoConstraints) != null ? _this$opts$videoConst : {\n      facingMode: this.opts.facingMode\n    }, deviceId ? {\n      deviceId: deviceId,\n      facingMode: null\n    } : {});\n\n    return {\n      audio: acceptsAudio,\n      video: acceptsVideo ? videoConstraints : false\n    };\n  };\n\n  _proto._start = function _start(options) {\n    var _this2 = this;\n\n    if (options === void 0) {\n      options = null;\n    }\n\n    if (!this.supportsUserMedia) {\n      return Promise.reject(new Error('Webcam access not supported'));\n    }\n\n    this.webcamActive = true;\n    var constraints = this.getConstraints(options && options.deviceId ? options.deviceId : null);\n    this.hasCameraCheck().then(function (hasCamera) {\n      _this2.setPluginState({\n        hasCamera: hasCamera\n      }); // ask user for access to their camera\n\n\n      return _this2.mediaDevices.getUserMedia(constraints).then(function (stream) {\n        _this2.stream = stream;\n        var currentDeviceId = null;\n\n        if (!options || !options.deviceId) {\n          currentDeviceId = stream.getVideoTracks()[0].getSettings().deviceId;\n        } else {\n          stream.getVideoTracks().forEach(function (videoTrack) {\n            if (videoTrack.getSettings().deviceId === options.deviceId) {\n              currentDeviceId = videoTrack.getSettings().deviceId;\n            }\n          });\n        } // Update the sources now, so we can access the names.\n\n\n        _this2.updateVideoSources();\n\n        _this2.setPluginState({\n          currentDeviceId: currentDeviceId,\n          cameraReady: true\n        });\n      }).catch(function (err) {\n        _this2.setPluginState({\n          cameraReady: false,\n          cameraError: err\n        });\n\n        _this2.uppy.info(err.message, 'error');\n      });\n    });\n  }\n  /**\n   * @returns {object}\n   */\n  ;\n\n  _proto._getMediaRecorderOptions = function _getMediaRecorderOptions() {\n    var options = {}; // Try to use the `opts.preferredVideoMimeType` or one of the `allowedFileTypes` for the recording.\n    // If the browser doesn't support it, we'll fall back to the browser default instead.\n    // Safari doesn't have the `isTypeSupported` API.\n\n    if (MediaRecorder.isTypeSupported) {\n      var restrictions = this.uppy.opts.restrictions;\n      var preferredVideoMimeTypes = [];\n\n      if (this.opts.preferredVideoMimeType) {\n        preferredVideoMimeTypes = [this.opts.preferredVideoMimeType];\n      } else if (restrictions.allowedFileTypes) {\n        preferredVideoMimeTypes = restrictions.allowedFileTypes.map(toMimeType).filter(isVideoMimeType);\n      }\n\n      var acceptableMimeTypes = preferredVideoMimeTypes.filter(function (candidateType) {\n        return MediaRecorder.isTypeSupported(candidateType) && getFileTypeExtension(candidateType);\n      });\n\n      if (acceptableMimeTypes.length > 0) {\n        options.mimeType = acceptableMimeTypes[0];\n      }\n    }\n\n    return options;\n  };\n\n  _proto._startRecording = function _startRecording() {\n    var _this3 = this;\n\n    // only used if supportsMediaRecorder() returned true\n    // eslint-disable-next-line compat/compat\n    this.recorder = new MediaRecorder(this.stream, this._getMediaRecorderOptions());\n    this.recordingChunks = [];\n    var stoppingBecauseOfMaxSize = false;\n    this.recorder.addEventListener('dataavailable', function (event) {\n      _this3.recordingChunks.push(event.data);\n\n      var restrictions = _this3.uppy.opts.restrictions;\n\n      if (_this3.recordingChunks.length > 1 && restrictions.maxFileSize != null && !stoppingBecauseOfMaxSize) {\n        var totalSize = _this3.recordingChunks.reduce(function (acc, chunk) {\n          return acc + chunk.size;\n        }, 0); // Exclude the initial chunk from the average size calculation because it is likely to be a very small outlier\n\n\n        var averageChunkSize = (totalSize - _this3.recordingChunks[0].size) / (_this3.recordingChunks.length - 1);\n        var expectedEndChunkSize = averageChunkSize * 3;\n        var maxSize = Math.max(0, restrictions.maxFileSize - expectedEndChunkSize);\n\n        if (totalSize > maxSize) {\n          stoppingBecauseOfMaxSize = true;\n\n          _this3.uppy.info(_this3.i18n('recordingStoppedMaxSize'), 'warning', 4000);\n\n          _this3._stopRecording();\n        }\n      }\n    }); // use a \"time slice\" of 500ms: ondataavailable will be called each 500ms\n    // smaller time slices mean we can more accurately check the max file size restriction\n\n    this.recorder.start(500);\n\n    if (this.opts.showRecordingLength) {\n      // Start the recordingLengthTimer if we are showing the recording length.\n      this.recordingLengthTimer = setInterval(function () {\n        var currentRecordingLength = _this3.getPluginState().recordingLengthSeconds;\n\n        _this3.setPluginState({\n          recordingLengthSeconds: currentRecordingLength + 1\n        });\n      }, 1000);\n    }\n\n    this.setPluginState({\n      isRecording: true\n    });\n  };\n\n  _proto._stopRecording = function _stopRecording() {\n    var _this4 = this;\n\n    var stopped = new Promise(function (resolve, reject) {\n      _this4.recorder.addEventListener('stop', function () {\n        resolve();\n      });\n\n      _this4.recorder.stop();\n\n      if (_this4.opts.showRecordingLength) {\n        // Stop the recordingLengthTimer if we are showing the recording length.\n        clearInterval(_this4.recordingLengthTimer);\n\n        _this4.setPluginState({\n          recordingLengthSeconds: 0\n        });\n      }\n    });\n    return stopped.then(function () {\n      _this4.setPluginState({\n        isRecording: false\n      });\n\n      return _this4.getVideo();\n    }).then(function (file) {\n      try {\n        _this4.uppy.addFile(file);\n      } catch (err) {\n        // Logging the error, exept restrictions, which is handled in Core\n        if (!err.isRestriction) {\n          _this4.uppy.log(err);\n        }\n      }\n    }).then(function () {\n      _this4.recordingChunks = null;\n      _this4.recorder = null;\n    }, function (error) {\n      _this4.recordingChunks = null;\n      _this4.recorder = null;\n      throw error;\n    });\n  };\n\n  _proto._stop = function _stop() {\n    if (this.stream) {\n      this.stream.getAudioTracks().forEach(function (track) {\n        track.stop();\n      });\n      this.stream.getVideoTracks().forEach(function (track) {\n        track.stop();\n      });\n    }\n\n    this.webcamActive = false;\n    this.stream = null;\n  };\n\n  _proto._getVideoElement = function _getVideoElement() {\n    return this.el.querySelector('.uppy-Webcam-video');\n  };\n\n  _proto._oneTwoThreeSmile = function _oneTwoThreeSmile() {\n    var _this5 = this;\n\n    return new Promise(function (resolve, reject) {\n      var count = _this5.opts.countdown;\n      var countDown = setInterval(function () {\n        if (!_this5.webcamActive) {\n          clearInterval(countDown);\n          _this5.captureInProgress = false;\n          return reject(new Error('Webcam is not active'));\n        }\n\n        if (count > 0) {\n          _this5.uppy.info(count + \"...\", 'warning', 800);\n\n          count--;\n        } else {\n          clearInterval(countDown);\n\n          _this5.uppy.info(_this5.i18n('smile'), 'success', 1500);\n\n          setTimeout(function () {\n            return resolve();\n          }, 1500);\n        }\n      }, 1000);\n    });\n  };\n\n  _proto._takeSnapshot = function _takeSnapshot() {\n    var _this6 = this;\n\n    if (this.captureInProgress) return;\n    this.captureInProgress = true;\n    this.opts.onBeforeSnapshot().catch(function (err) {\n      var message = typeof err === 'object' ? err.message : err;\n\n      _this6.uppy.info(message, 'error', 5000);\n\n      return Promise.reject(new Error(\"onBeforeSnapshot: \" + message));\n    }).then(function () {\n      return _this6._getImage();\n    }).then(function (tagFile) {\n      _this6.captureInProgress = false;\n\n      try {\n        _this6.uppy.addFile(tagFile);\n      } catch (err) {\n        // Logging the error, except restrictions, which is handled in Core\n        if (!err.isRestriction) {\n          _this6.uppy.log(err);\n        }\n      }\n    }, function (error) {\n      _this6.captureInProgress = false;\n      throw error;\n    });\n  };\n\n  _proto._getImage = function _getImage() {\n    var _this7 = this;\n\n    var video = this._getVideoElement();\n\n    if (!video) {\n      return Promise.reject(new Error('No video element found, likely due to the Webcam tab being closed.'));\n    }\n\n    var width = video.videoWidth;\n    var height = video.videoHeight;\n    var canvas = document.createElement('canvas');\n    canvas.width = width;\n    canvas.height = height;\n    var ctx = canvas.getContext('2d');\n    ctx.drawImage(video, 0, 0);\n    var restrictions = this.uppy.opts.restrictions;\n    var preferredImageMimeTypes = [];\n\n    if (this.opts.preferredImageMimeType) {\n      preferredImageMimeTypes = [this.opts.preferredImageMimeType];\n    } else if (restrictions.allowedFileTypes) {\n      preferredImageMimeTypes = restrictions.allowedFileTypes.map(toMimeType).filter(isImageMimeType);\n    }\n\n    var mimeType = preferredImageMimeTypes[0] || 'image/jpeg';\n    var ext = getFileTypeExtension(mimeType) || 'jpg';\n    var name = \"cam-\" + Date.now() + \".\" + ext;\n    return canvasToBlob(canvas, mimeType).then(function (blob) {\n      return {\n        source: _this7.id,\n        name: name,\n        data: new Blob([blob], {\n          type: mimeType\n        }),\n        type: mimeType\n      };\n    });\n  };\n\n  _proto.getVideo = function getVideo() {\n    var mimeType = this.recordingChunks[0].type;\n    var fileExtension = getFileTypeExtension(mimeType);\n\n    if (!fileExtension) {\n      return Promise.reject(new Error(\"Could not retrieve recording: Unsupported media type \\\"\" + mimeType + \"\\\"\"));\n    }\n\n    var name = \"webcam-\" + Date.now() + \".\" + fileExtension;\n    var blob = new Blob(this.recordingChunks, {\n      type: mimeType\n    });\n    var file = {\n      source: this.id,\n      name: name,\n      data: new Blob([blob], {\n        type: mimeType\n      }),\n      type: mimeType\n    };\n    return Promise.resolve(file);\n  };\n\n  _proto._focus = function _focus() {\n    var _this8 = this;\n\n    if (!this.opts.countdown) return;\n    setTimeout(function () {\n      _this8.uppy.info(_this8.i18n('smile'), 'success', 1500);\n    }, 1000);\n  };\n\n  _proto._changeVideoSource = function _changeVideoSource(deviceId) {\n    this._stop();\n\n    this._start({\n      deviceId: deviceId\n    });\n  };\n\n  _proto.updateVideoSources = function updateVideoSources() {\n    var _this9 = this;\n\n    this.mediaDevices.enumerateDevices().then(function (devices) {\n      _this9.setPluginState({\n        videoSources: devices.filter(function (device) {\n          return device.kind === 'videoinput';\n        })\n      });\n    });\n  };\n\n  _proto.render = function render() {\n    if (!this.webcamActive) {\n      this._start();\n    }\n\n    var webcamState = this.getPluginState();\n\n    if (!webcamState.cameraReady || !webcamState.hasCamera) {\n      return h(PermissionsScreen, {\n        icon: CameraIcon,\n        i18n: this.i18n,\n        hasCamera: webcamState.hasCamera\n      });\n    }\n\n    return h(CameraScreen, _extends({}, webcamState, {\n      onChangeVideoSource: this._changeVideoSource,\n      onSnapshot: this._takeSnapshot,\n      onStartRecording: this._startRecording,\n      onStopRecording: this._stopRecording,\n      onFocus: this._focus,\n      onStop: this._stop,\n      i18n: this.i18n,\n      modes: this.opts.modes,\n      showRecordingLength: this.opts.showRecordingLength,\n      showVideoSourceDropdown: this.opts.showVideoSourceDropdown,\n      supportsRecording: supportsMediaRecorder(),\n      recording: webcamState.isRecording,\n      mirror: this.opts.mirror,\n      src: this.stream\n    }));\n  };\n\n  _proto.install = function install() {\n    var _this10 = this;\n\n    this.setPluginState({\n      cameraReady: false,\n      recordingLengthSeconds: 0\n    });\n    var target = this.opts.target;\n\n    if (target) {\n      this.mount(target, this);\n    }\n\n    if (this.mediaDevices) {\n      this.updateVideoSources();\n\n      this.mediaDevices.ondevicechange = function (event) {\n        _this10.updateVideoSources();\n\n        if (_this10.stream) {\n          var restartStream = true;\n\n          var _this10$getPluginStat = _this10.getPluginState(),\n              videoSources = _this10$getPluginStat.videoSources,\n              currentDeviceId = _this10$getPluginStat.currentDeviceId;\n\n          videoSources.forEach(function (videoSource) {\n            if (currentDeviceId === videoSource.deviceId) {\n              restartStream = false;\n            }\n          });\n\n          if (restartStream) {\n            _this10._stop();\n\n            _this10._start();\n          }\n        }\n      };\n    }\n  };\n\n  _proto.uninstall = function uninstall() {\n    if (this.stream) {\n      this._stop();\n    }\n\n    this.unmount();\n  };\n\n  return Webcam;\n}(Plugin), _class.VERSION = \"1.8.4\", _temp);","module.exports = function supportsMediaRecorder() {\n  /* eslint-disable compat/compat */\n  return typeof MediaRecorder === 'function' && !!MediaRecorder.prototype && typeof MediaRecorder.prototype.start === 'function';\n  /* eslint-enable compat/compat */\n};","var has = Object.prototype.hasOwnProperty\n\n/**\n * Stringify an object for use in a query string.\n *\n * @param {Object} obj - The object.\n * @param {string} prefix - When nesting, the parent key.\n *     keys in `obj` will be stringified as `prefix[key]`.\n * @returns {string}\n */\n\nmodule.exports = function queryStringify (obj, prefix) {\n  var pairs = []\n  for (var key in obj) {\n    if (!has.call(obj, key)) {\n      continue\n    }\n\n    var value = obj[key]\n    var enkey = encodeURIComponent(key)\n    var pair\n    if (typeof value === 'object') {\n      pair = queryStringify(value, prefix ? prefix + '[' + enkey + ']' : enkey)\n    } else {\n      pair = (prefix ? prefix + '[' + enkey + ']' : enkey) + '=' + encodeURIComponent(value)\n    }\n    pairs.push(pair)\n  }\n  return pairs.join('&')\n}\n"],"names":["_wrapNativeSuper","Class","_cache","Map","undefined","fn","Function","toString","call","indexOf","TypeError","has","get","set","Wrapper","_construct","arguments","_getPrototypeOf","this","constructor","prototype","Object","create","value","enumerable","writable","configurable","_setPrototypeOf","Parent","args","Reflect","construct","sham","Proxy","Date","e","_isNativeReflectConstruct","a","push","apply","instance","bind","o","p","setPrototypeOf","__proto__","getPrototypeOf","AuthError","_Error","subClass","superClass","_this","name","isAuthError","Error","module","exports","_extends","assign","target","i","length","source","key","hasOwnProperty","qsStringify","require","RequestClient","tokenStorage","_RequestClient","Provider","uppy","opts","provider","id","split","map","s","charAt","toUpperCase","slice","join","pluginId","tokenKey","companionKeysParams","preAuthToken","_proto","headers","_this2","Promise","all","getAuthToken","then","_ref","token","authHeaders","btoa","JSON","stringify","params","onReceiveResponse","response","plugin","getPlugin","authenticated","getPluginState","status","setPluginState","setAuthToken","storage","setItem","getItem","authUrl","queries","uppyPreAuthToken","strigifiedQueries","hostname","fileUrl","fetchPreAuthToken","_this3","post","res","catch","err","log","resolve","list","directory","logout","_this4","removeItem","_ref2","initPlugin","defaultOpts","type","files","serverUrl","serverPattern","companionAllowedHosts","pattern","Array","isArray","RegExp","test","companionUrl","replace","_class","_temp","_defineProperties","props","descriptor","defineProperty","fetchWithNetworkError","allowedHeaders","preflightDone","Constructor","protoProps","staticProps","userHeaders","companionHeaders","serverHeaders","defaultHeaders","_getPostResponseFunc","skip","_extends2","companion","getState","host","setState","_getUrl","url","_json","errMsg","statusText","json","errData","message","requestId","preflight","path","fetch","method","headerName","trim","toLowerCase","preflightAndHeaders","keys","forEach","header","skipPostResponse","credentials","companionCookiesRule","reject","data","_this5","body","delete","_this6","Accept","VERSION","SearchProvider","search","text","encodeURIComponent","ee","UppySocket","_queued","isOpen","emitter","_handleMessage","close","emit","on","once","send","autoOpen","open","socket","WebSocket","onopen","first","action","payload","onclose","onmessage","handler","parse","console","Socket","localStorage","ProviderViews","_ProviderViews","DriveProviderViews","toggleCheckbox","file","stopPropagation","preventDefault","custom","isTeamDrive","isSharedDrive","_assertThisInitialized","self","ReferenceError","Plugin","h","_Plugin","GoogleDrive","title","icon","focusable","width","height","viewBox","fill","rx","d","onFirstRender","render","install","view","mount","uninstall","tearDown","unmount","getFolder","state","OneDrive","Breadcrumb","class","onclick","isLast","breadcrumbsIcon","directories","classNames","Filter","ItemList","FooterActions","currentSelection","folders","uppyFiles","filterItems","filteredFolders","filteredFiles","filterInput","selected","viewType","showBreadcrumbs","headerComponent","showFilter","columns","sortByTitle","sortByDate","isChecked","handleFolderClick","getNextFolder","handleScroll","showTitles","i18n","validateRestrictions","Component","_Component","CloseWrapper","componentWillUnmount","onUnmount","children","_require","preventEnterPress","ev","keyCode","placeholder","onkeyup","onkeydown","onkeypress","oninput","filterQuery","done","smart_count","cancel","className","isDisabled","restrictionReason","role","disabled","itemIconEl","FileIcon","FolderIcon","style","minWidth","marginRight","VideoIcon","itemIconString","src","getAriaLabelOfCheckbox","onClick","for","ItemIcon","GridLi","ListLi","getItemIcon","remoteFileObjToLocal","Item","getSharedProps","fileOrFolder","onscroll","tabindex","folder","loading","concat","sharedProps","reason","result","AuthView","pluginNameComponent","pluginName","pluginIcon","i18nArray","handleAuth","User","Breadcrumbs","components","username","Header","Browser","LoaderView","generateFileID","getFileType","isPreviewSupported","SharedHandler","ProviderView","_sharedHandler","addFile","preFirstRender","handleError","listAllFiles","donePicking","cancelPicking","clearSelection","isSearchVisible","_updateFilesAndFolders","nextPagePath","items","item","isFolder","didFirstRender","loaderWrapper","updatedDirectories","index","array","predicate","findIndex","dir","requestPath","lastCheckbox","tagFile","providerFileToId","mimeType","isRemote","fileId","remote","providerOptions","fileType","preview","thumbnail","isRestriction","ok","revoked","manual_revoke_url","info","sorting","sortedFiles","sort","fileA","fileB","localeCompare","sortedFolders","folderA","folderB","modifiedDate","b","sortBySize","getItemData","size","addFolder","folderId","selectedFolders","count","ids","authState","origin","location","protocol","port","clientVersion","link","uppyVersions","authWindow","window","addEventListener","handleToken","_isOriginAllowed","removeEventListener","allowedOrigin","getRegex","filter","some","error","details","scrollPos","scrollHeight","scrollTop","offsetHeight","_isHandlingScroll","_this5$plugin$getPlug","moreFiles","_this7","promises","dashboard","hideAllPanels","viewOptions","_this$plugin$getPlugi2","targetViewOptions","headerProps","browserProps","getFiles","triggerSearchInput","input","validateAndSearch","ref","input_","SearchInput","isInputMode","_updateFilesAndInputMode","nextPageQuery","_searchTerm","searchedFor","query","currentTarget","focus","_this$plugin$getPlugi","shiftKey","_currentSelection","prevIndex","currentIndex","reduce","reducedCurrentSelection","validatedRestrictions","infoTimeout","promise","catch_","SearchProviderViews","UrlUI","handleKeyPress","handleClick","componentDidMount","Translator","forEachDroppedOrPastedUrl","UrlIcon","Url","defaultLocale","strings","import","enterUrlToImport","failedToFetch","enterCorrectUrl","i18nInit","getMeta","handleRootDrop","handleRootPaste","client","setOptions","newOpts","translator","locale","translate","translateArray","getFileNameFromUrl","substring","lastIndexOf","checkIfCorrectURL","match","addProtocolToURL","meta","dataTransfer","clipboardData","toArray","isDropOrPaste","callback","urlItems","kind","getAsString","urlString","Boolean","valueOf","NetworkError","xhr","isNetworkError","request","dataURItoBlob","canvas","quality","toBlob","toDataURL","mimeToExtensions","getFileNameAndExtension","extension","SnapshotButton","RecordButton","RecordingLength","VideoSourceSelect","isModeAvailable","modes","mode","CameraScreen","onFocus","onStop","shouldShowRecordButton","supportsRecording","shouldShowSnapshotButton","shouldShowRecordingLength","showRecordingLength","shouldShowVideoSourceDropdown","showVideoSourceDropdown","videoSources","mirror","autoplay","muted","playsinline","srcObject","hasCamera","recording","onStartRecording","onStopRecording","x","y","cx","cy","r","formatSeconds","recordingLengthSeconds","formattedRecordingLengthSeconds","recording_length","CameraIcon","onSnapshot","currentDeviceId","onChangeVideoSource","onchange","event","videoSource","deviceId","label","seconds","Math","floor","String","padStart","getFileTypeExtension","mimeTypes","canvasToBlob","supportsMediaRecorder","PermissionsScreen","toMimeType","isVideoMimeType","isImageMimeType","Webcam","mediaDevices","navigator","getUserMedia","_getUserMedia","mozGetUserMedia","webkitGetUserMedia","getMediaDevices","supportsUserMedia","smile","takePicture","startRecording","stopRecording","allowAccessTitle","allowAccessDescription","noCameraTitle","noCameraDescription","recordingStoppedMaxSize","recordingLength","defaultOptions","onBeforeSnapshot","countdown","facingMode","preferredImageMimeType","preferredVideoMimeType","_start","_stop","_takeSnapshot","_startRecording","_stopRecording","_oneTwoThreeSmile","_focus","_changeVideoSource","webcamActive","cameraReady","cameraError","videoConstraints","hasCameraCheck","enumerateDevices","devices","device","getConstraints","_this$opts$videoConst","acceptsAudio","acceptsVideo","audio","video","options","constraints","stream","getVideoTracks","videoTrack","getSettings","updateVideoSources","_getMediaRecorderOptions","MediaRecorder","isTypeSupported","restrictions","preferredVideoMimeTypes","allowedFileTypes","acceptableMimeTypes","candidateType","recorder","recordingChunks","stoppingBecauseOfMaxSize","maxFileSize","totalSize","acc","chunk","expectedEndChunkSize","max","start","recordingLengthTimer","setInterval","currentRecordingLength","isRecording","stop","clearInterval","getVideo","getAudioTracks","track","_getVideoElement","el","querySelector","countDown","captureInProgress","setTimeout","_getImage","videoWidth","videoHeight","document","createElement","getContext","drawImage","preferredImageMimeTypes","ext","now","blob","Blob","fileExtension","_this8","_this9","webcamState","_this10","ondevicechange","restartStream","_this10$getPluginStat","queryStringify","obj","prefix","pairs","pair","enkey"],"sourceRoot":""}