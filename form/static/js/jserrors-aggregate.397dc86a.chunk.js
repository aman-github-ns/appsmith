"use strict";(self.webpackChunkappsmith=self.webpackChunkappsmith||[]).push([[1317],{56777:function(e,t,r){r.d(t,{o:function(){return m}});var n=r(93433),a=r(15671),i=r(43144),s=r(82963),o=r(78814),u=r(61120),c=r(97326),l=r(60136),d=r(75284),f=r(9831),h=r(19198),v=r(99712),p=r(73198);var m=function(e){function t(e,r,n){var i,l,d,f,m;return(0,a.Z)(this,t),d=this,f=t,m=[n],f=(0,u.Z)(f),(l=(0,s.Z)(d,(0,o.Z)()?Reflect.construct(f,m||[],(0,u.Z)(d).constructor):f.apply(d,m))).endpoint=e,l.opts=r||{},l.started=!1,l.timeoutHandle=null,l.aborted=!1,l.harvest=new h.M(l.sharedContext),(0,v.L)(l.unload.bind((0,c.Z)(l))),null===(i=l.sharedContext)||void 0===i||i.ee.on(p.wO.RESET,(function(){return l.runHarvest({forceNoRetry:!0})})),l}return(0,l.Z)(t,e),(0,i.Z)(t,[{key:"unload",value:function(){this.aborted||(this.opts.onUnload&&this.opts.onUnload(),this.runHarvest({unload:!0}))}},{key:"startTimer",value:function(e,t){this.interval=e,this.started=!0,this.scheduleHarvest(null!=t?t:this.interval)}},{key:"stopTimer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.aborted=e,this.started=!1,this.timeoutHandle&&clearTimeout(this.timeoutHandle)}},{key:"scheduleHarvest",value:function(e,t){var r=this;this.timeoutHandle||(null==e&&(e=this.interval),this.timeoutHandle=setTimeout((function(){r.timeoutHandle=null,r.runHarvest(t)}),1e3*e))}},{key:"runHarvest",value:function(e){var t=this;if(!this.aborted){var r,a,i=function(r){null!==e&&void 0!==e&&e.forceNoRetry&&(r.retry=!1),t.onHarvestFinished(e,r)},s=[];if(this.opts.getPayload){if(!(r=d.qD({isFinalHarvest:null===e||void 0===e?void 0:e.unload})))return!1;var o=!(null!==e&&void 0!==e&&e.unload)&&r===d.Be;if(!(a=this.opts.getPayload({retry:o,opts:e})))return void(this.started&&this.scheduleHarvest());a="[object Array]"===Object.prototype.toString.call(a)?a:[a],s.push.apply(s,(0,n.Z)(a))}var u=function(e){return t.harvest.sendX(e)};s.length?u=this.opts.raw?function(e){return t.harvest._send(e)}:function(e){return t.harvest.send(e)}:s.push(void 0),s.forEach((function(n){u({endpoint:t.endpoint,payload:n,opts:e,submitMethod:r,cbFinished:i,customUrl:t.opts.customUrl,raw:t.opts.raw})})),this.started&&this.scheduleHarvest()}}},{key:"onHarvestFinished",value:function(e,t){if(this.opts.onFinished&&this.opts.onFinished(t),t.sent&&t.retry){var r=t.delay||this.opts.retryDelay;this.started&&r?(clearTimeout(this.timeoutHandle),this.timeoutHandle=null,this.scheduleHarvest(r,e)):!this.started&&r&&this.scheduleHarvest(r,e)}}}]),t}(f.w)},99712:function(e,t,r){r.d(t,{L:function(){return u}});var n=r(37762),a=r(98841),i=r(63711),s=r(73087);if(i.v6){i._A.cleanupTasks=[];var o=i._A.close;i._A.close=function(){var e,t=(0,n.Z)(i._A.cleanupTasks);try{for(t.s();!(e=t.n()).done;){(0,e.value)()}}catch(r){t.e(r)}finally{t.f()}o()}}function u(e){i.il?((0,s.N)(e,!0),(0,a.bP)("pagehide",e)):i.v6&&i._A.cleanupTasks.push(e)}},81766:function(e,t,r){r.r(t),r.d(t,{Aggregate:function(){return M}});var n=r(29439),a=r(15671),i=r(43144),s=r(82963),o=r(78814),u=r(61120),c=r(97326),l=r(60136),d=r(40101),f=r(4942),h=r(43889),v=/([a-z0-9]+)$/i;function p(e){if(e){var t=e.match(v);return t?t[1]:void 0}}var m=/^\n+|\n+$/g;function g(e){return function(e){var t;if(e.length>100){var r=e.length-100;t=e.slice(0,50).join("\n"),t+="\n< ...truncated "+r+" lines... >\n",t+=e.slice(-50).join("\n")}else t=e.join("\n");return t}(e).replace(m,"")}var y=r(63711),b=r(69292);function k(e){if("string"!==typeof e)return"";var t=(0,b.f)(e);return t===(0,b.f)(y.FN)?"<inline>":t}var S=!1,I=/function (.+?)\s*\(/,_=/^\s*at (?:((?:\[object object\])?(?:[^(]*\([^)]*\))*[^()]*(?: \[as \S+\])?) )?\(?((?:file|http|https|chrome-extension):.*?)?:(\d+)(?::(\d+))?\)?\s*$/i,Z=/^\s*(?:(\S*|global code)(?:\(.*?\))?@)?((?:file|http|https|chrome|safari-extension).*?):(\d+)(?::(\d+))?\s*$/i,w=/^\s*at .+ \(eval at \S+ \((?:(?:file|http|https):[^)]+)?\)(?:, [^:]*:\d+:\d+)?\)$/i,H=/^\s*at Function code \(Function code:\d+:\d+\)\s*/i;function N(e){var t=null;try{if(t=function(e){if(!e.stack)return null;var t=e.stack.split("\n").reduce(A,{frames:[],stackLines:[],wrapperSeen:!1});return t.frames.length?{mode:"stack",name:e.name||E(e),message:e.message,stackString:g(t.stackLines),frames:t.frames}:null}(e),t)return t}catch(r){S}try{if(t=function(e){if(!("line"in e))return null;var t=e.name||E(e);if(!e.sourceURL)return{mode:"sourceline",name:t,message:e.message,stackString:t+": "+e.message+"\n    in evaluated code",frames:[{func:"evaluated code"}]};var r=k(e.sourceURL),n=t+": "+e.message+"\n    at "+r;e.line&&(n+=":"+e.line,e.column&&(n+=":"+e.column));return{mode:"sourceline",name:t,message:e.message,stackString:n,frames:[{url:r,line:e.line,column:e.column}]}}(e),t)return t}catch(r){S}try{if(t=function(e){var t=e.name||E(e);return t?{mode:"nameonly",name:t,message:e.message,stackString:t+": "+e.message,frames:[]}:null}(e),t)return t}catch(r){S}return{mode:"failed",stackString:"",frames:[]}}function A(e,t){var r,n=function(e){var t=e.match(Z);t||(t=e.match(_));if(t)return{url:t[2],func:"Anonymous function"!==t[1]&&"global code"!==t[1]&&t[1]||null,line:+t[3],column:t[4]?+t[4]:null};if(e.match(w)||e.match(H)||"anonymous"===e)return{func:"evaluated code"}}(t);if(!n)return e.stackLines.push(t),e;if((r=n.func)&&r.indexOf("nrWrapper")>=0&&(e.wrapperSeen=!0),!e.wrapperSeen){var a=k(n.url);a!==n.url&&(t=t.replace(n.url,a),n.url=a),e.stackLines.push(t),e.frames.push(n)}return e}function E(e){var t=I.exec(String(e.constructor));return t&&t.length>1?t[1]:"unknown"}function j(e){var t=0;if(!e||!e.length)return t;for(var r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return t}var F=r(68295),P=r(56777),R=r(17610),U=r(38450),T=r(44567),D=r(19435),O=r(95568),x=r(30733),C=r(14415),B=r(90489),L=r(21782),q=r(51185);var $=new WeakSet,M=function(e){function t(e,r){var i,l,f,h,v;(0,a.Z)(this,t),f=this,h=t,v=[e,r,O.t],h=(0,u.Z)(h),i=(0,s.Z)(f,(0,o.Z)()?Reflect.construct(h,v||[],(0,u.Z)(f).constructor):h.apply(f,v)),(0,d.Z)((0,c.Z)(i),$),l=(0,c.Z)(i),i.stackReported={},i.observedAt={},i.pageviewReported={},i.bufferedErrorsUnderSpa={},i.currentBody=void 0,i.errorOnPage=!1,i.ee.on("interactionDone",(function(e,t){return i.onInteractionDone(e,t)})),(0,F.X)("err",(function(){var e;return(e=l).storeError.apply(e,arguments)}),i.featureName,i.ee),(0,F.X)("ierr",(function(){var e;return(e=l).storeError.apply(e,arguments)}),i.featureName,i.ee),(0,F.X)("softNavFlush",(function(e,t,r){return i.onSoftNavNotification(e,t,r)}),i.featureName,i.ee);var p=(0,D.Mt)(i.agentIdentifier,"jserrors.harvestTimeSeconds")||10;return i.waitForFlags(["err"]).then((function(e){if((0,n.Z)(e,1)[0]){var t=new P.o("jserrors",{onFinished:function(){var e;return(e=l).onHarvestFinished.apply(e,arguments)}},(0,c.Z)(i));t.harvest.on("jserrors",(function(){var e;return(e=l).onHarvestStarted.apply(e,arguments)})),t.startTimer(p),i.drain()}else i.blocked=!0,(0,L.o5)(i.agentIdentifier,i.featureName)})),i}return(0,l.Z)(t,e),(0,i.Z)(t,[{key:"onHarvestStarted",value:function(e){var t=this.aggregator.take(["err","ierr","xhr"]);e.retry&&(this.currentBody=t);var r={body:t,qs:{}},n=(0,R.P)((0,D.OP)(this.agentIdentifier).releaseIds);return"{}"!==n&&(r.qs.ri=n),t&&t.err&&t.err.length&&!this.errorOnPage&&(r.qs.pve="1",this.errorOnPage=!0),r}},{key:"onHarvestFinished",value:function(e){var t=this;e.retry&&this.currentBody&&((0,T.D)(this.currentBody,(function(e,r){for(var n=0;n<r.length;n++){var a=r[n],i=t.getBucketName(e,a.params,a.custom);t.aggregator.merge(e,i,a.metrics,a.params,a.custom)}})),this.currentBody=null)}},{key:"nameHash",value:function(e){return j("".concat(e.exceptionClass,"_").concat(e.message,"_").concat(e.stack_trace||e.browser_stack_hash))}},{key:"getBucketName",value:function(e,t,r){return"xhr"===e?j((0,R.P)(t))+":"+j((0,R.P)(r)):this.nameHash(t)+":"+j((0,R.P)(r))}},{key:"buildCanonicalStackString",value:function(e){for(var t="",r=0;r<e.frames.length;r++){var n=e.frames[r],a=p(n.func);t&&(t+="\n"),a&&(t+=a+"@"),"string"===typeof n.url&&(t+=n.url),n.line&&(t+=":"+n.line)}return t}},{key:"storeError",value:function(e,t,r,n){var a,i,s;t=t||(0,q.z)();var o,u=(0,D.OP)(this.agentIdentifier);if(r||!u.onerror||!(o=u.onerror(e))||"string"===typeof o.group&&o.group.length){var c=N(e),l={stackHash:j(this.buildCanonicalStackString(c)),exceptionClass:c.name,request_uri:null===y._A||void 0===y._A?void 0:y._A.location.pathname};c.message&&(l.message=""+c.message),null!==(a=o)&&void 0!==a&&a.group&&(l.errorGroup=o.group);var d,f=j("".concat(c.name,"_").concat(c.message,"_").concat(c.stackString));this.stackReported[f]?l.browser_stack_hash=j(c.stackString):(this.stackReported[f]=!0,l.stack_trace=(d=c.stackString).length>65530?d.substr(0,65530):d,this.observedAt[f]=u.timeKeeper.convertRelativeTimestamp(t)),l.releaseIds=(0,R.P)(u.releaseIds),this.pageviewReported[f]||(l.pageview=1,this.pageviewReported[f]=!0),null!==u&&void 0!==u&&null!==(i=u.session)&&void 0!==i&&null!==(i=i.state)&&void 0!==i&&i.sessionReplayMode&&(l.hasReplay=!0),l.firstOccurrenceTimestamp=this.observedAt[f],l.timestamp=this.observedAt[f];var v,p,m,g=[r?"ierr":"err",f,l,{time:t},n];if((0,U.p)("errorAgg",g,void 0,x.D.sessionTrace,this.ee),(0,U.p)("errorAgg",g,void 0,x.D.sessionReplay,this.ee),!this.blocked)if(Boolean(null===(s=(0,B.ek)(this.agentIdentifier))||void 0===s?void 0:s.features[x.D.softNav])?(0,U.p)("jserror",[l,t],void 0,x.D.softNav,this.ee):(0,U.p)("errorAgg",g,void 0,x.D.spa,this.ee),l.browserInteractionId&&!l._softNavFinished)null!==(m=(v=this.bufferedErrorsUnderSpa)[p=l.browserInteractionId])&&void 0!==m||(v[p]=[]),this.bufferedErrorsUnderSpa[l.browserInteractionId].push(g);else null!=l._interactionId?(this.bufferedErrorsUnderSpa[l._interactionId]=this.bufferedErrorsUnderSpa[l._interactionId]||[],this.bufferedErrorsUnderSpa[l._interactionId].push(g)):(0,h.Z)(this,$,X).call(this,g,void 0!==l.browserInteractionId,l._softNavAttributes)}}},{key:"onInteractionDone",value:function(e,t){var r=this;this.bufferedErrorsUnderSpa[e.id]&&!this.blocked&&(this.bufferedErrorsUnderSpa[e.id].forEach((function(n){var a={},i=n[4];(0,T.D)(e.root.attrs.custom,u),(0,T.D)(i,u);var s=n[2];t&&(s.browserInteractionId=e.root.attrs.id,s._interactionNodeId&&(s.parentNodeId=s._interactionNodeId.toString())),delete s._interactionId,delete s._interactionNodeId;var o=(t?n[1]+e.root.attrs.id:n[1])+":"+j((0,R.P)(a));function u(e,t){a[e]=t&&"object"===typeof t?(0,R.P)(t):t}r.aggregator.store(n[0],o,s,n[3],a)})),delete this.bufferedErrorsUnderSpa[e.id])}},{key:"onSoftNavNotification",value:function(e,t,r){var n,a=this;this.blocked||(null===(n=this.bufferedErrorsUnderSpa[e])||void 0===n||n.forEach((function(e){return(0,h.Z)(a,$,X).call(a,e,t,r)})),delete this.bufferedErrorsUnderSpa[e])}}]),t}(C.m);function X(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=(0,n.Z)(e,5),i=a[0],s=a[1],o=a[2],u=a[3],c=a[4],l={};t?(Object.entries(r).forEach((function(e){var t=(0,n.Z)(e,2);return f(t[0],t[1])})),s+=o.browserInteractionId,delete o._softNavAttributes,delete o._softNavFinished):(Object.entries((0,D.C5)(this.agentIdentifier).jsAttributes).forEach((function(e){var t=(0,n.Z)(e,2);return f(t[0],t[1])})),delete o.browserInteractionId),c&&Object.entries(c).forEach((function(e){var t=(0,n.Z)(e,2);return f(t[0],t[1])}));var d=s+":"+j((0,R.P)(l));function f(e,t){l[e]=t&&"object"===typeof t?(0,R.P)(t):t}this.aggregator.store(i,d,o,u,l)}(0,f.Z)(M,"featureName",O.t)}}]);
//# sourceMappingURL=jserrors-aggregate.397dc86a.chunk.js.map