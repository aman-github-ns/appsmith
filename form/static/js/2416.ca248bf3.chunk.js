/*! For license information please see 2416.ca248bf3.chunk.js.LICENSE.txt */
"use strict";(self.webpackChunkappsmith=self.webpackChunkappsmith||[]).push([[2416],{19198:function(t,e,n){n.d(e,{M:function(){return R}});var r=n(29439),i=n(1413),o=n(15671),a=n(43144),s=n(82963),u=n(78814),c=n(61120),l=n(60136),d=n(41130),f=n(17610),v=n(75284);function h(){return""+location}var y=n(19435),g=n(69292),p=n(98841),b=n(34370);function Z(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"string",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return t&&"object"===typeof t?(Object.keys(t).forEach((function(i){"object"===typeof t[i]?Z(t[i],e,n,r):typeof t[i]!==n||r.includes(i)||(t[i]=e(t[i]))})),t):t}var m=n(9831),w=n(26158),k=n(63711),x=n(31390),A=n(51185);var C={},R=function(t){function e(t){var n,r,i,a;return(0,o.Z)(this,e),r=this,i=e,a=[t],i=(0,c.Z)(i),(n=(0,s.Z)(r,(0,u.Z)()?Reflect.construct(i,a||[],(0,c.Z)(r).constructor):i.apply(r,a))).tooManyRequestsDelay=(0,y.Mt)(n.sharedContext.agentIdentifier,"harvest.tooManyRequestsDelay")||60,n.obfuscator=new b.RR(n.sharedContext),n._events={},n}return(0,l.Z)(e,t),(0,a.Z)(e,[{key:"sendX",value:function(){var t,e,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=v.qD({isFinalHarvest:null===(t=r.opts)||void 0===t?void 0:t.unload}),a={retry:!(null!==(e=r.opts)&&void 0!==e&&e.unload)&&o===v.Be,isFinalHarvest:!0===(null===(n=r.opts)||void 0===n?void 0:n.unload)},s=this.createPayload(r.endpoint,a);return(this.obfuscator.shouldObfuscate()?this.obfuscateAndSend.bind(this):this._send.bind(this))((0,i.Z)((0,i.Z)({},r),{},{payload:s,submitMethod:o}))}},{key:"send",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(this.obfuscator.shouldObfuscate()?this.obfuscateAndSend.bind(this):this._send.bind(this))(t)}},{key:"obfuscateAndSend",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.payload,r=void 0===n?{}:n;return Z(r,(function(){var e;return(e=t.obfuscator).obfuscateString.apply(e,arguments)}),"string",["e"]),this._send((0,i.Z)((0,i.Z)({},e),{},{payload:r}))}},{key:"_send",value:function(t){var e,n=t.endpoint,r=t.payload,i=void 0===r?{}:r,o=t.opts,a=void 0===o?{}:o,s=t.submitMethod,u=t.cbFinished,c=t.customUrl,l=t.raw,h=t.includeBaseParams,g=void 0===h||h,b=(0,y.C5)(this.sharedContext.agentIdentifier);if(!b.errorBeacon)return!1;var Z=(0,y.OP)(this.sharedContext.agentIdentifier),m=this.cleanPayload(i),w=m.body,A=m.qs;if(0===Object.keys(w).length&&(null===a||void 0===a||!a.sendEmptyBody))return u&&u({sent:!1}),!1;var R=(0,y.P_)(this.sharedContext.agentIdentifier),I=!1===R.ssl?"http":"https",j=R.proxy.beacon||b.errorBeacon,P="rum"!==n?"/".concat(n):"",q="".concat(I,"://").concat(j).concat(P,"/1/").concat(b.licenseKey);c&&(q=c),l&&(q="".concat(I,"://").concat(j,"/").concat(n));var O=!l&&g?this.baseQueryString(A):"",B=(0,d.j6)(A,Z.maxBytes);s||(s=v.qD({isFinalHarvest:a.unload})),""===O&&B.startsWith("&")&&(B=B.substring(1));var _="".concat(q,"?").concat(O).concat(B);!(null===A||void 0===A||null===(e=A.attributes)||void 0===e||!e.includes("gzip"))||(w="events"===n?w.e:(0,f.P)(w)).length>75e4&&1===(C[n]=((null===C||void 0===C?void 0:C[n])||0)+1)&&(0,x.Z)("The Browser Agent is attempting to send a very large payload to /".concat(n,". This is usually tied to large amounts of custom attributes. Please check your configurations.")),w&&0!==w.length&&"{}"!==w&&"[]"!==w||(w="");var T=[];T.push({key:"content-type",value:"text/plain"});var D=s({url:_,body:w,sync:a.unload&&(k.v6||k.w1),headers:T});if(!a.unload&&u&&s===v.Be){var F=this;D.addEventListener("loadend",(function(){var t={sent:0!==this.status,status:this.status,xhr:this,fullUrl:_};429===this.status?(t.retry=!0,t.delay=F.tooManyRequestsDelay):408!==this.status&&500!==this.status&&503!==this.status||(t.retry=!0),a.needResponse&&(t.responseText=this.responseText),u(t)}),(0,p.m$)(!1))}return(0,y.OP)(this.sharedContext.agentIdentifier).harvestCount++,D}},{key:"baseQueryString",value:function(t){var e,n,r=(0,y.OP)(this.sharedContext.agentIdentifier),i=(0,y.C5)(this.sharedContext.agentIdentifier),o=(0,g.f)(h()),a=this.obfuscator.shouldObfuscate()?this.obfuscator.obfuscateString(o):o;return["a="+i.applicationID,(0,d.wu)("sa",i.sa?""+i.sa:""),(0,d.wu)("v",w.q4),I(i),(0,d.wu)("ct",r.customTransaction),"&rst="+(0,A.z)(),"&ck=0","&s="+((null===(e=r.session)||void 0===e?void 0:e.state.value)||"0"),(0,d.wu)("ref",a),(0,d.wu)("ptid",r.ptid?""+r.ptid:""),(0,d.wu)("hr",1===(null===r||void 0===r||null===(n=r.session)||void 0===n?void 0:n.state.sessionReplayMode)?"1":"0",t)].join("")}},{key:"createPayload",value:function(t,e){var n=this._events[t],r={body:{},qs:{}};if(Array.isArray(n)&&n.length>0)for(var o=0;o<n.length;o++){var a=n[o](e);a&&(r.body=(0,i.Z)((0,i.Z)({},r.body),a.body||{}),r.qs=(0,i.Z)((0,i.Z)({},r.qs),a.qs||{}))}return r}},{key:"cleanPayload",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=function(t){return"undefined"!==typeof Uint8Array&&t instanceof Uint8Array||Array.isArray(t)?t:"string"===typeof t?t.length>0?t:null:Object.entries(t||{}).reduce((function(t,e){var n=(0,r.Z)(e,2),i=n[0],o=n[1];return("number"===typeof o||"string"===typeof o&&o.length>0||"object"===typeof o&&Object.keys(o||{}).length>0)&&(t[i]=o),t}),{})};return{body:e(t.body),qs:e(t.qs)}}},{key:"on",value:function(t,e){Array.isArray(this._events[t])||(this._events[t]=[]),this._events[t].push(e)}}]),e}(m.w);function I(t){return t.transactionName?(0,d.wu)("to",t.transactionName):(0,d.wu)("t",t.tNamePlain||"Unnamed Transaction")}},69292:function(t,e,n){n.d(e,{f:function(){return o}});var r=/([^?#]*)[^#]*(#[^?]*|$).*/,i=/([^?#]*)().*/;function o(t,e){return t.replace(e?r:i,"$1$2")}},41130:function(t,e,n){n.d(e,{j6:function(){return l},wu:function(){return d}});var r=n(44567),i=n(17610),o={"%2C":",","%3A":":","%2F":"/","%40":"@","%24":"$","%3B":";"},a=(0,r.D)(o,(function(t){return t})),s=new RegExp(a.join("|"),"g");function u(t){return o[t]}function c(t){return null===t||void 0===t?"null":encodeURIComponent(t).replace(s,u)}function l(t,e){var n=0,o="";return(0,r.D)(t,(function(t,r){var a,s,u=[];if("string"===typeof r||!Array.isArray(r)&&null!==r&&void 0!==r&&r.toString().length)a="&"+t+"="+c(r),n+=a.length,o+=a;else if(Array.isArray(r)&&r.length){for(n+=9,s=0;s<r.length&&(a=c((0,i.P)(r[s])),n+=a.length,!("undefined"!==typeof e&&n>=e));s++)u.push(a);o+="&"+t+"=%5B"+u.join(",")+"%5D"}})),o}function d(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object.keys(n).includes(t)?"":e&&"string"===typeof e?"&"+t+"="+c(e):""}},12293:function(t,e,n){n.d(e,{V:function(){return i}});var r=n(63711);function i(){var t;return Boolean("file:"===(null===r._A||void 0===r._A||null===(t=r._A.location)||void 0===t?void 0:t.protocol))}},34370:function(t,e,n){n.d(e,{$c:function(){return y},Ng:function(){return g},RR:function(){return h}});var r=n(15671),i=n(43144),o=n(82963),a=n(78814),s=n(61120),u=n(60136),c=n(19435),l=n(9831),d=n(12293),f=n(31390);var v={regex:/^file:\/\/(.*)/,replacement:atob("ZmlsZTovL09CRlVTQ0FURUQ=")},h=function(t){function e(){return(0,r.Z)(this,e),t=this,n=e,i=arguments,n=(0,s.Z)(n),(0,o.Z)(t,(0,a.Z)()?Reflect.construct(n,i||[],(0,s.Z)(t).constructor):n.apply(t,i));var t,n,i}return(0,u.Z)(e,t),(0,i.Z)(e,[{key:"shouldObfuscate",value:function(){return y(this.sharedContext.agentIdentifier).length>0}},{key:"obfuscateString",value:function(t){if(!t||"string"!==typeof t)return t;for(var e=y(this.sharedContext.agentIdentifier),n=t,r=0;r<e.length;r++){var i=e[r].regex,o=e[r].replacement||"*";n=n.replace(i,o)}return n}}]),e}(l.w);function y(t){var e=[],n=(0,c.Mt)(t,"obfuscate")||[];return e=e.concat(n),(0,d.V)()&&e.push(v),e}function g(t){for(var e=!1,n=!1,r=0;r<t.length;r++){"regex"in t[r]?"string"===typeof t[r].regex||t[r].regex instanceof RegExp||((0,f.Z)('An obfuscation replacement rule contains a "regex" value with an invalid type (must be a string or RegExp)'),n=!0):((0,f.Z)('An obfuscation replacement rule was detected missing a "regex" value.'),n=!0);var i=t[r].replacement;i&&"string"!==typeof i&&((0,f.Z)('An obfuscation replacement rule contains a "replacement" value with an invalid type (must be a string)'),e=!0)}return!e&&!n}},75284:function(t,e,n){n.d(e,{Be:function(){return o},qD:function(){return i}});var r=n(63711);function i(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).isFinalHarvest;return void 0!==t&&t&&r.il&&r.Nk?a:o}function o(t){var e=t.url,n=t.body,r=void 0===n?null:n,i=t.sync,o=t.method,a=void 0===o?"POST":o,s=t.headers,u=void 0===s?[{key:"content-type",value:"text/plain"}]:s,c=new XMLHttpRequest;c.open(a,e,!i);try{"withCredentials"in c&&(c.withCredentials=!0)}catch(l){}return u.forEach((function(t){c.setRequestHeader(t.key,t.value)})),c.send(r),c}function a(t){var e=t.url,n=t.body;try{return window.navigator.sendBeacon.bind(window.navigator)(e,n)}catch(r){return!1}}},14415:function(t,e,n){n.d(e,{m:function(){return g}});var r=n(1413),i=n(15671),o=n(43144),a=n(82963),s=n(78814),u=n(61120),c=n(60136),l=n(95508),d=n(19435),f=n(10273),v=n(90489),h=n(21782),y=n(31285);var g=function(t){function e(){var t,n,r,o;return(0,i.Z)(this,e),n=this,r=e,o=arguments,r=(0,u.Z)(r),(t=(0,a.Z)(n,(0,s.Z)()?Reflect.construct(r,o||[],(0,u.Z)(n).constructor):r.apply(n,o))).checkConfiguration(),t}return(0,c.Z)(e,t),(0,o.Z)(e,[{key:"waitForFlags",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new Promise((function(n,r){function i(t){return e.map((function(e){return t[e]?t[e]:0}))}y.T[t.agentIdentifier]?n(i(y.T[t.agentIdentifier])):t.ee.on("rumresp",(function(){n(i(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}))}))}))}},{key:"drain",value:function(){(0,h.LP)(this.agentIdentifier,this.featureName)}},{key:"checkConfiguration",value:function(){if(!(0,d.lF)(this.agentIdentifier)){var t,e=(0,r.Z)({},null===(t=(0,v.gG)().info)||void 0===t?void 0:t.jsAttributes);try{var n;e=(0,r.Z)((0,r.Z)({},e),null===(n=(0,d.C5)(this.agentIdentifier))||void 0===n?void 0:n.jsAttributes)}catch(i){}(0,f.j)({agentIdentifier:this.agentIdentifier},(0,r.Z)((0,r.Z)({},(0,v.gG)()),{},{info:(0,r.Z)((0,r.Z)({},(0,v.gG)().info),{},{jsAttributes:e}),runtime:(0,d.OP)(this.agentIdentifier)}))}}}]),e}(l.W)}}]);
//# sourceMappingURL=2416.ca248bf3.chunk.js.map